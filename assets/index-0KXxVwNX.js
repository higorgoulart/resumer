var Pm=r=>{throw TypeError(r)};var wh=(r,t,e)=>t.has(r)||Pm("Cannot "+e);var Zt=(r,t,e)=>(wh(r,t,"read from private field"),e?e.call(r):t.get(r)),Bn=(r,t,e)=>t.has(r)?Pm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),Ze=(r,t,e,i)=>(wh(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e),Pn=(r,t,e)=>(wh(r,t,"access private method"),e);var jm=(r,t,e,i)=>({set _(a){Ze(r,t,a,e)},get _(){return Zt(r,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var Eh={exports:{}},Sr={};var Fm;function eA(){if(Fm)return Sr;Fm=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Sr.Fragment=t,Sr.jsx=e,Sr.jsxs=e,Sr}var Im;function nA(){return Im||(Im=1,Eh.exports=eA()),Eh.exports}var L=nA(),Th={exports:{}},vt={};var Um;function iA(){if(Um)return vt;Um=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function v(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(R,q,K){this.props=R,this.context=q,this.refs=E,this.updater=K||A}T.prototype.isReactComponent={},T.prototype.setState=function(R,q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,q,"setState")},T.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function O(){}O.prototype=T.prototype;function x(R,q,K){this.props=R,this.context=q,this.refs=E,this.updater=K||A}var D=x.prototype=new O;D.constructor=x,S(D,T.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function B(){}var F={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function J(R,q,K){var tt=K.ref;return{$$typeof:r,type:R,key:q,ref:tt!==void 0?tt:null,props:K}}function st(R,q){return J(R.type,q,R.props)}function W(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function dt(R){var q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(K){return q[K]})}var bt=/\/+/g;function gt(R,q){return typeof R=="object"&&R!==null&&R.key!=null?dt(""+R.key):q.toString(36)}function Et(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(B,B):(R.status="pending",R.then(function(q){R.status==="pending"&&(R.status="fulfilled",R.value=q)},function(q){R.status==="pending"&&(R.status="rejected",R.reason=q)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function N(R,q,K,tt,ot){var mt=typeof R;(mt==="undefined"||mt==="boolean")&&(R=null);var lt=!1;if(R===null)lt=!0;else switch(mt){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(R.$$typeof){case r:case t:lt=!0;break;case g:return lt=R._init,N(lt(R._payload),q,K,tt,ot)}}if(lt)return ot=ot(R),lt=tt===""?"."+gt(R,0):tt,k(ot)?(K="",lt!=null&&(K=lt.replace(bt,"$&/")+"/"),N(ot,q,K,"",function(Zi){return Zi})):ot!=null&&(W(ot)&&(ot=st(ot,K+(ot.key==null||R&&R.key===ot.key?"":(""+ot.key).replace(bt,"$&/")+"/")+lt)),q.push(ot)),1;lt=0;var ne=tt===""?".":tt+":";if(k(R))for(var Jt=0;Jt<R.length;Jt++)tt=R[Jt],mt=ne+gt(tt,Jt),lt+=N(tt,q,K,mt,ot);else if(Jt=v(R),typeof Jt=="function")for(R=Jt.call(R),Jt=0;!(tt=R.next()).done;)tt=tt.value,mt=ne+gt(tt,Jt++),lt+=N(tt,q,K,mt,ot);else if(mt==="object"){if(typeof R.then=="function")return N(Et(R),q,K,tt,ot);throw q=String(R),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return lt}function G(R,q,K){if(R==null)return R;var tt=[],ot=0;return N(R,tt,"","",function(mt){return q.call(K,mt,ot++)}),tt}function Q(R){if(R._status===-1){var q=R._result;q=q(),q.then(function(K){(R._status===0||R._status===-1)&&(R._status=1,R._result=K)},function(K){(R._status===0||R._status===-1)&&(R._status=2,R._result=K)}),R._status===-1&&(R._status=0,R._result=q)}if(R._status===1)return R._result.default;throw R._result}var ft=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},Tt={map:G,forEach:function(R,q,K){G(R,function(){q.apply(this,arguments)},K)},count:function(R){var q=0;return G(R,function(){q++}),q},toArray:function(R){return G(R,function(q){return q})||[]},only:function(R){if(!W(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return vt.Activity=y,vt.Children=Tt,vt.Component=T,vt.Fragment=e,vt.Profiler=a,vt.PureComponent=x,vt.StrictMode=i,vt.Suspense=d,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,vt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return F.H.useMemoCache(R)}},vt.cache=function(R){return function(){return R.apply(null,arguments)}},vt.cacheSignal=function(){return null},vt.cloneElement=function(R,q,K){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var tt=S({},R.props),ot=R.key;if(q!=null)for(mt in q.key!==void 0&&(ot=""+q.key),q)!X.call(q,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&q.ref===void 0||(tt[mt]=q[mt]);var mt=arguments.length-2;if(mt===1)tt.children=K;else if(1<mt){for(var lt=Array(mt),ne=0;ne<mt;ne++)lt[ne]=arguments[ne+2];tt.children=lt}return J(R.type,ot,tt)},vt.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},vt.createElement=function(R,q,K){var tt,ot={},mt=null;if(q!=null)for(tt in q.key!==void 0&&(mt=""+q.key),q)X.call(q,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ot[tt]=q[tt]);var lt=arguments.length-2;if(lt===1)ot.children=K;else if(1<lt){for(var ne=Array(lt),Jt=0;Jt<lt;Jt++)ne[Jt]=arguments[Jt+2];ot.children=ne}if(R&&R.defaultProps)for(tt in lt=R.defaultProps,lt)ot[tt]===void 0&&(ot[tt]=lt[tt]);return J(R,mt,ot)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(R){return{$$typeof:h,render:R}},vt.isValidElement=W,vt.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:Q}},vt.memo=function(R,q){return{$$typeof:f,type:R,compare:q===void 0?null:q}},vt.startTransition=function(R){var q=F.T,K={};F.T=K;try{var tt=R(),ot=F.S;ot!==null&&ot(K,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(B,ft)}catch(mt){ft(mt)}finally{q!==null&&K.types!==null&&(q.types=K.types),F.T=q}},vt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},vt.use=function(R){return F.H.use(R)},vt.useActionState=function(R,q,K){return F.H.useActionState(R,q,K)},vt.useCallback=function(R,q){return F.H.useCallback(R,q)},vt.useContext=function(R){return F.H.useContext(R)},vt.useDebugValue=function(){},vt.useDeferredValue=function(R,q){return F.H.useDeferredValue(R,q)},vt.useEffect=function(R,q){return F.H.useEffect(R,q)},vt.useEffectEvent=function(R){return F.H.useEffectEvent(R)},vt.useId=function(){return F.H.useId()},vt.useImperativeHandle=function(R,q,K){return F.H.useImperativeHandle(R,q,K)},vt.useInsertionEffect=function(R,q){return F.H.useInsertionEffect(R,q)},vt.useLayoutEffect=function(R,q){return F.H.useLayoutEffect(R,q)},vt.useMemo=function(R,q){return F.H.useMemo(R,q)},vt.useOptimistic=function(R,q){return F.H.useOptimistic(R,q)},vt.useReducer=function(R,q,K){return F.H.useReducer(R,q,K)},vt.useRef=function(R){return F.H.useRef(R)},vt.useState=function(R){return F.H.useState(R)},vt.useSyncExternalStore=function(R,q,K){return F.H.useSyncExternalStore(R,q,K)},vt.useTransition=function(){return F.H.useTransition()},vt.version="19.2.3",vt}var Hm;function cd(){return Hm||(Hm=1,Th.exports=iA()),Th.exports}var qn=cd(),xh={exports:{}},wr={},Ch={exports:{}},Rh={};var qm;function sA(){return qm||(qm=1,(function(r){function t(N,G){var Q=N.length;N.push(G);t:for(;0<Q;){var ft=Q-1>>>1,Tt=N[ft];if(0<a(Tt,G))N[ft]=G,N[Q]=Tt,Q=ft;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var G=N[0],Q=N.pop();if(Q!==G){N[0]=Q;t:for(var ft=0,Tt=N.length,R=Tt>>>1;ft<R;){var q=2*(ft+1)-1,K=N[q],tt=q+1,ot=N[tt];if(0>a(K,Q))tt<Tt&&0>a(ot,K)?(N[ft]=ot,N[tt]=Q,ft=tt):(N[ft]=K,N[q]=Q,ft=q);else if(tt<Tt&&0>a(ot,Q))N[ft]=ot,N[tt]=Q,ft=tt;else break t}}return G}function a(N,G){var Q=N.sortIndex-G.sortIndex;return Q!==0?Q:N.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();r.unstable_now=function(){return c.now()-h}}var d=[],f=[],g=1,y=null,b=3,v=!1,A=!1,S=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function D(N){for(var G=e(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=N)i(f),G.sortIndex=G.expirationTime,t(d,G);else break;G=e(f)}}function k(N){if(S=!1,D(N),!A)if(e(d)!==null)A=!0,B||(B=!0,dt());else{var G=e(f);G!==null&&Et(k,G.startTime-N)}}var B=!1,F=-1,X=5,J=-1;function st(){return E?!0:!(r.unstable_now()-J<X)}function W(){if(E=!1,B){var N=r.unstable_now();J=N;var G=!0;try{t:{A=!1,S&&(S=!1,O(F),F=-1),v=!0;var Q=b;try{e:{for(D(N),y=e(d);y!==null&&!(y.expirationTime>N&&st());){var ft=y.callback;if(typeof ft=="function"){y.callback=null,b=y.priorityLevel;var Tt=ft(y.expirationTime<=N);if(N=r.unstable_now(),typeof Tt=="function"){y.callback=Tt,D(N),G=!0;break e}y===e(d)&&i(d),D(N)}else i(d);y=e(d)}if(y!==null)G=!0;else{var R=e(f);R!==null&&Et(k,R.startTime-N),G=!1}}break t}finally{y=null,b=Q,v=!1}G=void 0}}finally{G?dt():B=!1}}}var dt;if(typeof x=="function")dt=function(){x(W)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,gt=bt.port2;bt.port1.onmessage=W,dt=function(){gt.postMessage(null)}}else dt=function(){T(W,0)};function Et(N,G){F=T(function(){N(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(N){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var Q=b;b=G;try{return N()}finally{b=Q}},r.unstable_requestPaint=function(){E=!0},r.unstable_runWithPriority=function(N,G){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Q=b;b=N;try{return G()}finally{b=Q}},r.unstable_scheduleCallback=function(N,G,Q){var ft=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ft+Q:ft):Q=ft,N){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=Q+Tt,N={id:g++,callback:G,priorityLevel:N,startTime:Q,expirationTime:Tt,sortIndex:-1},Q>ft?(N.sortIndex=Q,t(f,N),e(d)===null&&N===e(f)&&(S?(O(F),F=-1):S=!0,Et(k,Q-ft))):(N.sortIndex=Tt,t(d,N),A||v||(A=!0,B||(B=!0,dt()))),N},r.unstable_shouldYield=st,r.unstable_wrapCallback=function(N){var G=b;return function(){var Q=b;b=G;try{return N.apply(this,arguments)}finally{b=Q}}}})(Rh)),Rh}var Gm;function aA(){return Gm||(Gm=1,Ch.exports=sA()),Ch.exports}var Oh={exports:{}},ke={};var $m;function rA(){if($m)return ke;$m=1;var r=cd();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ke.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,g)},ke.flushSync=function(d){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=g,i.d.f()}},ke.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ke.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ke.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=h(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&i.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ke.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ke.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ke.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ke.requestFormReset=function(d){i.d.r(d)},ke.unstable_batchedUpdates=function(d,f){return d(f)},ke.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},ke.useFormStatus=function(){return c.H.useHostTransitionStatus()},ke.version="19.2.3",ke}var Vm;function oA(){if(Vm)return Oh.exports;Vm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Oh.exports=rA(),Oh.exports}var Xm;function lA(){if(Xm)return wr;Xm=1;var r=aA(),t=cd(),e=oA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var p=o.return;if(p===null)break;var m=p.alternate;if(m===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===o)return d(p),n;if(m===u)return d(p),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=p,u=m;else{for(var _=!1,w=p.child;w;){if(w===o){_=!0,o=p,u=m;break}if(w===u){_=!0,u=p,o=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===o){_=!0,o=m,u=p;break}if(w===u){_=!0,u=m,o=p;break}w=w.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),st=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function dt(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var bt=Symbol.for("react.client.reference");function gt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===bt?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case J:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case x:return n.displayName||"Context";case O:return(n._context.displayName||"Context")+".Consumer";case D:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case F:return s=n.displayName||null,s!==null?s:gt(n.type)||"Memo";case X:s=n._payload,n=n._init;try{return gt(n(s))}catch{}}return null}var Et=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ft=[],Tt=-1;function R(n){return{current:n}}function q(n){0>Tt||(n.current=ft[Tt],ft[Tt]=null,Tt--)}function K(n,s){Tt++,ft[Tt]=n.current,n.current=s}var tt=R(null),ot=R(null),mt=R(null),lt=R(null);function ne(n,s){switch(K(mt,s),K(ot,n),K(tt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?rm(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=rm(s),n=om(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}q(tt),K(tt,n)}function Jt(){q(tt),q(ot),q(mt)}function Zi(n){n.memoizedState!==null&&K(lt,n);var s=tt.current,o=om(s,n.type);s!==o&&(K(ot,n),K(tt,o))}function mi(n){ot.current===n&&(q(tt),q(ot)),lt.current===n&&(q(lt),br._currentValue=Q)}var Yi,Oa;function Vn(n){if(Yi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Yi=s&&s[1]||"",Oa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yi+n+Oa}var rc=!1;function oc(n,s){if(!n||rc)return"";rc=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var I=H}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(H){I=H}n.call(Z.prototype)}}else{try{throw Error()}catch(H){I=H}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&I&&typeof H.stack=="string")return[H.stack,I.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var C=_.split(`
`),j=w.split(`
`);for(p=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;p<j.length&&!j[p].includes("DetermineComponentFrameRoot");)p++;if(u===C.length||p===j.length)for(u=C.length-1,p=j.length-1;1<=u&&0<=p&&C[u]!==j[p];)p--;for(;1<=u&&0<=p;u--,p--)if(C[u]!==j[p]){if(u!==1||p!==1)do if(u--,p--,0>p||C[u]!==j[p]){var $=`
`+C[u].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=u&&0<=p);break}}}finally{rc=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Vn(o):""}function N0(n,s){switch(n.tag){case 26:case 27:case 5:return Vn(n.type);case 16:return Vn("Lazy");case 13:return n.child!==s&&s!==null?Vn("Suspense Fallback"):Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 15:return oc(n.type,!1);case 11:return oc(n.type.render,!1);case 1:return oc(n.type,!0);case 31:return Vn("Activity");default:return""}}function Bd(n){try{var s="",o=null;do s+=N0(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var lc=Object.prototype.hasOwnProperty,cc=r.unstable_scheduleCallback,uc=r.unstable_cancelCallback,k0=r.unstable_shouldYield,L0=r.unstable_requestPaint,We=r.unstable_now,z0=r.unstable_getCurrentPriorityLevel,Pd=r.unstable_ImmediatePriority,jd=r.unstable_UserBlockingPriority,Qr=r.unstable_NormalPriority,B0=r.unstable_LowPriority,Fd=r.unstable_IdlePriority,P0=r.log,j0=r.unstable_setDisableYieldValue,Ma=null,tn=null;function yi(n){if(typeof P0=="function"&&j0(n),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(Ma,n)}catch{}}var en=Math.clz32?Math.clz32:U0,F0=Math.log,I0=Math.LN2;function U0(n){return n>>>=0,n===0?32:31-(F0(n)/I0|0)|0}var Wr=256,to=262144,eo=4194304;function Ki(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function no(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var p=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~m,u!==0?p=Ki(u):(_&=w,_!==0?p=Ki(_):o||(o=w&~n,o!==0&&(p=Ki(o))))):(w=u&~m,w!==0?p=Ki(w):_!==0?p=Ki(_):o||(o=u&~n,o!==0&&(p=Ki(o)))),p===0?0:s!==0&&s!==p&&(s&m)===0&&(m=p&-p,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:p}function Da(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function H0(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Id(){var n=eo;return eo<<=1,(eo&62914560)===0&&(eo=4194304),n}function hc(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Na(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function q0(n,s,o,u,p,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,C=n.expirationTimes,j=n.hiddenUpdates;for(o=_&~o;0<o;){var $=31-en(o),Z=1<<$;w[$]=0,C[$]=-1;var I=j[$];if(I!==null)for(j[$]=null,$=0;$<I.length;$++){var H=I[$];H!==null&&(H.lane&=-536870913)}o&=~Z}u!==0&&Ud(n,u,0),m!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function Ud(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-en(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Hd(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-en(o),p=1<<u;p&s|n[u]&s&&(n[u]|=s),o&=~p}}function qd(n,s){var o=s&-s;return o=(o&42)!==0?1:dc(o),(o&(n.suspendedLanes|s))!==0?0:o}function dc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function fc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Gd(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:Mm(n.type))}function $d(n,s){var o=G.p;try{return G.p=n,s()}finally{G.p=o}}var bi=Math.random().toString(36).slice(2),we="__reactFiber$"+bi,Ue="__reactProps$"+bi,Rs="__reactContainer$"+bi,pc="__reactEvents$"+bi,G0="__reactListeners$"+bi,$0="__reactHandles$"+bi,Vd="__reactResources$"+bi,ka="__reactMarker$"+bi;function gc(n){delete n[we],delete n[Ue],delete n[pc],delete n[G0],delete n[$0]}function Os(n){var s=n[we];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Rs]||o[we]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=pm(n);n!==null;){if(o=n[we])return o;n=pm(n)}return s}n=o,o=n.parentNode}return null}function Ms(n){if(n=n[we]||n[Rs]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function La(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Ds(n){var s=n[Vd];return s||(s=n[Vd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function _e(n){n[ka]=!0}var Xd=new Set,Zd={};function Ji(n,s){Ns(n,s),Ns(n+"Capture",s)}function Ns(n,s){for(Zd[n]=s,n=0;n<s.length;n++)Xd.add(s[n])}var V0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yd={},Kd={};function X0(n){return lc.call(Kd,n)?!0:lc.call(Yd,n)?!1:V0.test(n)?Kd[n]=!0:(Yd[n]=!0,!1)}function io(n,s,o){if(X0(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function so(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Xn(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Z0(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function mc(n){if(!n._valueTracker){var s=Jd(n)?"checked":"value";n._valueTracker=Z0(n,s,""+n[s])}}function Qd(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Jd(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function ao(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Y0=/[\n"\\]/g;function fn(n){return n.replace(Y0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yc(n,s,o,u,p,m,_,w){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+dn(s)):n.value!==""+dn(s)&&(n.value=""+dn(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?bc(n,_,dn(s)):o!=null?bc(n,_,dn(o)):u!=null&&n.removeAttribute("value"),p==null&&m!=null&&(n.defaultChecked=!!m),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+dn(w):n.removeAttribute("name")}function Wd(n,s,o,u,p,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){mc(n);return}o=o!=null?""+dn(o):"",s=s!=null?""+dn(s):o,w||s===n.value||(n.value=s),n.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),mc(n)}function bc(n,s,o){s==="number"&&ao(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ks(n,s,o,u){if(n=n.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<n.length;o++)p=s.hasOwnProperty("$"+n[o].value),n[o].selected!==p&&(n[o].selected=p),p&&u&&(n[o].defaultSelected=!0)}else{for(o=""+dn(o),s=null,p=0;p<n.length;p++){if(n[p].value===o){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function tf(n,s,o){if(s!=null&&(s=""+dn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+dn(o):""}function ef(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Et(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=dn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),mc(n)}function Ls(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var K0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||K0.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function sf(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&o[p]!==u&&nf(n,p,u)}else for(var m in s)s.hasOwnProperty(m)&&nf(n,m,s[m])}function vc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ro(n){return Q0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zn(){}var _c=null;function Ac(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,Bs=null;function af(n){var s=Ms(n);if(s&&(n=s.stateNode)){var o=n[Ue]||null;t:switch(n=s.stateNode,s.type){case"input":if(yc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var p=u[Ue]||null;if(!p)throw Error(i(90));yc(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Qd(u)}break t;case"textarea":tf(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&ks(n,!!o.multiple,s,!1)}}}var Sc=!1;function rf(n,s,o){if(Sc)return n(s,o);Sc=!0;try{var u=n(s);return u}finally{if(Sc=!1,(zs!==null||Bs!==null)&&(Zo(),zs&&(s=zs,n=Bs,Bs=zs=null,af(s),n)))for(s=0;s<n.length;s++)af(n[s])}}function za(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Ue]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wc=!1;if(Yn)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){wc=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{wc=!1}var vi=null,Ec=null,oo=null;function of(){if(oo)return oo;var n,s=Ec,o=s.length,u,p="value"in vi?vi.value:vi.textContent,m=p.length;for(n=0;n<o&&s[n]===p[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===p[m-u];u++);return oo=p.slice(n,1<u?1-u:void 0)}function lo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function co(){return!0}function lf(){return!1}function He(n){function s(o,u,p,m,_){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?co:lf,this.isPropagationStopped=lf,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),s}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=He(Qi),Pa=y({},Qi,{view:0,detail:0}),W0=He(Pa),Tc,xc,ja,ho=y({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ja&&(ja&&n.type==="mousemove"?(Tc=n.screenX-ja.screenX,xc=n.screenY-ja.screenY):xc=Tc=0,ja=n),Tc)},movementY:function(n){return"movementY"in n?n.movementY:xc}}),cf=He(ho),tv=y({},ho,{dataTransfer:0}),ev=He(tv),nv=y({},Pa,{relatedTarget:0}),Cc=He(nv),iv=y({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),sv=He(iv),av=y({},Qi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rv=He(av),ov=y({},Qi,{data:0}),uf=He(ov),lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hv(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=uv[n])?!!s[n]:!1}function Rc(){return hv}var dv=y({},Pa,{key:function(n){if(n.key){var s=lv[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=lo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rc,charCode:function(n){return n.type==="keypress"?lo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?lo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fv=He(dv),pv=y({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hf=He(pv),gv=y({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rc}),mv=He(gv),yv=y({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bv=He(yv),vv=y({},ho,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),_v=He(vv),Av=y({},Qi,{newState:0,oldState:0}),Sv=He(Av),wv=[9,13,27,32],Oc=Yn&&"CompositionEvent"in window,Fa=null;Yn&&"documentMode"in document&&(Fa=document.documentMode);var Ev=Yn&&"TextEvent"in window&&!Fa,df=Yn&&(!Oc||Fa&&8<Fa&&11>=Fa),ff=" ",pf=!1;function gf(n,s){switch(n){case"keyup":return wv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ps=!1;function Tv(n,s){switch(n){case"compositionend":return mf(s);case"keypress":return s.which!==32?null:(pf=!0,ff);case"textInput":return n=s.data,n===ff&&pf?null:n;default:return null}}function xv(n,s){if(Ps)return n==="compositionend"||!Oc&&gf(n,s)?(n=of(),oo=Ec=vi=null,Ps=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return df&&s.locale!=="ko"?null:s.data;default:return null}}var Cv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Cv[n.type]:s==="textarea"}function bf(n,s,o,u){zs?Bs?Bs.push(u):Bs=[u]:zs=u,s=el(s,"onChange"),0<s.length&&(o=new uo("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Ia=null,Ua=null;function Rv(n){tm(n,0)}function fo(n){var s=La(n);if(Qd(s))return n}function vf(n,s){if(n==="change")return s}var _f=!1;if(Yn){var Mc;if(Yn){var Dc="oninput"in document;if(!Dc){var Af=document.createElement("div");Af.setAttribute("oninput","return;"),Dc=typeof Af.oninput=="function"}Mc=Dc}else Mc=!1;_f=Mc&&(!document.documentMode||9<document.documentMode)}function Sf(){Ia&&(Ia.detachEvent("onpropertychange",wf),Ua=Ia=null)}function wf(n){if(n.propertyName==="value"&&fo(Ua)){var s=[];bf(s,Ua,n,Ac(n)),rf(Rv,s)}}function Ov(n,s,o){n==="focusin"?(Sf(),Ia=s,Ua=o,Ia.attachEvent("onpropertychange",wf)):n==="focusout"&&Sf()}function Mv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fo(Ua)}function Dv(n,s){if(n==="click")return fo(s)}function Nv(n,s){if(n==="input"||n==="change")return fo(s)}function kv(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var nn=typeof Object.is=="function"?Object.is:kv;function Ha(n,s){if(nn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!lc.call(s,p)||!nn(n[p],s[p]))return!1}return!0}function Ef(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Tf(n,s){var o=Ef(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ef(o)}}function xf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?xf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Cf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ao(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=ao(n.document)}return s}function Nc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Lv=Yn&&"documentMode"in document&&11>=document.documentMode,js=null,kc=null,qa=null,Lc=!1;function Rf(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Lc||js==null||js!==ao(u)||(u=js,"selectionStart"in u&&Nc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),qa&&Ha(qa,u)||(qa=u,u=el(kc,"onSelect"),0<u.length&&(s=new uo("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=js)))}function Wi(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Fs={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},zc={},Of={};Yn&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function ts(n){if(zc[n])return zc[n];if(!Fs[n])return n;var s=Fs[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Of)return zc[n]=s[o];return n}var Mf=ts("animationend"),Df=ts("animationiteration"),Nf=ts("animationstart"),zv=ts("transitionrun"),Bv=ts("transitionstart"),Pv=ts("transitioncancel"),kf=ts("transitionend"),Lf=new Map,Bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bc.push("scrollEnd");function Cn(n,s){Lf.set(n,s),Ji(s,[n])}var po=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},pn=[],Is=0,Pc=0;function go(){for(var n=Is,s=Pc=Is=0;s<n;){var o=pn[s];pn[s++]=null;var u=pn[s];pn[s++]=null;var p=pn[s];pn[s++]=null;var m=pn[s];if(pn[s++]=null,u!==null&&p!==null){var _=u.pending;_===null?p.next=p:(p.next=_.next,_.next=p),u.pending=p}m!==0&&zf(o,p,m)}}function mo(n,s,o,u){pn[Is++]=n,pn[Is++]=s,pn[Is++]=o,pn[Is++]=u,Pc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function jc(n,s,o,u){return mo(n,s,o,u),yo(n)}function es(n,s){return mo(n,null,null,s),yo(n)}function zf(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var p=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(p=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,p&&s!==null&&(p=31-en(o),n=m.hiddenUpdates,u=n[p],u===null?n[p]=[s]:u.push(s),s.lane=o|536870912),m):null}function yo(n){if(50<hr)throw hr=0,Xu=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Us={};function jv(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(n,s,o,u){return new jv(n,s,o,u)}function Fc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Kn(n,s){var o=n.alternate;return o===null?(o=sn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Bf(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function bo(n,s,o,u,p,m){var _=0;if(u=n,typeof n=="function")Fc(n)&&(_=1);else if(typeof n=="string")_=q_(n,o,tt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case J:return n=sn(31,o,s,p),n.elementType=J,n.lanes=m,n;case S:return ns(o.children,p,m,s);case E:_=8,p|=24;break;case T:return n=sn(12,o,s,p|2),n.elementType=T,n.lanes=m,n;case k:return n=sn(13,o,s,p),n.elementType=k,n.lanes=m,n;case B:return n=sn(19,o,s,p),n.elementType=B,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:_=10;break t;case O:_=9;break t;case D:_=11;break t;case F:_=14;break t;case X:_=16,u=null;break t}_=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=sn(_,o,s,p),s.elementType=n,s.type=u,s.lanes=m,s}function ns(n,s,o,u){return n=sn(7,n,u,s),n.lanes=o,n}function Ic(n,s,o){return n=sn(6,n,null,s),n.lanes=o,n}function Pf(n){var s=sn(18,null,null,0);return s.stateNode=n,s}function Uc(n,s,o){return s=sn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var jf=new WeakMap;function gn(n,s){if(typeof n=="object"&&n!==null){var o=jf.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Bd(s)},jf.set(n,s),s)}return{value:n,source:s,stack:Bd(s)}}var Hs=[],qs=0,vo=null,Ga=0,mn=[],yn=0,_i=null,Nn=1,kn="";function Jn(n,s){Hs[qs++]=Ga,Hs[qs++]=vo,vo=n,Ga=s}function Ff(n,s,o){mn[yn++]=Nn,mn[yn++]=kn,mn[yn++]=_i,_i=n;var u=Nn;n=kn;var p=32-en(u)-1;u&=~(1<<p),o+=1;var m=32-en(s)+p;if(30<m){var _=p-p%5;m=(u&(1<<_)-1).toString(32),u>>=_,p-=_,Nn=1<<32-en(s)+p|o<<p|u,kn=m+n}else Nn=1<<m|o<<p|u,kn=n}function Hc(n){n.return!==null&&(Jn(n,1),Ff(n,1,0))}function qc(n){for(;n===vo;)vo=Hs[--qs],Hs[qs]=null,Ga=Hs[--qs],Hs[qs]=null;for(;n===_i;)_i=mn[--yn],mn[yn]=null,kn=mn[--yn],mn[yn]=null,Nn=mn[--yn],mn[yn]=null}function If(n,s){mn[yn++]=Nn,mn[yn++]=kn,mn[yn++]=_i,Nn=s.id,kn=s.overflow,_i=n}var Ee=null,$t=null,Dt=!1,Ai=null,bn=!1,Gc=Error(i(519));function Si(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(gn(s,n)),Gc}function Uf(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[we]=n,s[Ue]=u,o){case"dialog":Rt("cancel",s),Rt("close",s);break;case"iframe":case"object":case"embed":Rt("load",s);break;case"video":case"audio":for(o=0;o<fr.length;o++)Rt(fr[o],s);break;case"source":Rt("error",s);break;case"img":case"image":case"link":Rt("error",s),Rt("load",s);break;case"details":Rt("toggle",s);break;case"input":Rt("invalid",s),Wd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Rt("invalid",s);break;case"textarea":Rt("invalid",s),ef(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||sm(s.textContent,o)?(u.popover!=null&&(Rt("beforetoggle",s),Rt("toggle",s)),u.onScroll!=null&&Rt("scroll",s),u.onScrollEnd!=null&&Rt("scrollend",s),u.onClick!=null&&(s.onclick=Zn),s=!0):s=!1,s||Si(n,!0)}function Hf(n){for(Ee=n.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:bn=!1;return;case 27:case 3:bn=!0;return;default:Ee=Ee.return}}function Gs(n){if(n!==Ee)return!1;if(!Dt)return Hf(n),Dt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||lh(n.type,n.memoizedProps)),o=!o),o&&$t&&Si(n),Hf(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));$t=fm(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));$t=fm(n)}else s===27?(s=$t,Bi(n.type)?(n=fh,fh=null,$t=n):$t=s):$t=Ee?_n(n.stateNode.nextSibling):null;return!0}function is(){$t=Ee=null,Dt=!1}function $c(){var n=Ai;return n!==null&&(Ve===null?Ve=n:Ve.push.apply(Ve,n),Ai=null),n}function $a(n){Ai===null?Ai=[n]:Ai.push(n)}var Vc=R(null),ss=null,Qn=null;function wi(n,s,o){K(Vc,s._currentValue),s._currentValue=o}function Wn(n){n._currentValue=Vc.current,q(Vc)}function Xc(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Zc(n,s,o,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var m=p.dependencies;if(m!==null){var _=p.child;m=m.firstContext;t:for(;m!==null;){var w=m;m=p;for(var C=0;C<s.length;C++)if(w.context===s[C]){m.lanes|=o,w=m.alternate,w!==null&&(w.lanes|=o),Xc(m.return,o,n),u||(_=null);break t}m=w.next}}else if(p.tag===18){if(_=p.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Xc(_,o,n),_=null}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===n){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}}function $s(n,s,o,u){n=null;for(var p=s,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var _=p.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var w=p.type;nn(p.pendingProps.value,_.value)||(n!==null?n.push(w):n=[w])}}else if(p===lt.current){if(_=p.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(br):n=[br])}p=p.return}n!==null&&Zc(s,n,o,u),s.flags|=262144}function _o(n){for(n=n.firstContext;n!==null;){if(!nn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function as(n){ss=n,Qn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Te(n){return qf(ss,n)}function Ao(n,s){return ss===null&&as(n),qf(n,s)}function qf(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Qn===null){if(n===null)throw Error(i(308));Qn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Qn=Qn.next=s;return o}var Fv=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},Iv=r.unstable_scheduleCallback,Uv=r.unstable_NormalPriority,le={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yc(){return{controller:new Fv,data:new Map,refCount:0}}function Va(n){n.refCount--,n.refCount===0&&Iv(Uv,function(){n.controller.abort()})}var Xa=null,Kc=0,Vs=0,Xs=null;function Hv(n,s){if(Xa===null){var o=Xa=[];Kc=0,Vs=Wu(),Xs={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Kc++,s.then(Gf,Gf),s}function Gf(){if(--Kc===0&&Xa!==null){Xs!==null&&(Xs.status="fulfilled");var n=Xa;Xa=null,Vs=0,Xs=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function qv(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var $f=N.S;N.S=function(n,s){Rg=We(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Hv(n,s),$f!==null&&$f(n,s)};var rs=R(null);function Jc(){var n=rs.current;return n!==null?n:Gt.pooledCache}function So(n,s){s===null?K(rs,rs.current):K(rs,s.pool)}function Vf(){var n=Jc();return n===null?null:{parent:le._currentValue,pool:n}}var Zs=Error(i(460)),Qc=Error(i(474)),wo=Error(i(542)),Eo={then:function(){}};function Xf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Zf(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Zn,Zn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Kf(n),n;default:if(typeof s.status=="string")s.then(Zn,Zn);else{if(n=Gt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Kf(n),n}throw ls=s,Zs}}function os(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ls=o,Zs):o}}var ls=null;function Yf(){if(ls===null)throw Error(i(459));var n=ls;return ls=null,n}function Kf(n){if(n===Zs||n===wo)throw Error(i(483))}var Ys=null,Za=0;function To(n){var s=Za;return Za+=1,Ys===null&&(Ys=[]),Zf(Ys,n,s)}function Ya(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function xo(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Jf(n){function s(z,M){if(n){var P=z.deletions;P===null?(z.deletions=[M],z.flags|=16):P.push(M)}}function o(z,M){if(!n)return null;for(;M!==null;)s(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function p(z,M){return z=Kn(z,M),z.index=0,z.sibling=null,z}function m(z,M,P){return z.index=P,n?(P=z.alternate,P!==null?(P=P.index,P<M?(z.flags|=67108866,M):P):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function w(z,M,P,V){return M===null||M.tag!==6?(M=Ic(P,z.mode,V),M.return=z,M):(M=p(M,P),M.return=z,M)}function C(z,M,P,V){var rt=P.type;return rt===S?$(z,M,P.props.children,V,P.key):M!==null&&(M.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===X&&os(rt)===M.type)?(M=p(M,P.props),Ya(M,P),M.return=z,M):(M=bo(P.type,P.key,P.props,null,z.mode,V),Ya(M,P),M.return=z,M)}function j(z,M,P,V){return M===null||M.tag!==4||M.stateNode.containerInfo!==P.containerInfo||M.stateNode.implementation!==P.implementation?(M=Uc(P,z.mode,V),M.return=z,M):(M=p(M,P.children||[]),M.return=z,M)}function $(z,M,P,V,rt){return M===null||M.tag!==7?(M=ns(P,z.mode,V,rt),M.return=z,M):(M=p(M,P),M.return=z,M)}function Z(z,M,P){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Ic(""+M,z.mode,P),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case v:return P=bo(M.type,M.key,M.props,null,z.mode,P),Ya(P,M),P.return=z,P;case A:return M=Uc(M,z.mode,P),M.return=z,M;case X:return M=os(M),Z(z,M,P)}if(Et(M)||dt(M))return M=ns(M,z.mode,P,null),M.return=z,M;if(typeof M.then=="function")return Z(z,To(M),P);if(M.$$typeof===x)return Z(z,Ao(z,M),P);xo(z,M)}return null}function I(z,M,P,V){var rt=M!==null?M.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return rt!==null?null:w(z,M,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case v:return P.key===rt?C(z,M,P,V):null;case A:return P.key===rt?j(z,M,P,V):null;case X:return P=os(P),I(z,M,P,V)}if(Et(P)||dt(P))return rt!==null?null:$(z,M,P,V,null);if(typeof P.then=="function")return I(z,M,To(P),V);if(P.$$typeof===x)return I(z,M,Ao(z,P),V);xo(z,P)}return null}function H(z,M,P,V,rt){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return z=z.get(P)||null,w(M,z,""+V,rt);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return z=z.get(V.key===null?P:V.key)||null,C(M,z,V,rt);case A:return z=z.get(V.key===null?P:V.key)||null,j(M,z,V,rt);case X:return V=os(V),H(z,M,P,V,rt)}if(Et(V)||dt(V))return z=z.get(P)||null,$(M,z,V,rt,null);if(typeof V.then=="function")return H(z,M,P,To(V),rt);if(V.$$typeof===x)return H(z,M,P,Ao(M,V),rt);xo(M,V)}return null}function nt(z,M,P,V){for(var rt=null,kt=null,at=M,wt=M=0,Mt=null;at!==null&&wt<P.length;wt++){at.index>wt?(Mt=at,at=null):Mt=at.sibling;var Lt=I(z,at,P[wt],V);if(Lt===null){at===null&&(at=Mt);break}n&&at&&Lt.alternate===null&&s(z,at),M=m(Lt,M,wt),kt===null?rt=Lt:kt.sibling=Lt,kt=Lt,at=Mt}if(wt===P.length)return o(z,at),Dt&&Jn(z,wt),rt;if(at===null){for(;wt<P.length;wt++)at=Z(z,P[wt],V),at!==null&&(M=m(at,M,wt),kt===null?rt=at:kt.sibling=at,kt=at);return Dt&&Jn(z,wt),rt}for(at=u(at);wt<P.length;wt++)Mt=H(at,z,wt,P[wt],V),Mt!==null&&(n&&Mt.alternate!==null&&at.delete(Mt.key===null?wt:Mt.key),M=m(Mt,M,wt),kt===null?rt=Mt:kt.sibling=Mt,kt=Mt);return n&&at.forEach(function(Ui){return s(z,Ui)}),Dt&&Jn(z,wt),rt}function ut(z,M,P,V){if(P==null)throw Error(i(151));for(var rt=null,kt=null,at=M,wt=M=0,Mt=null,Lt=P.next();at!==null&&!Lt.done;wt++,Lt=P.next()){at.index>wt?(Mt=at,at=null):Mt=at.sibling;var Ui=I(z,at,Lt.value,V);if(Ui===null){at===null&&(at=Mt);break}n&&at&&Ui.alternate===null&&s(z,at),M=m(Ui,M,wt),kt===null?rt=Ui:kt.sibling=Ui,kt=Ui,at=Mt}if(Lt.done)return o(z,at),Dt&&Jn(z,wt),rt;if(at===null){for(;!Lt.done;wt++,Lt=P.next())Lt=Z(z,Lt.value,V),Lt!==null&&(M=m(Lt,M,wt),kt===null?rt=Lt:kt.sibling=Lt,kt=Lt);return Dt&&Jn(z,wt),rt}for(at=u(at);!Lt.done;wt++,Lt=P.next())Lt=H(at,z,wt,Lt.value,V),Lt!==null&&(n&&Lt.alternate!==null&&at.delete(Lt.key===null?wt:Lt.key),M=m(Lt,M,wt),kt===null?rt=Lt:kt.sibling=Lt,kt=Lt);return n&&at.forEach(function(tA){return s(z,tA)}),Dt&&Jn(z,wt),rt}function Ht(z,M,P,V){if(typeof P=="object"&&P!==null&&P.type===S&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case v:t:{for(var rt=P.key;M!==null;){if(M.key===rt){if(rt=P.type,rt===S){if(M.tag===7){o(z,M.sibling),V=p(M,P.props.children),V.return=z,z=V;break t}}else if(M.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===X&&os(rt)===M.type){o(z,M.sibling),V=p(M,P.props),Ya(V,P),V.return=z,z=V;break t}o(z,M);break}else s(z,M);M=M.sibling}P.type===S?(V=ns(P.props.children,z.mode,V,P.key),V.return=z,z=V):(V=bo(P.type,P.key,P.props,null,z.mode,V),Ya(V,P),V.return=z,z=V)}return _(z);case A:t:{for(rt=P.key;M!==null;){if(M.key===rt)if(M.tag===4&&M.stateNode.containerInfo===P.containerInfo&&M.stateNode.implementation===P.implementation){o(z,M.sibling),V=p(M,P.children||[]),V.return=z,z=V;break t}else{o(z,M);break}else s(z,M);M=M.sibling}V=Uc(P,z.mode,V),V.return=z,z=V}return _(z);case X:return P=os(P),Ht(z,M,P,V)}if(Et(P))return nt(z,M,P,V);if(dt(P)){if(rt=dt(P),typeof rt!="function")throw Error(i(150));return P=rt.call(P),ut(z,M,P,V)}if(typeof P.then=="function")return Ht(z,M,To(P),V);if(P.$$typeof===x)return Ht(z,M,Ao(z,P),V);xo(z,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,M!==null&&M.tag===6?(o(z,M.sibling),V=p(M,P),V.return=z,z=V):(o(z,M),V=Ic(P,z.mode,V),V.return=z,z=V),_(z)):o(z,M)}return function(z,M,P,V){try{Za=0;var rt=Ht(z,M,P,V);return Ys=null,rt}catch(at){if(at===Zs||at===wo)throw at;var kt=sn(29,at,null,z.mode);return kt.lanes=V,kt.return=z,kt}}}var cs=Jf(!0),Qf=Jf(!1),Ei=!1;function Wc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ti(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function xi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(zt&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=yo(n),zf(n,null,o),s}return mo(n,u,s,o),yo(n)}function Ka(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Hd(n,o)}}function eu(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?p=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?p=m=s:m=m.next=s}else p=m=s;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var nu=!1;function Ja(){if(nu){var n=Xs;if(n!==null)throw n}}function Qa(n,s,o,u){nu=!1;var p=n.updateQueue;Ei=!1;var m=p.firstBaseUpdate,_=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var C=w,j=C.next;C.next=null,_===null?m=j:_.next=j,_=C;var $=n.alternate;$!==null&&($=$.updateQueue,w=$.lastBaseUpdate,w!==_&&(w===null?$.firstBaseUpdate=j:w.next=j,$.lastBaseUpdate=C))}if(m!==null){var Z=p.baseState;_=0,$=j=C=null,w=m;do{var I=w.lane&-536870913,H=I!==w.lane;if(H?(Ot&I)===I:(u&I)===I){I!==0&&I===Vs&&(nu=!0),$!==null&&($=$.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var nt=n,ut=w;I=s;var Ht=o;switch(ut.tag){case 1:if(nt=ut.payload,typeof nt=="function"){Z=nt.call(Ht,Z,I);break t}Z=nt;break t;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=ut.payload,I=typeof nt=="function"?nt.call(Ht,Z,I):nt,I==null)break t;Z=y({},Z,I);break t;case 2:Ei=!0}}I=w.callback,I!==null&&(n.flags|=64,H&&(n.flags|=8192),H=p.callbacks,H===null?p.callbacks=[I]:H.push(I))}else H={lane:I,tag:w.tag,payload:w.payload,callback:w.callback,next:null},$===null?(j=$=H,C=Z):$=$.next=H,_|=I;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;H=w,w=H.next,H.next=null,p.lastBaseUpdate=H,p.shared.pending=null}}while(!0);$===null&&(C=Z),p.baseState=C,p.firstBaseUpdate=j,p.lastBaseUpdate=$,m===null&&(p.shared.lanes=0),Di|=_,n.lanes=_,n.memoizedState=Z}}function Wf(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function tp(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Wf(o[n],s)}var Ks=R(null),Co=R(0);function ep(n,s){n=li,K(Co,n),K(Ks,s),li=n|s.baseLanes}function iu(){K(Co,li),K(Ks,Ks.current)}function su(){li=Co.current,q(Ks),q(Co)}var an=R(null),vn=null;function Ci(n){var s=n.alternate;K(ie,ie.current&1),K(an,n),vn===null&&(s===null||Ks.current!==null||s.memoizedState!==null)&&(vn=n)}function au(n){K(ie,ie.current),K(an,n),vn===null&&(vn=n)}function np(n){n.tag===22?(K(ie,ie.current),K(an,n),vn===null&&(vn=n)):Ri()}function Ri(){K(ie,ie.current),K(an,an.current)}function rn(n){q(an),vn===n&&(vn=null),q(ie)}var ie=R(0);function Ro(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||hh(o)||dh(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ti=0,At=null,It=null,ce=null,Oo=!1,Js=!1,us=!1,Mo=0,Wa=0,Qs=null,Gv=0;function te(){throw Error(i(321))}function ru(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!nn(n[o],s[o]))return!1;return!0}function ou(n,s,o,u,p,m){return ti=m,At=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,N.H=n===null||n.memoizedState===null?Fp:Su,us=!1,m=o(u,p),us=!1,Js&&(m=sp(s,o,u,p)),ip(n),m}function ip(n){N.H=nr;var s=It!==null&&It.next!==null;if(ti=0,ce=It=At=null,Oo=!1,Wa=0,Qs=null,s)throw Error(i(300));n===null||ue||(n=n.dependencies,n!==null&&_o(n)&&(ue=!0))}function sp(n,s,o,u){At=n;var p=0;do{if(Js&&(Qs=null),Wa=0,Js=!1,25<=p)throw Error(i(301));if(p+=1,ce=It=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}N.H=Ip,m=s(o,u)}while(Js);return m}function $v(){var n=N.H,s=n.useState()[0];return s=typeof s.then=="function"?tr(s):s,n=n.useState()[0],(It!==null?It.memoizedState:null)!==n&&(At.flags|=1024),s}function lu(){var n=Mo!==0;return Mo=0,n}function cu(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function uu(n){if(Oo){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Oo=!1}ti=0,ce=It=At=null,Js=!1,Wa=Mo=0,Qs=null}function ze(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?At.memoizedState=ce=n:ce=ce.next=n,ce}function se(){if(It===null){var n=At.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var s=ce===null?At.memoizedState:ce.next;if(s!==null)ce=s,It=n;else{if(n===null)throw At.alternate===null?Error(i(467)):Error(i(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},ce===null?At.memoizedState=ce=n:ce=ce.next=n}return ce}function Do(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tr(n){var s=Wa;return Wa+=1,Qs===null&&(Qs=[]),n=Zf(Qs,n,s),s=At,(ce===null?s.memoizedState:ce.next)===null&&(s=s.alternate,N.H=s===null||s.memoizedState===null?Fp:Su),n}function No(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return tr(n);if(n.$$typeof===x)return Te(n)}throw Error(i(438,String(n)))}function hu(n){var s=null,o=At.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=At.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Do(),At.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=st;return s.index++,o}function ei(n,s){return typeof s=="function"?s(n):s}function ko(n){var s=se();return du(s,It,n)}function du(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var p=n.baseQueue,m=u.pending;if(m!==null){if(p!==null){var _=p.next;p.next=m.next,m.next=_}s.baseQueue=p=m,u.pending=null}if(m=n.baseState,p===null)n.memoizedState=m;else{s=p.next;var w=_=null,C=null,j=s,$=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(Ot&Z)===Z:(ti&Z)===Z){var I=j.revertLane;if(I===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===Vs&&($=!0);else if((ti&I)===I){j=j.next,I===Vs&&($=!0);continue}else Z={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(w=C=Z,_=m):C=C.next=Z,At.lanes|=I,Di|=I;Z=j.action,us&&o(m,Z),m=j.hasEagerState?j.eagerState:o(m,Z)}else I={lane:Z,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(w=C=I,_=m):C=C.next=I,At.lanes|=Z,Di|=Z;j=j.next}while(j!==null&&j!==s);if(C===null?_=m:C.next=w,!nn(m,n.memoizedState)&&(ue=!0,$&&(o=Xs,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=C,u.lastRenderedState=m}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function fu(n){var s=se(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,p=o.pending,m=s.memoizedState;if(p!==null){o.pending=null;var _=p=p.next;do m=n(m,_.action),_=_.next;while(_!==p);nn(m,s.memoizedState)||(ue=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function ap(n,s,o){var u=At,p=se(),m=Dt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!nn((It||p).memoizedState,o);if(_&&(p.memoizedState=o,ue=!0),p=p.queue,mu(lp.bind(null,u,p,n),[n]),p.getSnapshot!==s||_||ce!==null&&ce.memoizedState.tag&1){if(u.flags|=2048,Ws(9,{destroy:void 0},op.bind(null,u,p,o,s),null),Gt===null)throw Error(i(349));m||(ti&127)!==0||rp(u,s,o)}return o}function rp(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=At.updateQueue,s===null?(s=Do(),At.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function op(n,s,o,u){s.value=o,s.getSnapshot=u,cp(s)&&up(n)}function lp(n,s,o){return o(function(){cp(s)&&up(n)})}function cp(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!nn(n,o)}catch{return!0}}function up(n){var s=es(n,2);s!==null&&Xe(s,n,2)}function pu(n){var s=ze();if(typeof n=="function"){var o=n;if(n=o(),us){yi(!0);try{o()}finally{yi(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:n},s}function hp(n,s,o,u){return n.baseState=o,du(n,It,typeof u=="function"?u:ei)}function Vv(n,s,o,u,p){if(Bo(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};N.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,dp(s,m)):(m.next=o.next,s.pending=o.next=m)}}function dp(n,s){var o=s.action,u=s.payload,p=n.state;if(s.isTransition){var m=N.T,_={};N.T=_;try{var w=o(p,u),C=N.S;C!==null&&C(_,w),fp(n,s,w)}catch(j){gu(n,s,j)}finally{m!==null&&_.types!==null&&(m.types=_.types),N.T=m}}else try{m=o(p,u),fp(n,s,m)}catch(j){gu(n,s,j)}}function fp(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){pp(n,s,u)},function(u){return gu(n,s,u)}):pp(n,s,o)}function pp(n,s,o){s.status="fulfilled",s.value=o,gp(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,dp(n,o)))}function gu(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,gp(s),s=s.next;while(s!==u)}n.action=null}function gp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function mp(n,s){return s}function yp(n,s){if(Dt){var o=Gt.formState;if(o!==null){t:{var u=At;if(Dt){if($t){e:{for(var p=$t,m=bn;p.nodeType!==8;){if(!m){p=null;break e}if(p=_n(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){$t=_n(p.nextSibling),u=p.data==="F!";break t}}Si(u)}u=!1}u&&(s=o[0])}}return o=ze(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:s},o.queue=u,o=Bp.bind(null,At,u),u.dispatch=o,u=pu(!1),m=Au.bind(null,At,!1,u.queue),u=ze(),p={state:s,dispatch:null,action:n,pending:null},u.queue=p,o=Vv.bind(null,At,p,m,o),p.dispatch=o,u.memoizedState=n,[s,o,!1]}function bp(n){var s=se();return vp(s,It,n)}function vp(n,s,o){if(s=du(n,s,mp)[0],n=ko(ei)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=tr(s)}catch(_){throw _===Zs?wo:_}else u=s;s=se();var p=s.queue,m=p.dispatch;return o!==s.memoizedState&&(At.flags|=2048,Ws(9,{destroy:void 0},Xv.bind(null,p,o),null)),[u,m,n]}function Xv(n,s){n.action=s}function _p(n){var s=se(),o=It;if(o!==null)return vp(s,o,n);se(),s=s.memoizedState,o=se();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Ws(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=At.updateQueue,s===null&&(s=Do(),At.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Ap(){return se().memoizedState}function Lo(n,s,o,u){var p=ze();At.flags|=n,p.memoizedState=Ws(1|s,{destroy:void 0},o,u===void 0?null:u)}function zo(n,s,o,u){var p=se();u=u===void 0?null:u;var m=p.memoizedState.inst;It!==null&&u!==null&&ru(u,It.memoizedState.deps)?p.memoizedState=Ws(s,m,o,u):(At.flags|=n,p.memoizedState=Ws(1|s,m,o,u))}function Sp(n,s){Lo(8390656,8,n,s)}function mu(n,s){zo(2048,8,n,s)}function Zv(n){At.flags|=4;var s=At.updateQueue;if(s===null)s=Do(),At.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function wp(n){var s=se().memoizedState;return Zv({ref:s,nextImpl:n}),function(){if((zt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Ep(n,s){return zo(4,2,n,s)}function Tp(n,s){return zo(4,4,n,s)}function xp(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cp(n,s,o){o=o!=null?o.concat([n]):null,zo(4,4,xp.bind(null,s,n),o)}function yu(){}function Rp(n,s){var o=se();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&ru(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function Op(n,s){var o=se();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&ru(s,u[1]))return u[0];if(u=n(),us){yi(!0);try{n()}finally{yi(!1)}}return o.memoizedState=[u,s],u}function bu(n,s,o){return o===void 0||(ti&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=Mg(),At.lanes|=n,Di|=n,o)}function Mp(n,s,o,u){return nn(o,s)?o:Ks.current!==null?(n=bu(n,o,u),nn(n,s)||(ue=!0),n):(ti&42)===0||(ti&1073741824)!==0&&(Ot&261930)===0?(ue=!0,n.memoizedState=o):(n=Mg(),At.lanes|=n,Di|=n,s)}function Dp(n,s,o,u,p){var m=G.p;G.p=m!==0&&8>m?m:8;var _=N.T,w={};N.T=w,Au(n,!1,s,o);try{var C=p(),j=N.S;if(j!==null&&j(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var $=qv(C,u);er(n,s,$,cn(n))}else er(n,s,u,cn(n))}catch(Z){er(n,s,{then:function(){},status:"rejected",reason:Z},cn())}finally{G.p=m,_!==null&&w.types!==null&&(_.types=w.types),N.T=_}}function Yv(){}function vu(n,s,o,u){if(n.tag!==5)throw Error(i(476));var p=Np(n).queue;Dp(n,p,s,Q,o===null?Yv:function(){return kp(n),o(u)})}function Np(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:Q},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function kp(n){var s=Np(n);s.next===null&&(s=n.alternate.memoizedState),er(n,s.next.queue,{},cn())}function _u(){return Te(br)}function Lp(){return se().memoizedState}function zp(){return se().memoizedState}function Kv(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=cn();n=Ti(o);var u=xi(s,n,o);u!==null&&(Xe(u,s,o),Ka(u,s,o)),s={cache:Yc()},n.payload=s;return}s=s.return}}function Jv(n,s,o){var u=cn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Bo(n)?Pp(s,o):(o=jc(n,s,o,u),o!==null&&(Xe(o,n,u),jp(o,s,u)))}function Bp(n,s,o){var u=cn();er(n,s,o,u)}function er(n,s,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Bo(n))Pp(s,p);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,w=m(_,o);if(p.hasEagerState=!0,p.eagerState=w,nn(w,_))return mo(n,s,p,0),Gt===null&&go(),!1}catch{}if(o=jc(n,s,p,u),o!==null)return Xe(o,n,u),jp(o,s,u),!0}return!1}function Au(n,s,o,u){if(u={lane:2,revertLane:Wu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Bo(n)){if(s)throw Error(i(479))}else s=jc(n,o,u,2),s!==null&&Xe(s,n,2)}function Bo(n){var s=n.alternate;return n===At||s!==null&&s===At}function Pp(n,s){Js=Oo=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function jp(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Hd(n,o)}}var nr={readContext:Te,use:No,useCallback:te,useContext:te,useEffect:te,useImperativeHandle:te,useLayoutEffect:te,useInsertionEffect:te,useMemo:te,useReducer:te,useRef:te,useState:te,useDebugValue:te,useDeferredValue:te,useTransition:te,useSyncExternalStore:te,useId:te,useHostTransitionStatus:te,useFormState:te,useActionState:te,useOptimistic:te,useMemoCache:te,useCacheRefresh:te};nr.useEffectEvent=te;var Fp={readContext:Te,use:No,useCallback:function(n,s){return ze().memoizedState=[n,s===void 0?null:s],n},useContext:Te,useEffect:Sp,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Lo(4194308,4,xp.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Lo(4194308,4,n,s)},useInsertionEffect:function(n,s){Lo(4,2,n,s)},useMemo:function(n,s){var o=ze();s=s===void 0?null:s;var u=n();if(us){yi(!0);try{n()}finally{yi(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=ze();if(o!==void 0){var p=o(s);if(us){yi(!0);try{o(s)}finally{yi(!1)}}}else p=s;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=Jv.bind(null,At,n),[u.memoizedState,n]},useRef:function(n){var s=ze();return n={current:n},s.memoizedState=n},useState:function(n){n=pu(n);var s=n.queue,o=Bp.bind(null,At,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:yu,useDeferredValue:function(n,s){var o=ze();return bu(o,n,s)},useTransition:function(){var n=pu(!1);return n=Dp.bind(null,At,n.queue,!0,!1),ze().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=At,p=ze();if(Dt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Gt===null)throw Error(i(349));(Ot&127)!==0||rp(u,s,o)}p.memoizedState=o;var m={value:o,getSnapshot:s};return p.queue=m,Sp(lp.bind(null,u,m,n),[n]),u.flags|=2048,Ws(9,{destroy:void 0},op.bind(null,u,m,o,s),null),o},useId:function(){var n=ze(),s=Gt.identifierPrefix;if(Dt){var o=kn,u=Nn;o=(u&~(1<<32-en(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Mo++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=Gv++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:_u,useFormState:yp,useActionState:yp,useOptimistic:function(n){var s=ze();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Au.bind(null,At,!0,o),o.dispatch=s,[n,s]},useMemoCache:hu,useCacheRefresh:function(){return ze().memoizedState=Kv.bind(null,At)},useEffectEvent:function(n){var s=ze(),o={impl:n};return s.memoizedState=o,function(){if((zt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Su={readContext:Te,use:No,useCallback:Rp,useContext:Te,useEffect:mu,useImperativeHandle:Cp,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:Op,useReducer:ko,useRef:Ap,useState:function(){return ko(ei)},useDebugValue:yu,useDeferredValue:function(n,s){var o=se();return Mp(o,It.memoizedState,n,s)},useTransition:function(){var n=ko(ei)[0],s=se().memoizedState;return[typeof n=="boolean"?n:tr(n),s]},useSyncExternalStore:ap,useId:Lp,useHostTransitionStatus:_u,useFormState:bp,useActionState:bp,useOptimistic:function(n,s){var o=se();return hp(o,It,n,s)},useMemoCache:hu,useCacheRefresh:zp};Su.useEffectEvent=wp;var Ip={readContext:Te,use:No,useCallback:Rp,useContext:Te,useEffect:mu,useImperativeHandle:Cp,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:Op,useReducer:fu,useRef:Ap,useState:function(){return fu(ei)},useDebugValue:yu,useDeferredValue:function(n,s){var o=se();return It===null?bu(o,n,s):Mp(o,It.memoizedState,n,s)},useTransition:function(){var n=fu(ei)[0],s=se().memoizedState;return[typeof n=="boolean"?n:tr(n),s]},useSyncExternalStore:ap,useId:Lp,useHostTransitionStatus:_u,useFormState:_p,useActionState:_p,useOptimistic:function(n,s){var o=se();return It!==null?hp(o,It,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hu,useCacheRefresh:zp};Ip.useEffectEvent=wp;function wu(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Eu={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=cn(),p=Ti(u);p.payload=s,o!=null&&(p.callback=o),s=xi(n,p,u),s!==null&&(Xe(s,n,u),Ka(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=cn(),p=Ti(u);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=xi(n,p,u),s!==null&&(Xe(s,n,u),Ka(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=cn(),u=Ti(o);u.tag=2,s!=null&&(u.callback=s),s=xi(n,u,o),s!==null&&(Xe(s,n,o),Ka(s,n,o))}};function Up(n,s,o,u,p,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!Ha(o,u)||!Ha(p,m):!0}function Hp(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Eu.enqueueReplaceState(s,s.state,null)}function hs(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var p in n)o[p]===void 0&&(o[p]=n[p])}return o}function qp(n){po(n)}function Gp(n){console.error(n)}function $p(n){po(n)}function Po(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Vp(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Tu(n,s,o){return o=Ti(o),o.tag=3,o.payload={element:null},o.callback=function(){Po(n,s)},o}function Xp(n){return n=Ti(n),n.tag=3,n}function Zp(n,s,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var m=u.value;n.payload=function(){return p(m)},n.callback=function(){Vp(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Vp(s,o,u),typeof p!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function Qv(n,s,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&$s(s,o,p,!0),o=an.current,o!==null){switch(o.tag){case 31:case 13:return vn===null?Yo():o.alternate===null&&ee===0&&(ee=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===Eo?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Ku(n,u,p)),!1;case 22:return o.flags|=65536,u===Eo?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Ku(n,u,p)),!1}throw Error(i(435,o.tag))}return Ku(n,u,p),Yo(),!1}if(Dt)return s=an.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==Gc&&(n=Error(i(422),{cause:u}),$a(gn(n,o)))):(u!==Gc&&(s=Error(i(423),{cause:u}),$a(gn(s,o))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=gn(u,o),p=Tu(n.stateNode,u,p),eu(n,p),ee!==4&&(ee=2)),!1;var m=Error(i(520),{cause:u});if(m=gn(m,o),ur===null?ur=[m]:ur.push(m),ee!==4&&(ee=2),s===null)return!0;u=gn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=p&-p,o.lanes|=n,n=Tu(o.stateNode,u,n),eu(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ni===null||!Ni.has(m))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Xp(p),Zp(p,n,o,u),eu(o,p),!1}o=o.return}while(o!==null);return!1}var xu=Error(i(461)),ue=!1;function xe(n,s,o,u){s.child=n===null?Qf(s,null,o,u):cs(s,n.child,o,u)}function Yp(n,s,o,u,p){o=o.render;var m=s.ref;if("ref"in u){var _={};for(var w in u)w!=="ref"&&(_[w]=u[w])}else _=u;return as(s),u=ou(n,s,o,_,m,p),w=lu(),n!==null&&!ue?(cu(n,s,p),ni(n,s,p)):(Dt&&w&&Hc(s),s.flags|=1,xe(n,s,u,p),s.child)}function Kp(n,s,o,u,p){if(n===null){var m=o.type;return typeof m=="function"&&!Fc(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Jp(n,s,m,u,p)):(n=bo(o.type,null,u,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Lu(n,p)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ha,o(_,u)&&n.ref===s.ref)return ni(n,s,p)}return s.flags|=1,n=Kn(m,u),n.ref=s.ref,n.return=s,s.child=n}function Jp(n,s,o,u,p){if(n!==null){var m=n.memoizedProps;if(Ha(m,u)&&n.ref===s.ref)if(ue=!1,s.pendingProps=u=m,Lu(n,p))(n.flags&131072)!==0&&(ue=!0);else return s.lanes=n.lanes,ni(n,s,p)}return Cu(n,s,o,u,p)}function Qp(n,s,o,u){var p=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~m}else u=0,s.child=null;return Wp(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&So(s,m!==null?m.cachePool:null),m!==null?ep(s,m):iu(),np(s);else return u=s.lanes=536870912,Wp(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(So(s,m.cachePool),ep(s,m),Ri(),s.memoizedState=null):(n!==null&&So(s,null),iu(),Ri());return xe(n,s,p,o),s.child}function ir(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Wp(n,s,o,u,p){var m=Jc();return m=m===null?null:{parent:le._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&So(s,null),iu(),np(s),n!==null&&$s(n,s,u,!0),s.childLanes=p,null}function jo(n,s){return s=Io({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function tg(n,s,o){return cs(s,n.child,null,o),n=jo(s,s.pendingProps),n.flags|=2,rn(s),s.memoizedState=null,n}function Wv(n,s,o){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Dt){if(u.mode==="hidden")return n=jo(s,u),s.lanes=536870912,ir(null,n);if(au(s),(n=$t)?(n=dm(n,bn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:_i!==null?{id:Nn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},o=Pf(n),o.return=s,s.child=o,Ee=s,$t=null)):n=null,n===null)throw Si(s);return s.lanes=536870912,null}return jo(s,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(au(s),p)if(s.flags&256)s.flags&=-257,s=tg(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(ue||$s(n,s,o,!1),p=(o&n.childLanes)!==0,ue||p){if(u=Gt,u!==null&&(_=qd(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,es(n,_),Xe(u,n,_),xu;Yo(),s=tg(n,s,o)}else n=m.treeContext,$t=_n(_.nextSibling),Ee=s,Dt=!0,Ai=null,bn=!1,n!==null&&If(s,n),s=jo(s,u),s.flags|=4096;return s}return n=Kn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Fo(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Cu(n,s,o,u,p){return as(s),o=ou(n,s,o,u,void 0,p),u=lu(),n!==null&&!ue?(cu(n,s,p),ni(n,s,p)):(Dt&&u&&Hc(s),s.flags|=1,xe(n,s,o,p),s.child)}function eg(n,s,o,u,p,m){return as(s),s.updateQueue=null,o=sp(s,u,o,p),ip(n),u=lu(),n!==null&&!ue?(cu(n,s,m),ni(n,s,m)):(Dt&&u&&Hc(s),s.flags|=1,xe(n,s,o,m),s.child)}function ng(n,s,o,u,p){if(as(s),s.stateNode===null){var m=Us,_=o.contextType;typeof _=="object"&&_!==null&&(m=Te(_)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Eu,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Wc(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?Te(_):Us,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(wu(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Eu.enqueueReplaceState(m,m.state,null),Qa(s,u,m,p),Ja(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var w=s.memoizedProps,C=hs(o,w);m.props=C;var j=m.context,$=o.contextType;_=Us,typeof $=="object"&&$!==null&&(_=Te($));var Z=o.getDerivedStateFromProps;$=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||j!==_)&&Hp(s,m,u,_),Ei=!1;var I=s.memoizedState;m.state=I,Qa(s,u,m,p),Ja(),j=s.memoizedState,w||I!==j||Ei?(typeof Z=="function"&&(wu(s,o,Z,u),j=s.memoizedState),(C=Ei||Up(s,o,C,u,I,j,_))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),m.props=u,m.state=j,m.context=_,u=C):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,tu(n,s),_=s.memoizedProps,$=hs(o,_),m.props=$,Z=s.pendingProps,I=m.context,j=o.contextType,C=Us,typeof j=="object"&&j!==null&&(C=Te(j)),w=o.getDerivedStateFromProps,(j=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==Z||I!==C)&&Hp(s,m,u,C),Ei=!1,I=s.memoizedState,m.state=I,Qa(s,u,m,p),Ja();var H=s.memoizedState;_!==Z||I!==H||Ei||n!==null&&n.dependencies!==null&&_o(n.dependencies)?(typeof w=="function"&&(wu(s,o,w,u),H=s.memoizedState),($=Ei||Up(s,o,$,u,I,H,C)||n!==null&&n.dependencies!==null&&_o(n.dependencies))?(j||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,H,C),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,H,C)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&I===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&I===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),m.props=u,m.state=H,m.context=C,u=$):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&I===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&I===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Fo(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=cs(s,n.child,null,p),s.child=cs(s,null,o,p)):xe(n,s,o,p),s.memoizedState=m.state,n=s.child):n=ni(n,s,p),n}function ig(n,s,o,u){return is(),s.flags|=256,xe(n,s,o,u),s.child}var Ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ou(n){return{baseLanes:n,cachePool:Vf()}}function Mu(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=ln),n}function sg(n,s,o){var u=s.pendingProps,p=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(ie.current&2)!==0),_&&(p=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Dt){if(p?Ci(s):Ri(),(n=$t)?(n=dm(n,bn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:_i!==null?{id:Nn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},o=Pf(n),o.return=s,s.child=o,Ee=s,$t=null)):n=null,n===null)throw Si(s);return dh(n)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,p?(Ri(),p=s.mode,w=Io({mode:"hidden",children:w},p),u=ns(u,p,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=Ou(o),u.childLanes=Mu(n,_,o),s.memoizedState=Ru,ir(null,u)):(Ci(s),Du(s,w))}var C=n.memoizedState;if(C!==null&&(w=C.dehydrated,w!==null)){if(m)s.flags&256?(Ci(s),s.flags&=-257,s=Nu(n,s,o)):s.memoizedState!==null?(Ri(),s.child=n.child,s.flags|=128,s=null):(Ri(),w=u.fallback,p=s.mode,u=Io({mode:"visible",children:u.children},p),w=ns(w,p,o,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,cs(s,n.child,null,o),u=s.child,u.memoizedState=Ou(o),u.childLanes=Mu(n,_,o),s.memoizedState=Ru,s=ir(null,u));else if(Ci(s),dh(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var j=_.dgst;_=j,u=Error(i(419)),u.stack="",u.digest=_,$a({value:u,source:null,stack:null}),s=Nu(n,s,o)}else if(ue||$s(n,s,o,!1),_=(o&n.childLanes)!==0,ue||_){if(_=Gt,_!==null&&(u=qd(_,o),u!==0&&u!==C.retryLane))throw C.retryLane=u,es(n,u),Xe(_,n,u),xu;hh(w)||Yo(),s=Nu(n,s,o)}else hh(w)?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,$t=_n(w.nextSibling),Ee=s,Dt=!0,Ai=null,bn=!1,n!==null&&If(s,n),s=Du(s,u.children),s.flags|=4096);return s}return p?(Ri(),w=u.fallback,p=s.mode,C=n.child,j=C.sibling,u=Kn(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,j!==null?w=Kn(j,w):(w=ns(w,p,o,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,ir(null,u),u=s.child,w=n.child.memoizedState,w===null?w=Ou(o):(p=w.cachePool,p!==null?(C=le._currentValue,p=p.parent!==C?{parent:C,pool:C}:p):p=Vf(),w={baseLanes:w.baseLanes|o,cachePool:p}),u.memoizedState=w,u.childLanes=Mu(n,_,o),s.memoizedState=Ru,ir(n.child,u)):(Ci(s),o=n.child,n=o.sibling,o=Kn(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function Du(n,s){return s=Io({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Io(n,s){return n=sn(22,n,null,s),n.lanes=0,n}function Nu(n,s,o){return cs(s,n.child,null,o),n=Du(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ag(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Xc(n.return,s,o)}function ku(n,s,o,u,p,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=p,_.treeForkCount=m)}function rg(n,s,o){var u=s.pendingProps,p=u.revealOrder,m=u.tail;u=u.children;var _=ie.current,w=(_&2)!==0;if(w?(_=_&1|2,s.flags|=128):_&=1,K(ie,_),xe(n,s,u,o),u=Dt?Ga:0,!w&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ag(n,o,s);else if(n.tag===19)ag(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)n=o.alternate,n!==null&&Ro(n)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),ku(s,!1,p,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Ro(n)===null){s.child=p;break}n=p.sibling,p.sibling=o,o=p,p=n}ku(s,!0,o,null,m,u);break;case"together":ku(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ni(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Di|=s.lanes,(o&s.childLanes)===0)if(n!==null){if($s(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=Kn(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Kn(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Lu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&_o(n)))}function t_(n,s,o){switch(s.tag){case 3:ne(s,s.stateNode.containerInfo),wi(s,le,n.memoizedState.cache),is();break;case 27:case 5:Zi(s);break;case 4:ne(s,s.stateNode.containerInfo);break;case 10:wi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,au(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ci(s),s.flags|=128,null):(o&s.child.childLanes)!==0?sg(n,s,o):(Ci(s),n=ni(n,s,o),n!==null?n.sibling:null);Ci(s);break;case 19:var p=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||($s(n,s,o,!1),u=(o&s.childLanes)!==0),p){if(u)return rg(n,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),K(ie,ie.current),u)break;return null;case 22:return s.lanes=0,Qp(n,s,o,s.pendingProps);case 24:wi(s,le,n.memoizedState.cache)}return ni(n,s,o)}function og(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)ue=!0;else{if(!Lu(n,o)&&(s.flags&128)===0)return ue=!1,t_(n,s,o);ue=(n.flags&131072)!==0}else ue=!1,Dt&&(s.flags&1048576)!==0&&Ff(s,Ga,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=os(s.elementType),s.type=n,typeof n=="function")Fc(n)?(u=hs(n,u),s.tag=1,s=ng(null,s,n,u,o)):(s.tag=0,s=Cu(null,s,n,u,o));else{if(n!=null){var p=n.$$typeof;if(p===D){s.tag=11,s=Yp(null,s,n,u,o);break t}else if(p===F){s.tag=14,s=Kp(null,s,n,u,o);break t}}throw s=gt(n)||n,Error(i(306,s,""))}}return s;case 0:return Cu(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,p=hs(u,s.pendingProps),ng(n,s,u,p,o);case 3:t:{if(ne(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;p=m.element,tu(n,s),Qa(s,u,null,o);var _=s.memoizedState;if(u=_.cache,wi(s,le,u),u!==m.cache&&Zc(s,[le],o,!0),Ja(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=ig(n,s,u,o);break t}else if(u!==p){p=gn(Error(i(424)),s),$a(p),s=ig(n,s,u,o);break t}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,$t=_n(n.firstChild),Ee=s,Dt=!0,Ai=null,bn=!0,o=Qf(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(is(),u===p){s=ni(n,s,o);break t}xe(n,s,u,o)}s=s.child}return s;case 26:return Fo(n,s),n===null?(o=bm(s.type,null,s.pendingProps,null))?s.memoizedState=o:Dt||(o=s.type,n=s.pendingProps,u=nl(mt.current).createElement(o),u[we]=s,u[Ue]=n,Ce(u,o,n),_e(u),s.stateNode=u):s.memoizedState=bm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Zi(s),n===null&&Dt&&(u=s.stateNode=gm(s.type,s.pendingProps,mt.current),Ee=s,bn=!0,p=$t,Bi(s.type)?(fh=p,$t=_n(u.firstChild)):$t=p),xe(n,s,s.pendingProps.children,o),Fo(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Dt&&((p=u=$t)&&(u=M_(u,s.type,s.pendingProps,bn),u!==null?(s.stateNode=u,Ee=s,$t=_n(u.firstChild),bn=!1,p=!0):p=!1),p||Si(s)),Zi(s),p=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,lh(p,m)?u=null:_!==null&&lh(p,_)&&(s.flags|=32),s.memoizedState!==null&&(p=ou(n,s,$v,null,null,o),br._currentValue=p),Fo(n,s),xe(n,s,u,o),s.child;case 6:return n===null&&Dt&&((n=o=$t)&&(o=D_(o,s.pendingProps,bn),o!==null?(s.stateNode=o,Ee=s,$t=null,n=!0):n=!1),n||Si(s)),null;case 13:return sg(n,s,o);case 4:return ne(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=cs(s,null,u,o):xe(n,s,u,o),s.child;case 11:return Yp(n,s,s.type,s.pendingProps,o);case 7:return xe(n,s,s.pendingProps,o),s.child;case 8:return xe(n,s,s.pendingProps.children,o),s.child;case 12:return xe(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,wi(s,s.type,u.value),xe(n,s,u.children,o),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,as(s),p=Te(p),u=u(p),s.flags|=1,xe(n,s,u,o),s.child;case 14:return Kp(n,s,s.type,s.pendingProps,o);case 15:return Jp(n,s,s.type,s.pendingProps,o);case 19:return rg(n,s,o);case 31:return Wv(n,s,o);case 22:return Qp(n,s,o,s.pendingProps);case 24:return as(s),u=Te(le),n===null?(p=Jc(),p===null&&(p=Gt,m=Yc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=o),p=m),s.memoizedState={parent:u,cache:p},Wc(s),wi(s,le,p)):((n.lanes&o)!==0&&(tu(n,s),Qa(s,null,null,o),Ja()),p=n.memoizedState,m=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),wi(s,le,u)):(u=m.cache,wi(s,le,u),u!==p.cache&&Zc(s,[le],o,!0))),xe(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ii(n){n.flags|=4}function zu(n,s,o,u,p){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(Lg())n.flags|=8192;else throw ls=Eo,Qc}else n.flags&=-16777217}function lg(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!wm(s))if(Lg())n.flags|=8192;else throw ls=Eo,Qc}function Uo(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Id():536870912,n.lanes|=s,ia|=s)}function sr(n,s){if(!Dt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Vt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var p=n.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function e_(n,s,o){var u=s.pendingProps;switch(qc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(s),null;case 1:return Vt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Wn(le),Jt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Gs(s)?ii(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$c())),Vt(s),null;case 26:var p=s.type,m=s.memoizedState;return n===null?(ii(s),m!==null?(Vt(s),lg(s,m)):(Vt(s),zu(s,p,null,u,o))):m?m!==n.memoizedState?(ii(s),Vt(s),lg(s,m)):(Vt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ii(s),Vt(s),zu(s,p,n,u,o)),null;case 27:if(mi(s),o=mt.current,p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ii(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Vt(s),null}n=tt.current,Gs(s)?Uf(s):(n=gm(p,u,o),s.stateNode=n,ii(s))}return Vt(s),null;case 5:if(mi(s),p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ii(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Vt(s),null}if(m=tt.current,Gs(s))Uf(s);else{var _=nl(mt.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(p,{is:u.is}):_.createElement(p)}}m[we]=s,m[Ue]=u;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;t:switch(Ce(m,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ii(s)}}return Vt(s),zu(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ii(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=mt.current,Gs(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,p=Ee,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[we]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||sm(n.nodeValue,o)),n||Si(s,!0)}else n=nl(n).createTextNode(u),n[we]=s,s.stateNode=n}return Vt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Gs(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[we]=s}else is(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),n=!1}else o=$c(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(rn(s),s):(rn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Vt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=Gs(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[we]=s}else is(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),p=!1}else p=$c(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(rn(s),s):(rn(s),null)}return rn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==p&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Uo(s,s.updateQueue),Vt(s),null);case 4:return Jt(),n===null&&ih(s.stateNode.containerInfo),Vt(s),null;case 10:return Wn(s.type),Vt(s),null;case 19:if(q(ie),u=s.memoizedState,u===null)return Vt(s),null;if(p=(s.flags&128)!==0,m=u.rendering,m===null)if(p)sr(u,!1);else{if(ee!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ro(n),m!==null){for(s.flags|=128,sr(u,!1),n=m.updateQueue,s.updateQueue=n,Uo(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Bf(o,n),o=o.sibling;return K(ie,ie.current&1|2),Dt&&Jn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&We()>Vo&&(s.flags|=128,p=!0,sr(u,!1),s.lanes=4194304)}else{if(!p)if(n=Ro(m),n!==null){if(s.flags|=128,p=!0,n=n.updateQueue,s.updateQueue=n,Uo(s,n),sr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Dt)return Vt(s),null}else 2*We()-u.renderingStartTime>Vo&&o!==536870912&&(s.flags|=128,p=!0,sr(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=We(),n.sibling=null,o=ie.current,K(ie,p?o&1|2:o&1),Dt&&Jn(s,u.treeForkCount),n):(Vt(s),null);case 22:case 23:return rn(s),su(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Vt(s),s.subtreeFlags&6&&(s.flags|=8192)):Vt(s),o=s.updateQueue,o!==null&&Uo(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&q(rs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Wn(le),Vt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function n_(n,s){switch(qc(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Wn(le),Jt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return mi(s),null;case 31:if(s.memoizedState!==null){if(rn(s),s.alternate===null)throw Error(i(340));is()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(rn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));is()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return q(ie),null;case 4:return Jt(),null;case 10:return Wn(s.type),null;case 22:case 23:return rn(s),su(),n!==null&&q(rs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Wn(le),null;case 25:return null;default:return null}}function cg(n,s){switch(qc(s),s.tag){case 3:Wn(le),Jt();break;case 26:case 27:case 5:mi(s);break;case 4:Jt();break;case 31:s.memoizedState!==null&&rn(s);break;case 13:rn(s);break;case 19:q(ie);break;case 10:Wn(s.type);break;case 22:case 23:rn(s),su(),n!==null&&q(rs);break;case 24:Wn(le)}}function ar(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==p)}}catch(w){Ft(s,s.return,w)}}function Oi(n,s,o){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var m=p.next;u=m;do{if((u.tag&n)===n){var _=u.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,p=s;var C=o,j=w;try{j()}catch($){Ft(p,C,$)}}}u=u.next}while(u!==m)}}catch($){Ft(s,s.return,$)}}function ug(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{tp(s,o)}catch(u){Ft(n,n.return,u)}}}function hg(n,s,o){o.props=hs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Ft(n,s,u)}}function rr(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(p){Ft(n,s,p)}}function Ln(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Ft(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ft(n,s,p)}else o.current=null}function dg(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Ft(n,n.return,p)}}function Bu(n,s,o){try{var u=n.stateNode;E_(u,n.type,o,s),u[Ue]=s}catch(p){Ft(n,n.return,p)}}function fg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Bi(n.type)||n.tag===4}function Pu(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||fg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Bi(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ju(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Zn));else if(u!==4&&(u===27&&Bi(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(ju(n,s,o),n=n.sibling;n!==null;)ju(n,s,o),n=n.sibling}function Ho(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Bi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ho(n,s,o),n=n.sibling;n!==null;)Ho(n,s,o),n=n.sibling}function pg(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Ce(s,u,o),s[we]=n,s[Ue]=o}catch(m){Ft(n,n.return,m)}}var si=!1,he=!1,Fu=!1,gg=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function i_(n,s){if(n=n.containerInfo,rh=cl,n=Cf(n),Nc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var _=0,w=-1,C=-1,j=0,$=0,Z=n,I=null;e:for(;;){for(var H;Z!==o||p!==0&&Z.nodeType!==3||(w=_+p),Z!==m||u!==0&&Z.nodeType!==3||(C=_+u),Z.nodeType===3&&(_+=Z.nodeValue.length),(H=Z.firstChild)!==null;)I=Z,Z=H;for(;;){if(Z===n)break e;if(I===o&&++j===p&&(w=_),I===m&&++$===u&&(C=_),(H=Z.nextSibling)!==null)break;Z=I,I=Z.parentNode}Z=H}o=w===-1||C===-1?null:{start:w,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(oh={focusedElem:n,selectionRange:o},cl=!1,Ae=s;Ae!==null;)if(s=Ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ae=n;else for(;Ae!==null;){switch(s=Ae,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)p=n[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,p=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var nt=hs(o.type,p);n=u.getSnapshotBeforeUpdate(nt,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(ut){Ft(o,o.return,ut)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)uh(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":uh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ae=n;break}Ae=s.return}}function mg(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ri(n,o),u&4&&ar(5,o);break;case 1:if(ri(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){Ft(o,o.return,_)}else{var p=hs(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Ft(o,o.return,_)}}u&64&&ug(o),u&512&&rr(o,o.return);break;case 3:if(ri(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{tp(n,s)}catch(_){Ft(o,o.return,_)}}break;case 27:s===null&&u&4&&pg(o);case 26:case 5:ri(n,o),s===null&&u&4&&dg(o),u&512&&rr(o,o.return);break;case 12:ri(n,o);break;case 31:ri(n,o),u&4&&vg(n,o);break;case 13:ri(n,o),u&4&&_g(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=d_.bind(null,o),N_(n,o))));break;case 22:if(u=o.memoizedState!==null||si,!u){s=s!==null&&s.memoizedState!==null||he,p=si;var m=he;si=u,(he=s)&&!m?oi(n,o,(o.subtreeFlags&8772)!==0):ri(n,o),si=p,he=m}break;case 30:break;default:ri(n,o)}}function yg(n){var s=n.alternate;s!==null&&(n.alternate=null,yg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&gc(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xt=null,qe=!1;function ai(n,s,o){for(o=o.child;o!==null;)bg(n,s,o),o=o.sibling}function bg(n,s,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ma,o)}catch{}switch(o.tag){case 26:he||Ln(o,s),ai(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:he||Ln(o,s);var u=Xt,p=qe;Bi(o.type)&&(Xt=o.stateNode,qe=!1),ai(n,s,o),gr(o.stateNode),Xt=u,qe=p;break;case 5:he||Ln(o,s);case 6:if(u=Xt,p=qe,Xt=null,ai(n,s,o),Xt=u,qe=p,Xt!==null)if(qe)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(m){Ft(o,s,m)}else try{Xt.removeChild(o.stateNode)}catch(m){Ft(o,s,m)}break;case 18:Xt!==null&&(qe?(n=Xt,um(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ha(n)):um(Xt,o.stateNode));break;case 4:u=Xt,p=qe,Xt=o.stateNode.containerInfo,qe=!0,ai(n,s,o),Xt=u,qe=p;break;case 0:case 11:case 14:case 15:Oi(2,o,s),he||Oi(4,o,s),ai(n,s,o);break;case 1:he||(Ln(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&hg(o,s,u)),ai(n,s,o);break;case 21:ai(n,s,o);break;case 22:he=(u=he)||o.memoizedState!==null,ai(n,s,o),he=u;break;default:ai(n,s,o)}}function vg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ha(n)}catch(o){Ft(s,s.return,o)}}}function _g(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ha(n)}catch(o){Ft(s,s.return,o)}}function s_(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new gg),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new gg),s;default:throw Error(i(435,n.tag))}}function qo(n,s){var o=s_(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var p=f_.bind(null,n,u);u.then(p,p)}})}function Ge(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],m=n,_=s,w=_;t:for(;w!==null;){switch(w.tag){case 27:if(Bi(w.type)){Xt=w.stateNode,qe=!1;break t}break;case 5:Xt=w.stateNode,qe=!1;break t;case 3:case 4:Xt=w.stateNode.containerInfo,qe=!0;break t}w=w.return}if(Xt===null)throw Error(i(160));bg(m,_,p),Xt=null,qe=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ag(s,n),s=s.sibling}var Rn=null;function Ag(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ge(s,n),$e(n),u&4&&(Oi(3,n,n.return),ar(3,n),Oi(5,n,n.return));break;case 1:Ge(s,n),$e(n),u&512&&(he||o===null||Ln(o,o.return)),u&64&&si&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=Rn;if(Ge(s,n),$e(n),u&512&&(he||o===null||Ln(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":m=p.getElementsByTagName("title")[0],(!m||m[ka]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(u),p.head.insertBefore(m,p.querySelector("head > title"))),Ce(m,u,o),m[we]=n,_e(m),u=m;break t;case"link":var _=Am("link","href",p).get(u+(o.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(w,1);break e}}m=p.createElement(u),Ce(m,u,o),p.head.appendChild(m);break;case"meta":if(_=Am("meta","content",p).get(u+(o.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(w,1);break e}}m=p.createElement(u),Ce(m,u,o),p.head.appendChild(m);break;default:throw Error(i(468,u))}m[we]=n,_e(m),u=m}n.stateNode=u}else Sm(p,n.type,n.stateNode);else n.stateNode=_m(p,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Sm(p,n.type,n.stateNode):_m(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Bu(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ge(s,n),$e(n),u&512&&(he||o===null||Ln(o,o.return)),o!==null&&u&4&&Bu(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ge(s,n),$e(n),u&512&&(he||o===null||Ln(o,o.return)),n.flags&32){p=n.stateNode;try{Ls(p,"")}catch(nt){Ft(n,n.return,nt)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,Bu(n,p,o!==null?o.memoizedProps:p)),u&1024&&(Fu=!0);break;case 6:if(Ge(s,n),$e(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(nt){Ft(n,n.return,nt)}}break;case 3:if(al=null,p=Rn,Rn=il(s.containerInfo),Ge(s,n),Rn=p,$e(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ha(s.containerInfo)}catch(nt){Ft(n,n.return,nt)}Fu&&(Fu=!1,Sg(n));break;case 4:u=Rn,Rn=il(n.stateNode.containerInfo),Ge(s,n),$e(n),Rn=u;break;case 12:Ge(s,n),$e(n);break;case 31:Ge(s,n),$e(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,qo(n,u)));break;case 13:Ge(s,n),$e(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&($o=We()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,qo(n,u)));break;case 22:p=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,j=si,$=he;if(si=j||p,he=$||C,Ge(s,n),he=$,si=j,$e(n),u&8192)t:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||C||si||he||ds(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(m=C.stateNode,p)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=C.stateNode;var Z=C.memoizedProps.style,I=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;w.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(nt){Ft(C,C.return,nt)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=p?"":C.memoizedProps}catch(nt){Ft(C,C.return,nt)}}}else if(s.tag===18){if(o===null){C=s;try{var H=C.stateNode;p?hm(H,!0):hm(C.stateNode,!1)}catch(nt){Ft(C,C.return,nt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,qo(n,o))));break;case 19:Ge(s,n),$e(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,qo(n,u)));break;case 30:break;case 21:break;default:Ge(s,n),$e(n)}}function $e(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(fg(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,m=Pu(n);Ho(n,m,p);break;case 5:var _=o.stateNode;o.flags&32&&(Ls(_,""),o.flags&=-33);var w=Pu(n);Ho(n,w,_);break;case 3:case 4:var C=o.stateNode.containerInfo,j=Pu(n);ju(n,j,C);break;default:throw Error(i(161))}}catch($){Ft(n,n.return,$)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Sg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Sg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ri(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)mg(n,s.alternate,s),s=s.sibling}function ds(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Oi(4,s,s.return),ds(s);break;case 1:Ln(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&hg(s,s.return,o),ds(s);break;case 27:gr(s.stateNode);case 26:case 5:Ln(s,s.return),ds(s);break;case 22:s.memoizedState===null&&ds(s);break;case 30:ds(s);break;default:ds(s)}n=n.sibling}}function oi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:oi(p,m,o),ar(4,m);break;case 1:if(oi(p,m,o),u=m,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(j){Ft(u,u.return,j)}if(u=m,p=u.updateQueue,p!==null){var w=u.stateNode;try{var C=p.shared.hiddenCallbacks;if(C!==null)for(p.shared.hiddenCallbacks=null,p=0;p<C.length;p++)Wf(C[p],w)}catch(j){Ft(u,u.return,j)}}o&&_&64&&ug(m),rr(m,m.return);break;case 27:pg(m);case 26:case 5:oi(p,m,o),o&&u===null&&_&4&&dg(m),rr(m,m.return);break;case 12:oi(p,m,o);break;case 31:oi(p,m,o),o&&_&4&&vg(p,m);break;case 13:oi(p,m,o),o&&_&4&&_g(p,m);break;case 22:m.memoizedState===null&&oi(p,m,o),rr(m,m.return);break;case 30:break;default:oi(p,m,o)}s=s.sibling}}function Iu(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Va(o))}function Uu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Va(n))}function On(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)wg(n,s,o,u),s=s.sibling}function wg(n,s,o,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:On(n,s,o,u),p&2048&&ar(9,s);break;case 1:On(n,s,o,u);break;case 3:On(n,s,o,u),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Va(n)));break;case 12:if(p&2048){On(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){Ft(s,s.return,C)}}else On(n,s,o,u);break;case 31:On(n,s,o,u);break;case 13:On(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?On(n,s,o,u):or(n,s):m._visibility&2?On(n,s,o,u):(m._visibility|=2,ta(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Iu(_,s);break;case 24:On(n,s,o,u),p&2048&&Uu(s.alternate,s);break;default:On(n,s,o,u)}}function ta(n,s,o,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,_=s,w=o,C=u,j=_.flags;switch(_.tag){case 0:case 11:case 15:ta(m,_,w,C,p),ar(8,_);break;case 23:break;case 22:var $=_.stateNode;_.memoizedState!==null?$._visibility&2?ta(m,_,w,C,p):or(m,_):($._visibility|=2,ta(m,_,w,C,p)),p&&j&2048&&Iu(_.alternate,_);break;case 24:ta(m,_,w,C,p),p&&j&2048&&Uu(_.alternate,_);break;default:ta(m,_,w,C,p)}s=s.sibling}}function or(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,p=u.flags;switch(u.tag){case 22:or(o,u),p&2048&&Iu(u.alternate,u);break;case 24:or(o,u),p&2048&&Uu(u.alternate,u);break;default:or(o,u)}s=s.sibling}}var lr=8192;function ea(n,s,o){if(n.subtreeFlags&lr)for(n=n.child;n!==null;)Eg(n,s,o),n=n.sibling}function Eg(n,s,o){switch(n.tag){case 26:ea(n,s,o),n.flags&lr&&n.memoizedState!==null&&G_(o,Rn,n.memoizedState,n.memoizedProps);break;case 5:ea(n,s,o);break;case 3:case 4:var u=Rn;Rn=il(n.stateNode.containerInfo),ea(n,s,o),Rn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=lr,lr=16777216,ea(n,s,o),lr=u):ea(n,s,o));break;default:ea(n,s,o)}}function Tg(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function cr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ae=u,Cg(u,n)}Tg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)xg(n),n=n.sibling}function xg(n){switch(n.tag){case 0:case 11:case 15:cr(n),n.flags&2048&&Oi(9,n,n.return);break;case 3:cr(n);break;case 12:cr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Go(n)):cr(n);break;default:cr(n)}}function Go(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ae=u,Cg(u,n)}Tg(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Oi(8,s,s.return),Go(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Go(s));break;default:Go(s)}n=n.sibling}}function Cg(n,s){for(;Ae!==null;){var o=Ae;switch(o.tag){case 0:case 11:case 15:Oi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Va(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ae=u;else t:for(o=n;Ae!==null;){u=Ae;var p=u.sibling,m=u.return;if(yg(u),u===o){Ae=null;break t}if(p!==null){p.return=m,Ae=p;break t}Ae=m}}}var a_={getCacheForType:function(n){var s=Te(le),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Te(le).controller.signal}},r_=typeof WeakMap=="function"?WeakMap:Map,zt=0,Gt=null,Ct=null,Ot=0,jt=0,on=null,Mi=!1,na=!1,Hu=!1,li=0,ee=0,Di=0,fs=0,qu=0,ln=0,ia=0,ur=null,Ve=null,Gu=!1,$o=0,Rg=0,Vo=1/0,Xo=null,Ni=null,be=0,ki=null,sa=null,ci=0,$u=0,Vu=null,Og=null,hr=0,Xu=null;function cn(){return(zt&2)!==0&&Ot!==0?Ot&-Ot:N.T!==null?Wu():Gd()}function Mg(){if(ln===0)if((Ot&536870912)===0||Dt){var n=to;to<<=1,(to&3932160)===0&&(to=262144),ln=n}else ln=536870912;return n=an.current,n!==null&&(n.flags|=32),ln}function Xe(n,s,o){(n===Gt&&(jt===2||jt===9)||n.cancelPendingCommit!==null)&&(aa(n,0),Li(n,Ot,ln,!1)),Na(n,o),((zt&2)===0||n!==Gt)&&(n===Gt&&((zt&2)===0&&(fs|=o),ee===4&&Li(n,Ot,ln,!1)),zn(n))}function Dg(n,s,o){if((zt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Da(n,s),p=u?c_(n,s):Yu(n,s,!0),m=u;do{if(p===0){na&&!u&&Li(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!o_(o)){p=Yu(n,s,!1),m=!1;continue}if(p===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var w=n;p=ur;var C=w.current.memoizedState.isDehydrated;if(C&&(aa(w,_).flags|=256),_=Yu(w,_,!1),_!==2){if(Hu&&!C){w.errorRecoveryDisabledLanes|=m,fs|=m,p=4;break t}m=Ve,Ve=p,m!==null&&(Ve===null?Ve=m:Ve.push.apply(Ve,m))}p=_}if(m=!1,p!==2)continue}}if(p===1){aa(n,0),Li(n,s,0,!0);break}t:{switch(u=n,m=p,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Li(u,s,ln,!Mi);break t;case 2:Ve=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=$o+300-We(),10<p)){if(Li(u,s,ln,!Mi),no(u,0,!0)!==0)break t;ci=s,u.timeoutHandle=lm(Ng.bind(null,u,o,Ve,Xo,Gu,s,ln,fs,ia,Mi,m,"Throttled",-0,0),p);break t}Ng(u,o,Ve,Xo,Gu,s,ln,fs,ia,Mi,m,null,-0,0)}}break}while(!0);zn(n)}function Ng(n,s,o,u,p,m,_,w,C,j,$,Z,I,H){if(n.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},Eg(s,m,Z);var nt=(m&62914560)===m?$o-We():(m&4194048)===m?Rg-We():0;if(nt=$_(Z,nt),nt!==null){ci=m,n.cancelPendingCommit=nt(Ig.bind(null,n,s,m,o,u,p,_,w,C,$,Z,null,I,H)),Li(n,m,_,!j);return}}Ig(n,s,m,o,u,p,_,w,C)}function o_(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],m=p.getSnapshot;p=p.value;try{if(!nn(m(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Li(n,s,o,u){s&=~qu,s&=~fs,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var p=s;0<p;){var m=31-en(p),_=1<<m;u[m]=-1,p&=~_}o!==0&&Ud(n,o,s)}function Zo(){return(zt&6)===0?(dr(0),!1):!0}function Zu(){if(Ct!==null){if(jt===0)var n=Ct.return;else n=Ct,Qn=ss=null,uu(n),Ys=null,Za=0,n=Ct;for(;n!==null;)cg(n.alternate,n),n=n.return;Ct=null}}function aa(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,C_(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ci=0,Zu(),Gt=n,Ct=o=Kn(n.current,null),Ot=s,jt=0,on=null,Mi=!1,na=Da(n,s),Hu=!1,ia=ln=qu=fs=Di=ee=0,Ve=ur=null,Gu=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var p=31-en(u),m=1<<p;s|=n[p],u&=~m}return li=s,go(),o}function kg(n,s){At=null,N.H=nr,s===Zs||s===wo?(s=Yf(),jt=3):s===Qc?(s=Yf(),jt=4):jt=s===xu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,on=s,Ct===null&&(ee=1,Po(n,gn(s,n.current)))}function Lg(){var n=an.current;return n===null?!0:(Ot&4194048)===Ot?vn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===vn:!1}function zg(){var n=N.H;return N.H=nr,n===null?nr:n}function Bg(){var n=N.A;return N.A=a_,n}function Yo(){ee=4,Mi||(Ot&4194048)!==Ot&&an.current!==null||(na=!0),(Di&134217727)===0&&(fs&134217727)===0||Gt===null||Li(Gt,Ot,ln,!1)}function Yu(n,s,o){var u=zt;zt|=2;var p=zg(),m=Bg();(Gt!==n||Ot!==s)&&(Xo=null,aa(n,s)),s=!1;var _=ee;t:do try{if(jt!==0&&Ct!==null){var w=Ct,C=on;switch(jt){case 8:Zu(),_=6;break t;case 3:case 2:case 9:case 6:an.current===null&&(s=!0);var j=jt;if(jt=0,on=null,ra(n,w,C,j),o&&na){_=0;break t}break;default:j=jt,jt=0,on=null,ra(n,w,C,j)}}l_(),_=ee;break}catch($){kg(n,$)}while(!0);return s&&n.shellSuspendCounter++,Qn=ss=null,zt=u,N.H=p,N.A=m,Ct===null&&(Gt=null,Ot=0,go()),_}function l_(){for(;Ct!==null;)Pg(Ct)}function c_(n,s){var o=zt;zt|=2;var u=zg(),p=Bg();Gt!==n||Ot!==s?(Xo=null,Vo=We()+500,aa(n,s)):na=Da(n,s);t:do try{if(jt!==0&&Ct!==null){s=Ct;var m=on;e:switch(jt){case 1:jt=0,on=null,ra(n,s,m,1);break;case 2:case 9:if(Xf(m)){jt=0,on=null,jg(s);break}s=function(){jt!==2&&jt!==9||Gt!==n||(jt=7),zn(n)},m.then(s,s);break t;case 3:jt=7;break t;case 4:jt=5;break t;case 7:Xf(m)?(jt=0,on=null,jg(s)):(jt=0,on=null,ra(n,s,m,7));break;case 5:var _=null;switch(Ct.tag){case 26:_=Ct.memoizedState;case 5:case 27:var w=Ct;if(_?wm(_):w.stateNode.complete){jt=0,on=null;var C=w.sibling;if(C!==null)Ct=C;else{var j=w.return;j!==null?(Ct=j,Ko(j)):Ct=null}break e}}jt=0,on=null,ra(n,s,m,5);break;case 6:jt=0,on=null,ra(n,s,m,6);break;case 8:Zu(),ee=6;break t;default:throw Error(i(462))}}u_();break}catch($){kg(n,$)}while(!0);return Qn=ss=null,N.H=u,N.A=p,zt=o,Ct!==null?0:(Gt=null,Ot=0,go(),ee)}function u_(){for(;Ct!==null&&!k0();)Pg(Ct)}function Pg(n){var s=og(n.alternate,n,li);n.memoizedProps=n.pendingProps,s===null?Ko(n):Ct=s}function jg(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=eg(o,s,s.pendingProps,s.type,void 0,Ot);break;case 11:s=eg(o,s,s.pendingProps,s.type.render,s.ref,Ot);break;case 5:uu(s);default:cg(o,s),s=Ct=Bf(s,li),s=og(o,s,li)}n.memoizedProps=n.pendingProps,s===null?Ko(n):Ct=s}function ra(n,s,o,u){Qn=ss=null,uu(s),Ys=null,Za=0;var p=s.return;try{if(Qv(n,p,s,o,Ot)){ee=1,Po(n,gn(o,n.current)),Ct=null;return}}catch(m){if(p!==null)throw Ct=p,m;ee=1,Po(n,gn(o,n.current)),Ct=null;return}s.flags&32768?(Dt||u===1?n=!0:na||(Ot&536870912)!==0?n=!1:(Mi=n=!0,(u===2||u===9||u===3||u===6)&&(u=an.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fg(s,n)):Ko(s)}function Ko(n){var s=n;do{if((s.flags&32768)!==0){Fg(s,Mi);return}n=s.return;var o=e_(s.alternate,s,li);if(o!==null){Ct=o;return}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=n}while(s!==null);ee===0&&(ee=5)}function Fg(n,s){do{var o=n_(n.alternate,n);if(o!==null){o.flags&=32767,Ct=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ct=n;return}Ct=n=o}while(n!==null);ee=6,Ct=null}function Ig(n,s,o,u,p,m,_,w,C){n.cancelPendingCommit=null;do Jo();while(be!==0);if((zt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Pc,q0(n,o,m,_,w,C),n===Gt&&(Ct=Gt=null,Ot=0),sa=s,ki=n,ci=o,$u=m,Vu=p,Og=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,p_(Qr,function(){return $g(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=N.T,N.T=null,p=G.p,G.p=2,_=zt,zt|=4;try{i_(n,s,o)}finally{zt=_,G.p=p,N.T=u}}be=1,Ug(),Hg(),qg()}}function Ug(){if(be===1){be=0;var n=ki,s=sa,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=N.T,N.T=null;var u=G.p;G.p=2;var p=zt;zt|=4;try{Ag(s,n);var m=oh,_=Cf(n.containerInfo),w=m.focusedElem,C=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&xf(w.ownerDocument.documentElement,w)){if(C!==null&&Nc(w)){var j=C.start,$=C.end;if($===void 0&&($=j),"selectionStart"in w)w.selectionStart=j,w.selectionEnd=Math.min($,w.value.length);else{var Z=w.ownerDocument||document,I=Z&&Z.defaultView||window;if(I.getSelection){var H=I.getSelection(),nt=w.textContent.length,ut=Math.min(C.start,nt),Ht=C.end===void 0?ut:Math.min(C.end,nt);!H.extend&&ut>Ht&&(_=Ht,Ht=ut,ut=_);var z=Tf(w,ut),M=Tf(w,Ht);if(z&&M&&(H.rangeCount!==1||H.anchorNode!==z.node||H.anchorOffset!==z.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var P=Z.createRange();P.setStart(z.node,z.offset),H.removeAllRanges(),ut>Ht?(H.addRange(P),H.extend(M.node,M.offset)):(P.setEnd(M.node,M.offset),H.addRange(P))}}}}for(Z=[],H=w;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Z.length;w++){var V=Z[w];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}cl=!!rh,oh=rh=null}finally{zt=p,G.p=u,N.T=o}}n.current=s,be=2}}function Hg(){if(be===2){be=0;var n=ki,s=sa,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=N.T,N.T=null;var u=G.p;G.p=2;var p=zt;zt|=4;try{mg(n,s.alternate,s)}finally{zt=p,G.p=u,N.T=o}}be=3}}function qg(){if(be===4||be===3){be=0,L0();var n=ki,s=sa,o=ci,u=Og;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?be=5:(be=0,sa=ki=null,Gg(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(Ni=null),fc(o),s=s.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ma,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=N.T,p=G.p,G.p=2,N.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var w=u[_];m(w.value,{componentStack:w.stack})}}finally{N.T=s,G.p=p}}(ci&3)!==0&&Jo(),zn(n),p=n.pendingLanes,(o&261930)!==0&&(p&42)!==0?n===Xu?hr++:(hr=0,Xu=n):hr=0,dr(0)}}function Gg(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Va(s)))}function Jo(){return Ug(),Hg(),qg(),$g()}function $g(){if(be!==5)return!1;var n=ki,s=$u;$u=0;var o=fc(ci),u=N.T,p=G.p;try{G.p=32>o?32:o,N.T=null,o=Vu,Vu=null;var m=ki,_=ci;if(be=0,sa=ki=null,ci=0,(zt&6)!==0)throw Error(i(331));var w=zt;if(zt|=4,xg(m.current),wg(m,m.current,_,o),zt=w,dr(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ma,m)}catch{}return!0}finally{G.p=p,N.T=u,Gg(n,s)}}function Vg(n,s,o){s=gn(o,s),s=Tu(n.stateNode,s,2),n=xi(n,s,2),n!==null&&(Na(n,2),zn(n))}function Ft(n,s,o){if(n.tag===3)Vg(n,n,o);else for(;s!==null;){if(s.tag===3){Vg(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ni===null||!Ni.has(u))){n=gn(o,n),o=Xp(2),u=xi(s,o,2),u!==null&&(Zp(o,u,s,n),Na(u,2),zn(u));break}}s=s.return}}function Ku(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new r_;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(o)||(Hu=!0,p.add(o),n=h_.bind(null,n,s,o),s.then(n,n))}function h_(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Gt===n&&(Ot&o)===o&&(ee===4||ee===3&&(Ot&62914560)===Ot&&300>We()-$o?(zt&2)===0&&aa(n,0):qu|=o,ia===Ot&&(ia=0)),zn(n)}function Xg(n,s){s===0&&(s=Id()),n=es(n,s),n!==null&&(Na(n,s),zn(n))}function d_(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Xg(n,o)}function f_(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Xg(n,o)}function p_(n,s){return cc(n,s)}var Qo=null,oa=null,Ju=!1,Wo=!1,Qu=!1,zi=0;function zn(n){n!==oa&&n.next===null&&(oa===null?Qo=oa=n:oa=oa.next=n),Wo=!0,Ju||(Ju=!0,m_())}function dr(n,s){if(!Qu&&Wo){Qu=!0;do for(var o=!1,u=Qo;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var m=0;else{var _=u.suspendedLanes,w=u.pingedLanes;m=(1<<31-en(42|n)+1)-1,m&=p&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Jg(u,m))}else m=Ot,m=no(u,u===Gt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Da(u,m)||(o=!0,Jg(u,m));u=u.next}while(o);Qu=!1}}function g_(){Zg()}function Zg(){Wo=Ju=!1;var n=0;zi!==0&&x_()&&(n=zi);for(var s=We(),o=null,u=Qo;u!==null;){var p=u.next,m=Yg(u,s);m===0?(u.next=null,o===null?Qo=p:o.next=p,p===null&&(oa=o)):(o=u,(n!==0||(m&3)!==0)&&(Wo=!0)),u=p}be!==0&&be!==5||dr(n),zi!==0&&(zi=0)}function Yg(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-en(m),w=1<<_,C=p[_];C===-1?((w&o)===0||(w&u)!==0)&&(p[_]=H0(w,s)):C<=s&&(n.expiredLanes|=w),m&=~w}if(s=Gt,o=Ot,o=no(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(jt===2||jt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&uc(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Da(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&uc(u),fc(o)){case 2:case 8:o=jd;break;case 32:o=Qr;break;case 268435456:o=Fd;break;default:o=Qr}return u=Kg.bind(null,n),o=cc(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&uc(u),n.callbackPriority=2,n.callbackNode=null,2}function Kg(n,s){if(be!==0&&be!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Jo()&&n.callbackNode!==o)return null;var u=Ot;return u=no(n,n===Gt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Dg(n,u,s),Yg(n,We()),n.callbackNode!=null&&n.callbackNode===o?Kg.bind(null,n):null)}function Jg(n,s){if(Jo())return null;Dg(n,s,!0)}function m_(){R_(function(){(zt&6)!==0?cc(Pd,g_):Zg()})}function Wu(){if(zi===0){var n=Vs;n===0&&(n=Wr,Wr<<=1,(Wr&261888)===0&&(Wr=256)),zi=n}return zi}function Qg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ro(""+n)}function Wg(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function y_(n,s,o,u,p){if(s==="submit"&&o&&o.stateNode===p){var m=Qg((p[Ue]||null).action),_=u.submitter;_&&(s=(s=_[Ue]||null)?Qg(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var w=new uo("action","action",null,u,p);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(zi!==0){var C=_?Wg(p,_):new FormData(p);vu(o,{pending:!0,data:C,method:p.method,action:m},null,C)}}else typeof m=="function"&&(w.preventDefault(),C=_?Wg(p,_):new FormData(p),vu(o,{pending:!0,data:C,method:p.method,action:m},m,C))},currentTarget:p}]})}}for(var th=0;th<Bc.length;th++){var eh=Bc[th],b_=eh.toLowerCase(),v_=eh[0].toUpperCase()+eh.slice(1);Cn(b_,"on"+v_)}Cn(Mf,"onAnimationEnd"),Cn(Df,"onAnimationIteration"),Cn(Nf,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(zv,"onTransitionRun"),Cn(Bv,"onTransitionStart"),Cn(Pv,"onTransitionCancel"),Cn(kf,"onTransitionEnd"),Ns("onMouseEnter",["mouseout","mouseover"]),Ns("onMouseLeave",["mouseout","mouseover"]),Ns("onPointerEnter",["pointerout","pointerover"]),Ns("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),__=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fr));function tm(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],p=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var w=u[_],C=w.instance,j=w.currentTarget;if(w=w.listener,C!==m&&p.isPropagationStopped())break t;m=w,p.currentTarget=j;try{m(p)}catch($){po($)}p.currentTarget=null,m=C}else for(_=0;_<u.length;_++){if(w=u[_],C=w.instance,j=w.currentTarget,w=w.listener,C!==m&&p.isPropagationStopped())break t;m=w,p.currentTarget=j;try{m(p)}catch($){po($)}p.currentTarget=null,m=C}}}}function Rt(n,s){var o=s[pc];o===void 0&&(o=s[pc]=new Set);var u=n+"__bubble";o.has(u)||(em(s,n,2,!1),o.add(u))}function nh(n,s,o){var u=0;s&&(u|=4),em(o,n,u,s)}var tl="_reactListening"+Math.random().toString(36).slice(2);function ih(n){if(!n[tl]){n[tl]=!0,Xd.forEach(function(o){o!=="selectionchange"&&(__.has(o)||nh(o,!1,n),nh(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[tl]||(s[tl]=!0,nh("selectionchange",!1,s))}}function em(n,s,o,u){switch(Mm(s)){case 2:var p=Z_;break;case 8:p=Y_;break;default:p=bh}o=p.bind(null,s,o,n),p=void 0,!wc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(s,o,{capture:!0,passive:p}):n.addEventListener(s,o,!0):p!==void 0?n.addEventListener(s,o,{passive:p}):n.addEventListener(s,o,!1)}function sh(n,s,o,u,p){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===p)break;if(_===4)for(_=u.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===p)return;_=_.return}for(;w!==null;){if(_=Os(w),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){u=m=_;continue t}w=w.parentNode}}u=u.return}rf(function(){var j=m,$=Ac(o),Z=[];t:{var I=Lf.get(n);if(I!==void 0){var H=uo,nt=n;switch(n){case"keypress":if(lo(o)===0)break t;case"keydown":case"keyup":H=fv;break;case"focusin":nt="focus",H=Cc;break;case"focusout":nt="blur",H=Cc;break;case"beforeblur":case"afterblur":H=Cc;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=ev;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=mv;break;case Mf:case Df:case Nf:H=sv;break;case kf:H=bv;break;case"scroll":case"scrollend":H=W0;break;case"wheel":H=_v;break;case"copy":case"cut":case"paste":H=rv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=hf;break;case"toggle":case"beforetoggle":H=Sv}var ut=(s&4)!==0,Ht=!ut&&(n==="scroll"||n==="scrollend"),z=ut?I!==null?I+"Capture":null:I;ut=[];for(var M=j,P;M!==null;){var V=M;if(P=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||P===null||z===null||(V=za(M,z),V!=null&&ut.push(pr(M,V,P))),Ht)break;M=M.return}0<ut.length&&(I=new H(I,nt,null,o,$),Z.push({event:I,listeners:ut}))}}if((s&7)===0){t:{if(I=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",I&&o!==_c&&(nt=o.relatedTarget||o.fromElement)&&(Os(nt)||nt[Rs]))break t;if((H||I)&&(I=$.window===$?$:(I=$.ownerDocument)?I.defaultView||I.parentWindow:window,H?(nt=o.relatedTarget||o.toElement,H=j,nt=nt?Os(nt):null,nt!==null&&(Ht=l(nt),ut=nt.tag,nt!==Ht||ut!==5&&ut!==27&&ut!==6)&&(nt=null)):(H=null,nt=j),H!==nt)){if(ut=cf,V="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ut=hf,V="onPointerLeave",z="onPointerEnter",M="pointer"),Ht=H==null?I:La(H),P=nt==null?I:La(nt),I=new ut(V,M+"leave",H,o,$),I.target=Ht,I.relatedTarget=P,V=null,Os($)===j&&(ut=new ut(z,M+"enter",nt,o,$),ut.target=P,ut.relatedTarget=Ht,V=ut),Ht=V,H&&nt)e:{for(ut=A_,z=H,M=nt,P=0,V=z;V;V=ut(V))P++;V=0;for(var rt=M;rt;rt=ut(rt))V++;for(;0<P-V;)z=ut(z),P--;for(;0<V-P;)M=ut(M),V--;for(;P--;){if(z===M||M!==null&&z===M.alternate){ut=z;break e}z=ut(z),M=ut(M)}ut=null}else ut=null;H!==null&&nm(Z,I,H,ut,!1),nt!==null&&Ht!==null&&nm(Z,Ht,nt,ut,!0)}}t:{if(I=j?La(j):window,H=I.nodeName&&I.nodeName.toLowerCase(),H==="select"||H==="input"&&I.type==="file")var kt=vf;else if(yf(I))if(_f)kt=Nv;else{kt=Mv;var at=Ov}else H=I.nodeName,!H||H.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?j&&vc(j.elementType)&&(kt=vf):kt=Dv;if(kt&&(kt=kt(n,j))){bf(Z,kt,o,$);break t}at&&at(n,I,j),n==="focusout"&&j&&I.type==="number"&&j.memoizedProps.value!=null&&bc(I,"number",I.value)}switch(at=j?La(j):window,n){case"focusin":(yf(at)||at.contentEditable==="true")&&(js=at,kc=j,qa=null);break;case"focusout":qa=kc=js=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,Rf(Z,o,$);break;case"selectionchange":if(Lv)break;case"keydown":case"keyup":Rf(Z,o,$)}var wt;if(Oc)t:{switch(n){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Ps?gf(n,o)&&(Mt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Mt="onCompositionStart");Mt&&(df&&o.locale!=="ko"&&(Ps||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ps&&(wt=of()):(vi=$,Ec="value"in vi?vi.value:vi.textContent,Ps=!0)),at=el(j,Mt),0<at.length&&(Mt=new uf(Mt,n,null,o,$),Z.push({event:Mt,listeners:at}),wt?Mt.data=wt:(wt=mf(o),wt!==null&&(Mt.data=wt)))),(wt=Ev?Tv(n,o):xv(n,o))&&(Mt=el(j,"onBeforeInput"),0<Mt.length&&(at=new uf("onBeforeInput","beforeinput",null,o,$),Z.push({event:at,listeners:Mt}),at.data=wt)),y_(Z,n,j,o,$)}tm(Z,s)})}function pr(n,s,o){return{instance:n,listener:s,currentTarget:o}}function el(n,s){for(var o=s+"Capture",u=[];n!==null;){var p=n,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=za(n,o),p!=null&&u.unshift(pr(n,p,m)),p=za(n,s),p!=null&&u.push(pr(n,p,m))),n.tag===3)return u;n=n.return}return[]}function A_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function nm(n,s,o,u,p){for(var m=s._reactName,_=[];o!==null&&o!==u;){var w=o,C=w.alternate,j=w.stateNode;if(w=w.tag,C!==null&&C===u)break;w!==5&&w!==26&&w!==27||j===null||(C=j,p?(j=za(o,m),j!=null&&_.unshift(pr(o,j,C))):p||(j=za(o,m),j!=null&&_.push(pr(o,j,C)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var S_=/\r\n?/g,w_=/\u0000|\uFFFD/g;function im(n){return(typeof n=="string"?n:""+n).replace(S_,`
`).replace(w_,"")}function sm(n,s){return s=im(s),im(n)===s}function Ut(n,s,o,u,p,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Ls(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Ls(n,""+u);break;case"className":so(n,"class",u);break;case"tabIndex":so(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":so(n,o,u);break;case"style":sf(n,u,m);break;case"data":if(s!=="object"){so(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ro(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Ut(n,s,"name",p.name,p,null),Ut(n,s,"formEncType",p.formEncType,p,null),Ut(n,s,"formMethod",p.formMethod,p,null),Ut(n,s,"formTarget",p.formTarget,p,null)):(Ut(n,s,"encType",p.encType,p,null),Ut(n,s,"method",p.method,p,null),Ut(n,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ro(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Zn);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ro(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Rt("beforetoggle",n),Rt("toggle",n),io(n,"popover",u);break;case"xlinkActuate":Xn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":io(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=J0.get(o)||o,io(n,o,u))}}function ah(n,s,o,u,p,m){switch(o){case"style":sf(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ls(n,u):(typeof u=="number"||typeof u=="bigint")&&Ls(n,""+u);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zd.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),m=n[Ue]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,p),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,p);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):io(n,o,u)}}}function Ce(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",n),Rt("load",n);var u=!1,p=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(n,s,m,_,o,null)}}p&&Ut(n,s,"srcSet",o.srcSet,o,null),u&&Ut(n,s,"src",o.src,o,null);return;case"input":Rt("invalid",n);var w=m=_=p=null,C=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var $=o[u];if($!=null)switch(u){case"name":p=$;break;case"type":_=$;break;case"checked":C=$;break;case"defaultChecked":j=$;break;case"value":m=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:Ut(n,s,u,$,o,null)}}Wd(n,m,w,C,j,_,p,!1);return;case"select":Rt("invalid",n),u=_=m=null;for(p in o)if(o.hasOwnProperty(p)&&(w=o[p],w!=null))switch(p){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":u=w;default:Ut(n,s,p,w,o,null)}s=m,o=_,n.multiple=!!u,s!=null?ks(n,!!u,s,!1):o!=null&&ks(n,!!u,o,!0);return;case"textarea":Rt("invalid",n),m=p=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(w=o[_],w!=null))switch(_){case"value":u=w;break;case"defaultValue":p=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Ut(n,s,_,w,o,null)}ef(n,u,p,m);return;case"option":for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null)&&(C==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":Ut(n,s,C,u,o,null));return;case"dialog":Rt("beforetoggle",n),Rt("toggle",n),Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":Rt("load",n);break;case"video":case"audio":for(u=0;u<fr.length;u++)Rt(fr[u],n);break;case"image":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"embed":case"source":case"link":Rt("error",n),Rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(n,s,j,u,o,null)}return;default:if(vc(s)){for($ in o)o.hasOwnProperty($)&&(u=o[$],u!==void 0&&ah(n,s,$,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&Ut(n,s,w,u,o,null))}function E_(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,_=null,w=null,C=null,j=null,$=null;for(H in o){var Z=o[H];if(o.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=Z;default:u.hasOwnProperty(H)||Ut(n,s,H,null,u,Z)}}for(var I in u){var H=u[I];if(Z=o[I],u.hasOwnProperty(I)&&(H!=null||Z!=null))switch(I){case"type":m=H;break;case"name":p=H;break;case"checked":j=H;break;case"defaultChecked":$=H;break;case"value":_=H;break;case"defaultValue":w=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:H!==Z&&Ut(n,s,I,H,u,Z)}}yc(n,_,w,C,j,$,m,p);return;case"select":H=_=w=I=null;for(m in o)if(C=o[m],o.hasOwnProperty(m)&&C!=null)switch(m){case"value":break;case"multiple":H=C;default:u.hasOwnProperty(m)||Ut(n,s,m,null,u,C)}for(p in u)if(m=u[p],C=o[p],u.hasOwnProperty(p)&&(m!=null||C!=null))switch(p){case"value":I=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==C&&Ut(n,s,p,m,u,C)}s=w,o=_,u=H,I!=null?ks(n,!!o,I,!1):!!u!=!!o&&(s!=null?ks(n,!!o,s,!0):ks(n,!!o,o?[]:"",!1));return;case"textarea":H=I=null;for(w in o)if(p=o[w],o.hasOwnProperty(w)&&p!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ut(n,s,w,null,u,p)}for(_ in u)if(p=u[_],m=o[_],u.hasOwnProperty(_)&&(p!=null||m!=null))switch(_){case"value":I=p;break;case"defaultValue":H=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==m&&Ut(n,s,_,p,u,m)}tf(n,I,H);return;case"option":for(var nt in o)I=o[nt],o.hasOwnProperty(nt)&&I!=null&&!u.hasOwnProperty(nt)&&(nt==="selected"?n.selected=!1:Ut(n,s,nt,null,u,I));for(C in u)I=u[C],H=o[C],u.hasOwnProperty(C)&&I!==H&&(I!=null||H!=null)&&(C==="selected"?n.selected=I&&typeof I!="function"&&typeof I!="symbol":Ut(n,s,C,I,u,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in o)I=o[ut],o.hasOwnProperty(ut)&&I!=null&&!u.hasOwnProperty(ut)&&Ut(n,s,ut,null,u,I);for(j in u)if(I=u[j],H=o[j],u.hasOwnProperty(j)&&I!==H&&(I!=null||H!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(137,s));break;default:Ut(n,s,j,I,u,H)}return;default:if(vc(s)){for(var Ht in o)I=o[Ht],o.hasOwnProperty(Ht)&&I!==void 0&&!u.hasOwnProperty(Ht)&&ah(n,s,Ht,void 0,u,I);for($ in u)I=u[$],H=o[$],!u.hasOwnProperty($)||I===H||I===void 0&&H===void 0||ah(n,s,$,I,u,H);return}}for(var z in o)I=o[z],o.hasOwnProperty(z)&&I!=null&&!u.hasOwnProperty(z)&&Ut(n,s,z,null,u,I);for(Z in u)I=u[Z],H=o[Z],!u.hasOwnProperty(Z)||I===H||I==null&&H==null||Ut(n,s,Z,I,u,H)}function am(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function T_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],m=p.transferSize,_=p.initiatorType,w=p.duration;if(m&&w&&am(_)){for(_=0,w=p.responseEnd,u+=1;u<o.length;u++){var C=o[u],j=C.startTime;if(j>w)break;var $=C.transferSize,Z=C.initiatorType;$&&am(Z)&&(C=C.responseEnd,_+=$*(C<w?1:(w-j)/(C-j)))}if(--u,s+=8*(m+_)/(p.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var rh=null,oh=null;function nl(n){return n.nodeType===9?n:n.ownerDocument}function rm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function om(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function lh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ch=null;function x_(){var n=window.event;return n&&n.type==="popstate"?n===ch?!1:(ch=n,!0):(ch=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,C_=typeof clearTimeout=="function"?clearTimeout:void 0,cm=typeof Promise=="function"?Promise:void 0,R_=typeof queueMicrotask=="function"?queueMicrotask:typeof cm<"u"?function(n){return cm.resolve(null).then(n).catch(O_)}:lm;function O_(n){setTimeout(function(){throw n})}function Bi(n){return n==="head"}function um(n,s){var o=s,u=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(p),ha(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")gr(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,gr(o);for(var m=o.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[ka]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&gr(n.ownerDocument.body);o=p}while(o);ha(s)}function hm(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function uh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":uh(o),gc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function M_(n,s,o,u){for(;n.nodeType===1;){var p=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ka])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=_n(n.nextSibling),n===null)break}return null}function D_(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=_n(n.nextSibling),n===null))return null;return n}function dm(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=_n(n.nextSibling),n===null))return null;return n}function hh(n){return n.data==="$?"||n.data==="$~"}function dh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function N_(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function _n(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var fh=null;function fm(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return _n(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function pm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function gm(n,s,o){switch(s=nl(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function gr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);gc(n)}var An=new Map,mm=new Set;function il(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ui=G.d;G.d={f:k_,r:L_,D:z_,C:B_,L:P_,m:j_,X:I_,S:F_,M:U_};function k_(){var n=ui.f(),s=Zo();return n||s}function L_(n){var s=Ms(n);s!==null&&s.tag===5&&s.type==="form"?kp(s):ui.r(n)}var la=typeof document>"u"?null:document;function ym(n,s,o){var u=la;if(u&&typeof s=="string"&&s){var p=fn(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),mm.has(p)||(mm.add(p),n={rel:n,crossOrigin:o,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),Ce(s,"link",n),_e(s),u.head.appendChild(s)))}}function z_(n){ui.D(n),ym("dns-prefetch",n,null)}function B_(n,s){ui.C(n,s),ym("preconnect",n,s)}function P_(n,s,o){ui.L(n,s,o);var u=la;if(u&&n&&s){var p='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+fn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+fn(o.imageSizes)+'"]')):p+='[href="'+fn(n)+'"]';var m=p;switch(s){case"style":m=ca(n);break;case"script":m=ua(n)}An.has(m)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),An.set(m,n),u.querySelector(p)!==null||s==="style"&&u.querySelector(mr(m))||s==="script"&&u.querySelector(yr(m))||(s=u.createElement("link"),Ce(s,"link",n),_e(s),u.head.appendChild(s)))}}function j_(n,s){ui.m(n,s);var o=la;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(n)+'"]',m=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ua(n)}if(!An.has(m)&&(n=y({rel:"modulepreload",href:n},s),An.set(m,n),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yr(m)))return}u=o.createElement("link"),Ce(u,"link",n),_e(u),o.head.appendChild(u)}}}function F_(n,s,o){ui.S(n,s,o);var u=la;if(u&&n){var p=Ds(u).hoistableStyles,m=ca(n);s=s||"default";var _=p.get(m);if(!_){var w={loading:0,preload:null};if(_=u.querySelector(mr(m)))w.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=An.get(m))&&ph(n,o);var C=_=u.createElement("link");_e(C),Ce(C,"link",n),C._p=new Promise(function(j,$){C.onload=j,C.onerror=$}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,sl(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:w},p.set(m,_)}}}function I_(n,s){ui.X(n,s);var o=la;if(o&&n){var u=Ds(o).hoistableScripts,p=ua(n),m=u.get(p);m||(m=o.querySelector(yr(p)),m||(n=y({src:n,async:!0},s),(s=An.get(p))&&gh(n,s),m=o.createElement("script"),_e(m),Ce(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function U_(n,s){ui.M(n,s);var o=la;if(o&&n){var u=Ds(o).hoistableScripts,p=ua(n),m=u.get(p);m||(m=o.querySelector(yr(p)),m||(n=y({src:n,async:!0,type:"module"},s),(s=An.get(p))&&gh(n,s),m=o.createElement("script"),_e(m),Ce(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function bm(n,s,o,u){var p=(p=mt.current)?il(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ca(o.href),o=Ds(p).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ca(o.href);var m=Ds(p).hoistableStyles,_=m.get(n);if(_||(p=p.ownerDocument||p,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=p.querySelector(mr(n)))&&!m._p&&(_.instance=m,_.state.loading=5),An.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},An.set(n,o),m||H_(p,n,o,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ua(o),o=Ds(p).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ca(n){return'href="'+fn(n)+'"'}function mr(n){return'link[rel="stylesheet"]['+n+"]"}function vm(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function H_(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Ce(s,"link",o),_e(s),n.head.appendChild(s))}function ua(n){return'[src="'+fn(n)+'"]'}function yr(n){return"script[async]"+n}function _m(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+fn(o.href)+'"]');if(u)return s.instance=u,_e(u),u;var p=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_e(u),Ce(u,"style",p),sl(u,o.precedence,n),s.instance=u;case"stylesheet":p=ca(o.href);var m=n.querySelector(mr(p));if(m)return s.state.loading|=4,s.instance=m,_e(m),m;u=vm(o),(p=An.get(p))&&ph(u,p),m=(n.ownerDocument||n).createElement("link"),_e(m);var _=m;return _._p=new Promise(function(w,C){_.onload=w,_.onerror=C}),Ce(m,"link",u),s.state.loading|=4,sl(m,o.precedence,n),s.instance=m;case"script":return m=ua(o.src),(p=n.querySelector(yr(m)))?(s.instance=p,_e(p),p):(u=o,(p=An.get(m))&&(u=y({},o),gh(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),_e(p),Ce(p,"link",u),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,sl(u,o.precedence,n));return s.instance}function sl(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,m=p,_=0;_<u.length;_++){var w=u[_];if(w.dataset.precedence===s)m=w;else if(m!==p)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function ph(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function gh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var al=null;function Am(n,s,o){if(al===null){var u=new Map,p=al=new Map;p.set(o,u)}else p=al,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),p=0;p<o.length;p++){var m=o[p];if(!(m[ka]||m[we]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var w=u.get(_);w?w.push(m):u.set(_,[m])}}return u}function Sm(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function q_(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function wm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function G_(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=ca(u.href),m=s.querySelector(mr(p));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=rl.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,_e(m);return}m=s.ownerDocument||s,u=vm(u),(p=An.get(p))&&ph(u,p),m=m.createElement("link"),_e(m);var _=m;_._p=new Promise(function(w,C){_.onload=w,_.onerror=C}),Ce(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=rl.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var mh=0;function $_(n,s){return n.stylesheets&&n.count===0&&ll(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&ll(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&mh===0&&(mh=62500*T_());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ll(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>mh?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function rl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ll(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ol=null;function ll(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ol=new Map,s.forEach(V_,n),ol=null,rl.call(n))}function V_(n,s){if(!(s.state.loading&4)){var o=ol.get(n);if(o)var u=o.get(null);else{o=new Map,ol.set(n,o);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var _=p[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}p=s.instance,_=p.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,p),o.set(_,p),this.count++,u=rl.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),m?m.parentNode.insertBefore(p,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var br={$$typeof:x,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function X_(n,s,o,u,p,m,_,w,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hc(0),this.hiddenUpdates=hc(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Em(n,s,o,u,p,m,_,w,C,j,$,Z){return n=new X_(n,s,o,_,C,j,$,Z,w),s=1,m===!0&&(s|=24),m=sn(3,null,null,s),n.current=m,m.stateNode=n,s=Yc(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Wc(m),n}function Tm(n){return n?(n=Us,n):Us}function xm(n,s,o,u,p,m){p=Tm(p),u.context===null?u.context=p:u.pendingContext=p,u=Ti(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=xi(n,u,s),o!==null&&(Xe(o,n,s),Ka(o,n,s))}function Cm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function yh(n,s){Cm(n,s),(n=n.alternate)&&Cm(n,s)}function Rm(n){if(n.tag===13||n.tag===31){var s=es(n,67108864);s!==null&&Xe(s,n,67108864),yh(n,67108864)}}function Om(n){if(n.tag===13||n.tag===31){var s=cn();s=dc(s);var o=es(n,s);o!==null&&Xe(o,n,s),yh(n,s)}}var cl=!0;function Z_(n,s,o,u){var p=N.T;N.T=null;var m=G.p;try{G.p=2,bh(n,s,o,u)}finally{G.p=m,N.T=p}}function Y_(n,s,o,u){var p=N.T;N.T=null;var m=G.p;try{G.p=8,bh(n,s,o,u)}finally{G.p=m,N.T=p}}function bh(n,s,o,u){if(cl){var p=vh(u);if(p===null)sh(n,s,u,ul,o),Dm(n,u);else if(J_(p,n,s,o,u))u.stopPropagation();else if(Dm(n,u),s&4&&-1<K_.indexOf(n)){for(;p!==null;){var m=Ms(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ki(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var C=1<<31-en(_);w.entanglements[1]|=C,_&=~C}zn(m),(zt&6)===0&&(Vo=We()+500,dr(0))}}break;case 31:case 13:w=es(m,2),w!==null&&Xe(w,m,2),Zo(),yh(m,2)}if(m=vh(u),m===null&&sh(n,s,u,ul,o),m===p)break;p=m}p!==null&&u.stopPropagation()}else sh(n,s,u,null,o)}}function vh(n){return n=Ac(n),_h(n)}var ul=null;function _h(n){if(ul=null,n=Os(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ul=n,null}function Mm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(z0()){case Pd:return 2;case jd:return 8;case Qr:case B0:return 32;case Fd:return 268435456;default:return 32}default:return 32}}var Ah=!1,Pi=null,ji=null,Fi=null,vr=new Map,_r=new Map,Ii=[],K_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dm(n,s){switch(n){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":vr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(s.pointerId)}}function Ar(n,s,o,u,p,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[p]},s!==null&&(s=Ms(s),s!==null&&Rm(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function J_(n,s,o,u,p){switch(s){case"focusin":return Pi=Ar(Pi,n,s,o,u,p),!0;case"dragenter":return ji=Ar(ji,n,s,o,u,p),!0;case"mouseover":return Fi=Ar(Fi,n,s,o,u,p),!0;case"pointerover":var m=p.pointerId;return vr.set(m,Ar(vr.get(m)||null,n,s,o,u,p)),!0;case"gotpointercapture":return m=p.pointerId,_r.set(m,Ar(_r.get(m)||null,n,s,o,u,p)),!0}return!1}function Nm(n){var s=Os(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,$d(n.priority,function(){Om(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,$d(n.priority,function(){Om(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=vh(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);_c=u,o.target.dispatchEvent(u),_c=null}else return s=Ms(o),s!==null&&Rm(s),n.blockedOn=o,!1;s.shift()}return!0}function km(n,s,o){hl(n)&&o.delete(s)}function Q_(){Ah=!1,Pi!==null&&hl(Pi)&&(Pi=null),ji!==null&&hl(ji)&&(ji=null),Fi!==null&&hl(Fi)&&(Fi=null),vr.forEach(km),_r.forEach(km)}function dl(n,s){n.blockedOn===s&&(n.blockedOn=null,Ah||(Ah=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Q_)))}var fl=null;function Lm(n){fl!==n&&(fl=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fl===n&&(fl=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],p=n[s+2];if(typeof u!="function"){if(_h(u||o)===null)continue;break}var m=Ms(o);m!==null&&(n.splice(s,3),s-=3,vu(m,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function ha(n){function s(C){return dl(C,n)}Pi!==null&&dl(Pi,n),ji!==null&&dl(ji,n),Fi!==null&&dl(Fi,n),vr.forEach(s),_r.forEach(s);for(var o=0;o<Ii.length;o++){var u=Ii[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ii.length&&(o=Ii[0],o.blockedOn===null);)Nm(o),o.blockedOn===null&&Ii.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],m=o[u+1],_=p[Ue]||null;if(typeof m=="function")_||Lm(o);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(p=m,_=m[Ue]||null)w=_.formAction;else if(_h(p)!==null)continue}else w=_.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),Lm(o)}}}function zm(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return p=_})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function Sh(n){this._internalRoot=n}pl.prototype.render=Sh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=cn();xm(o,u,n,s,null,null)},pl.prototype.unmount=Sh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;xm(n.current,2,null,n,null,null),Zo(),s[Rs]=null}};function pl(n){this._internalRoot=n}pl.prototype.unstable_scheduleHydration=function(n){if(n){var s=Gd();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ii.length&&s!==0&&s<Ii[o].priority;o++);Ii.splice(o,0,n),o===0&&Nm(n)}};var Bm=t.version;if(Bm!=="19.2.3")throw Error(i(527,Bm,"19.2.3"));G.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var W_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{Ma=gl.inject(W_),tn=gl}catch{}}return wr.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",p=qp,m=Gp,_=$p;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Em(n,1,!1,null,null,o,u,null,p,m,_,zm),n[Rs]=s.current,ih(n),new Sh(s)},wr.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,p="",m=qp,_=Gp,w=$p,C=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(C=o.formState)),s=Em(n,1,!0,s,o??null,u,p,C,m,_,w,zm),s.context=Tm(null),o=s.current,u=cn(),u=dc(u),p=Ti(u),p.callback=null,xi(o,p,u),o=u,s.current.lanes=o,Na(s,o),zn(s),n[Rs]=s.current,ih(n),new pl(s)},wr.version="19.2.3",wr}var Zm;function cA(){if(Zm)return xh.exports;Zm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),xh.exports=lA(),xh.exports}var uA=cA();function Y(r,t,e){function i(h,d){if(h._zod||Object.defineProperty(h,"_zod",{value:{def:d,constr:c,traits:new Set},enumerable:!1}),h._zod.traits.has(r))return;h._zod.traits.add(r),t(h,d);const f=c.prototype,g=Object.keys(f);for(let y=0;y<g.length;y++){const b=g[y];b in h||(h[b]=f[b].bind(h))}}const a=e?.Parent??Object;class l extends a{}Object.defineProperty(l,"name",{value:r});function c(h){var d;const f=e?.Parent?new l:this;i(f,h),(d=f._zod).deferred??(d.deferred=[]);for(const g of f._zod.deferred)g();return f}return Object.defineProperty(c,"init",{value:i}),Object.defineProperty(c,Symbol.hasInstance,{value:h=>e?.Parent&&h instanceof e.Parent?!0:h?._zod?.traits?.has(r)}),Object.defineProperty(c,"name",{value:r}),c}class va extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Wy extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const tb={};function _s(r){return tb}function eb(r){const t=Object.values(r).filter(i=>typeof i=="number");return Object.entries(r).filter(([i,a])=>t.indexOf(+i)===-1).map(([i,a])=>a)}function Gh(r,t){return typeof t=="bigint"?t.toString():t}function Hl(r){return{get value(){{const t=r();return Object.defineProperty(this,"value",{value:t}),t}}}}function ud(r){return r==null}function hd(r){const t=r.startsWith("^")?1:0,e=r.endsWith("$")?r.length-1:r.length;return r.slice(t,e)}const Ym=Symbol("evaluating");function Pt(r,t,e){let i;Object.defineProperty(r,t,{get(){if(i!==Ym)return i===void 0&&(i=Ym,i=e()),i},set(a){Object.defineProperty(r,t,{value:a})},configurable:!0})}function Ts(r,t,e){Object.defineProperty(r,t,{value:e,writable:!0,enumerable:!0,configurable:!0})}function Vi(...r){const t={};for(const e of r){const i=Object.getOwnPropertyDescriptors(e);Object.assign(t,i)}return Object.defineProperties({},t)}function Km(r){return JSON.stringify(r)}function hA(r){return r.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const nb="captureStackTrace"in Error?Error.captureStackTrace:(...r)=>{};function zr(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}const dA=Hl(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const r=Function;return new r(""),!0}catch{return!1}});function Br(r){if(zr(r)===!1)return!1;const t=r.constructor;if(t===void 0||typeof t!="function")return!0;const e=t.prototype;return!(zr(e)===!1||Object.prototype.hasOwnProperty.call(e,"isPrototypeOf")===!1)}function ib(r){return Br(r)?{...r}:Array.isArray(r)?[...r]:r}const fA=new Set(["string","number","symbol"]);function wa(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xi(r,t,e){const i=new r._zod.constr(t??r._zod.def);return(!t||e?.parent)&&(i._zod.parent=r),i}function pt(r){const t=r;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function pA(r){return Object.keys(r).filter(t=>r[t]._zod.optin==="optional"&&r[t]._zod.optout==="optional")}function gA(r,t){const e=r._zod.def,i=e.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const l=Vi(r._zod.def,{get shape(){const c={};for(const h in t){if(!(h in e.shape))throw new Error(`Unrecognized key: "${h}"`);t[h]&&(c[h]=e.shape[h])}return Ts(this,"shape",c),c},checks:[]});return Xi(r,l)}function mA(r,t){const e=r._zod.def,i=e.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const l=Vi(r._zod.def,{get shape(){const c={...r._zod.def.shape};for(const h in t){if(!(h in e.shape))throw new Error(`Unrecognized key: "${h}"`);t[h]&&delete c[h]}return Ts(this,"shape",c),c},checks:[]});return Xi(r,l)}function yA(r,t){if(!Br(t))throw new Error("Invalid input to extend: expected a plain object");const e=r._zod.def.checks;if(e&&e.length>0){const l=r._zod.def.shape;for(const c in t)if(Object.getOwnPropertyDescriptor(l,c)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const a=Vi(r._zod.def,{get shape(){const l={...r._zod.def.shape,...t};return Ts(this,"shape",l),l}});return Xi(r,a)}function bA(r,t){if(!Br(t))throw new Error("Invalid input to safeExtend: expected a plain object");const e=Vi(r._zod.def,{get shape(){const i={...r._zod.def.shape,...t};return Ts(this,"shape",i),i}});return Xi(r,e)}function vA(r,t){const e=Vi(r._zod.def,{get shape(){const i={...r._zod.def.shape,...t._zod.def.shape};return Ts(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return Xi(r,e)}function _A(r,t,e){const a=t._zod.def.checks;if(a&&a.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const c=Vi(t._zod.def,{get shape(){const h=t._zod.def.shape,d={...h};if(e)for(const f in e){if(!(f in h))throw new Error(`Unrecognized key: "${f}"`);e[f]&&(d[f]=r?new r({type:"optional",innerType:h[f]}):h[f])}else for(const f in h)d[f]=r?new r({type:"optional",innerType:h[f]}):h[f];return Ts(this,"shape",d),d},checks:[]});return Xi(t,c)}function AA(r,t,e){const i=Vi(t._zod.def,{get shape(){const a=t._zod.def.shape,l={...a};if(e)for(const c in e){if(!(c in l))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=new r({type:"nonoptional",innerType:a[c]}))}else for(const c in a)l[c]=new r({type:"nonoptional",innerType:a[c]});return Ts(this,"shape",l),l}});return Xi(t,i)}function ma(r,t=0){if(r.aborted===!0)return!0;for(let e=t;e<r.issues.length;e++)if(r.issues[e]?.continue!==!0)return!0;return!1}function sb(r,t){return t.map(e=>{var i;return(i=e).path??(i.path=[]),e.path.unshift(r),e})}function ml(r){return typeof r=="string"?r:r?.message}function As(r,t,e){const i={...r,path:r.path??[]};if(!r.message){const a=ml(r.inst?._zod.def?.error?.(r))??ml(t?.error?.(r))??ml(e.customError?.(r))??ml(e.localeError?.(r))??"Invalid input";i.message=a}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function dd(r){return Array.isArray(r)?"array":typeof r=="string"?"string":"unknown"}function Pr(...r){const[t,e,i]=r;return typeof t=="string"?{message:t,code:"custom",input:e,inst:i}:{...t}}const ab=(r,t)=>{r.name="$ZodError",Object.defineProperty(r,"_zod",{value:r._zod,enumerable:!1}),Object.defineProperty(r,"issues",{value:t,enumerable:!1}),r.message=JSON.stringify(t,Gh,2),Object.defineProperty(r,"toString",{value:()=>r.message,enumerable:!1})},rb=Y("$ZodError",ab),ob=Y("$ZodError",ab,{Parent:Error});function SA(r,t=e=>e.message){const e={},i=[];for(const a of r.issues)a.path.length>0?(e[a.path[0]]=e[a.path[0]]||[],e[a.path[0]].push(t(a))):i.push(t(a));return{formErrors:i,fieldErrors:e}}function wA(r,t=e=>e.message){const e={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(c=>i({issues:c}));else if(l.code==="invalid_key")i({issues:l.issues});else if(l.code==="invalid_element")i({issues:l.issues});else if(l.path.length===0)e._errors.push(t(l));else{let c=e,h=0;for(;h<l.path.length;){const d=l.path[h];h===l.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(t(l))):c[d]=c[d]||{_errors:[]},c=c[d],h++}}};return i(r),e}const fd=r=>(t,e,i,a)=>{const l=i?Object.assign(i,{async:!1}):{async:!1},c=t._zod.run({value:e,issues:[]},l);if(c instanceof Promise)throw new va;if(c.issues.length){const h=new(a?.Err??r)(c.issues.map(d=>As(d,l,_s())));throw nb(h,a?.callee),h}return c.value},pd=r=>async(t,e,i,a)=>{const l=i?Object.assign(i,{async:!0}):{async:!0};let c=t._zod.run({value:e,issues:[]},l);if(c instanceof Promise&&(c=await c),c.issues.length){const h=new(a?.Err??r)(c.issues.map(d=>As(d,l,_s())));throw nb(h,a?.callee),h}return c.value},ql=r=>(t,e,i)=>{const a=i?{...i,async:!1}:{async:!1},l=t._zod.run({value:e,issues:[]},a);if(l instanceof Promise)throw new va;return l.issues.length?{success:!1,error:new(r??rb)(l.issues.map(c=>As(c,a,_s())))}:{success:!0,data:l.value}},EA=ql(ob),Gl=r=>async(t,e,i)=>{const a=i?Object.assign(i,{async:!0}):{async:!0};let l=t._zod.run({value:e,issues:[]},a);return l instanceof Promise&&(l=await l),l.issues.length?{success:!1,error:new r(l.issues.map(c=>As(c,a,_s())))}:{success:!0,data:l.value}},TA=Gl(ob),xA=r=>(t,e,i)=>{const a=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return fd(r)(t,e,a)},CA=r=>(t,e,i)=>fd(r)(t,e,i),RA=r=>async(t,e,i)=>{const a=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return pd(r)(t,e,a)},OA=r=>async(t,e,i)=>pd(r)(t,e,i),MA=r=>(t,e,i)=>{const a=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ql(r)(t,e,a)},DA=r=>(t,e,i)=>ql(r)(t,e,i),NA=r=>async(t,e,i)=>{const a=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Gl(r)(t,e,a)},kA=r=>async(t,e,i)=>Gl(r)(t,e,i),LA=/^[cC][^\s-]{8,}$/,zA=/^[0-9a-z]+$/,BA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,PA=/^[0-9a-vA-V]{20}$/,jA=/^[A-Za-z0-9]{27}$/,FA=/^[a-zA-Z0-9_-]{21}$/,IA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,UA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Jm=r=>r?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${r}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,HA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,qA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function GA(){return new RegExp(qA,"u")}const $A=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,VA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,XA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ZA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,YA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,lb=/^[A-Za-z0-9_-]*$/,KA=/^\+[1-9]\d{6,14}$/,cb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",JA=new RegExp(`^${cb}$`);function ub(r){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof r.precision=="number"?r.precision===-1?`${t}`:r.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${r.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function QA(r){return new RegExp(`^${ub(r)}$`)}function WA(r){const t=ub({precision:r.precision}),e=["Z"];r.local&&e.push(""),r.offset&&e.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${e.join("|")})`;return new RegExp(`^${cb}T(?:${i})$`)}const tS=r=>{const t=r?`[\\s\\S]{${r?.minimum??0},${r?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},eS=/^[^A-Z]*$/,nS=/^[^a-z]*$/,$n=Y("$ZodCheck",(r,t)=>{var e;r._zod??(r._zod={}),r._zod.def=t,(e=r._zod).onattach??(e.onattach=[])}),iS=Y("$ZodCheckMaxLength",(r,t)=>{var e;$n.init(r,t),(e=r._zod.def).when??(e.when=i=>{const a=i.value;return!ud(a)&&a.length!==void 0}),r._zod.onattach.push(i=>{const a=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(i._zod.bag.maximum=t.maximum)}),r._zod.check=i=>{const a=i.value;if(a.length<=t.maximum)return;const c=dd(a);i.issues.push({origin:c,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:r,continue:!t.abort})}}),sS=Y("$ZodCheckMinLength",(r,t)=>{var e;$n.init(r,t),(e=r._zod.def).when??(e.when=i=>{const a=i.value;return!ud(a)&&a.length!==void 0}),r._zod.onattach.push(i=>{const a=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(i._zod.bag.minimum=t.minimum)}),r._zod.check=i=>{const a=i.value;if(a.length>=t.minimum)return;const c=dd(a);i.issues.push({origin:c,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:r,continue:!t.abort})}}),aS=Y("$ZodCheckLengthEquals",(r,t)=>{var e;$n.init(r,t),(e=r._zod.def).when??(e.when=i=>{const a=i.value;return!ud(a)&&a.length!==void 0}),r._zod.onattach.push(i=>{const a=i._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),r._zod.check=i=>{const a=i.value,l=a.length;if(l===t.length)return;const c=dd(a),h=l>t.length;i.issues.push({origin:c,...h?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:r,continue:!t.abort})}}),$l=Y("$ZodCheckStringFormat",(r,t)=>{var e,i;$n.init(r,t),r._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,t.pattern&&(l.patterns??(l.patterns=new Set),l.patterns.add(t.pattern))}),t.pattern?(e=r._zod).check??(e.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:r,continue:!t.abort})}):(i=r._zod).check??(i.check=()=>{})}),rS=Y("$ZodCheckRegex",(r,t)=>{$l.init(r,t),r._zod.check=e=>{t.pattern.lastIndex=0,!t.pattern.test(e.value)&&e.issues.push({origin:"string",code:"invalid_format",format:"regex",input:e.value,pattern:t.pattern.toString(),inst:r,continue:!t.abort})}}),oS=Y("$ZodCheckLowerCase",(r,t)=>{t.pattern??(t.pattern=eS),$l.init(r,t)}),lS=Y("$ZodCheckUpperCase",(r,t)=>{t.pattern??(t.pattern=nS),$l.init(r,t)}),cS=Y("$ZodCheckIncludes",(r,t)=>{$n.init(r,t);const e=wa(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${e}`:e);t.pattern=i,r._zod.onattach.push(a=>{const l=a._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(i)}),r._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:r,continue:!t.abort})}}),uS=Y("$ZodCheckStartsWith",(r,t)=>{$n.init(r,t);const e=new RegExp(`^${wa(t.prefix)}.*`);t.pattern??(t.pattern=e),r._zod.onattach.push(i=>{const a=i._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(e)}),r._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:r,continue:!t.abort})}}),hS=Y("$ZodCheckEndsWith",(r,t)=>{$n.init(r,t);const e=new RegExp(`.*${wa(t.suffix)}$`);t.pattern??(t.pattern=e),r._zod.onattach.push(i=>{const a=i._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(e)}),r._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:r,continue:!t.abort})}}),dS=Y("$ZodCheckOverwrite",(r,t)=>{$n.init(r,t),r._zod.check=e=>{e.value=t.tx(e.value)}});class fS{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(c=>c),a=Math.min(...i.map(c=>c.length-c.trimStart().length)),l=i.map(c=>c.slice(a)).map(c=>" ".repeat(this.indent*2)+c);for(const c of l)this.content.push(c)}compile(){const t=Function,e=this?.args,a=[...(this?.content??[""]).map(l=>`  ${l}`)];return new t(...e,a.join(`
`))}}const pS={major:4,minor:3,patch:6},me=Y("$ZodType",(r,t)=>{var e;r??(r={}),r._zod.def=t,r._zod.bag=r._zod.bag||{},r._zod.version=pS;const i=[...r._zod.def.checks??[]];r._zod.traits.has("$ZodCheck")&&i.unshift(r);for(const a of i)for(const l of a._zod.onattach)l(r);if(i.length===0)(e=r._zod).deferred??(e.deferred=[]),r._zod.deferred?.push(()=>{r._zod.run=r._zod.parse});else{const a=(c,h,d)=>{let f=ma(c),g;for(const y of h){if(y._zod.def.when){if(!y._zod.def.when(c))continue}else if(f)continue;const b=c.issues.length,v=y._zod.check(c);if(v instanceof Promise&&d?.async===!1)throw new va;if(g||v instanceof Promise)g=(g??Promise.resolve()).then(async()=>{await v,c.issues.length!==b&&(f||(f=ma(c,b)))});else{if(c.issues.length===b)continue;f||(f=ma(c,b))}}return g?g.then(()=>c):c},l=(c,h,d)=>{if(ma(c))return c.aborted=!0,c;const f=a(h,i,d);if(f instanceof Promise){if(d.async===!1)throw new va;return f.then(g=>r._zod.parse(g,d))}return r._zod.parse(f,d)};r._zod.run=(c,h)=>{if(h.skipChecks)return r._zod.parse(c,h);if(h.direction==="backward"){const f=r._zod.parse({value:c.value,issues:[]},{...h,skipChecks:!0});return f instanceof Promise?f.then(g=>l(g,c,h)):l(f,c,h)}const d=r._zod.parse(c,h);if(d instanceof Promise){if(h.async===!1)throw new va;return d.then(f=>a(f,i,h))}return a(d,i,h)}}Pt(r,"~standard",()=>({validate:a=>{try{const l=EA(r,a);return l.success?{value:l.data}:{issues:l.error?.issues}}catch{return TA(r,a).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}))}),gd=Y("$ZodString",(r,t)=>{me.init(r,t),r._zod.pattern=[...r?._zod.bag?.patterns??[]].pop()??tS(r._zod.bag),r._zod.parse=(e,i)=>{if(t.coerce)try{e.value=String(e.value)}catch{}return typeof e.value=="string"||e.issues.push({expected:"string",code:"invalid_type",input:e.value,inst:r}),e}}),Kt=Y("$ZodStringFormat",(r,t)=>{$l.init(r,t),gd.init(r,t)}),gS=Y("$ZodGUID",(r,t)=>{t.pattern??(t.pattern=UA),Kt.init(r,t)}),mS=Y("$ZodUUID",(r,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Jm(i))}else t.pattern??(t.pattern=Jm());Kt.init(r,t)}),yS=Y("$ZodEmail",(r,t)=>{t.pattern??(t.pattern=HA),Kt.init(r,t)}),bS=Y("$ZodURL",(r,t)=>{Kt.init(r,t),r._zod.check=e=>{try{const i=e.value.trim(),a=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:e.value,inst:r,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:e.value,inst:r,continue:!t.abort})),t.normalize?e.value=a.href:e.value=i;return}catch{e.issues.push({code:"invalid_format",format:"url",input:e.value,inst:r,continue:!t.abort})}}}),vS=Y("$ZodEmoji",(r,t)=>{t.pattern??(t.pattern=GA()),Kt.init(r,t)}),_S=Y("$ZodNanoID",(r,t)=>{t.pattern??(t.pattern=FA),Kt.init(r,t)}),AS=Y("$ZodCUID",(r,t)=>{t.pattern??(t.pattern=LA),Kt.init(r,t)}),SS=Y("$ZodCUID2",(r,t)=>{t.pattern??(t.pattern=zA),Kt.init(r,t)}),wS=Y("$ZodULID",(r,t)=>{t.pattern??(t.pattern=BA),Kt.init(r,t)}),ES=Y("$ZodXID",(r,t)=>{t.pattern??(t.pattern=PA),Kt.init(r,t)}),TS=Y("$ZodKSUID",(r,t)=>{t.pattern??(t.pattern=jA),Kt.init(r,t)}),xS=Y("$ZodISODateTime",(r,t)=>{t.pattern??(t.pattern=WA(t)),Kt.init(r,t)}),CS=Y("$ZodISODate",(r,t)=>{t.pattern??(t.pattern=JA),Kt.init(r,t)}),RS=Y("$ZodISOTime",(r,t)=>{t.pattern??(t.pattern=QA(t)),Kt.init(r,t)}),OS=Y("$ZodISODuration",(r,t)=>{t.pattern??(t.pattern=IA),Kt.init(r,t)}),MS=Y("$ZodIPv4",(r,t)=>{t.pattern??(t.pattern=$A),Kt.init(r,t),r._zod.bag.format="ipv4"}),DS=Y("$ZodIPv6",(r,t)=>{t.pattern??(t.pattern=VA),Kt.init(r,t),r._zod.bag.format="ipv6",r._zod.check=e=>{try{new URL(`http://[${e.value}]`)}catch{e.issues.push({code:"invalid_format",format:"ipv6",input:e.value,inst:r,continue:!t.abort})}}}),NS=Y("$ZodCIDRv4",(r,t)=>{t.pattern??(t.pattern=XA),Kt.init(r,t)}),kS=Y("$ZodCIDRv6",(r,t)=>{t.pattern??(t.pattern=ZA),Kt.init(r,t),r._zod.check=e=>{const i=e.value.split("/");try{if(i.length!==2)throw new Error;const[a,l]=i;if(!l)throw new Error;const c=Number(l);if(`${c}`!==l)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${a}]`)}catch{e.issues.push({code:"invalid_format",format:"cidrv6",input:e.value,inst:r,continue:!t.abort})}}});function hb(r){if(r==="")return!0;if(r.length%4!==0)return!1;try{return atob(r),!0}catch{return!1}}const LS=Y("$ZodBase64",(r,t)=>{t.pattern??(t.pattern=YA),Kt.init(r,t),r._zod.bag.contentEncoding="base64",r._zod.check=e=>{hb(e.value)||e.issues.push({code:"invalid_format",format:"base64",input:e.value,inst:r,continue:!t.abort})}});function zS(r){if(!lb.test(r))return!1;const t=r.replace(/[-_]/g,i=>i==="-"?"+":"/"),e=t.padEnd(Math.ceil(t.length/4)*4,"=");return hb(e)}const BS=Y("$ZodBase64URL",(r,t)=>{t.pattern??(t.pattern=lb),Kt.init(r,t),r._zod.bag.contentEncoding="base64url",r._zod.check=e=>{zS(e.value)||e.issues.push({code:"invalid_format",format:"base64url",input:e.value,inst:r,continue:!t.abort})}}),PS=Y("$ZodE164",(r,t)=>{t.pattern??(t.pattern=KA),Kt.init(r,t)});function jS(r,t=null){try{const e=r.split(".");if(e.length!==3)return!1;const[i]=e;if(!i)return!1;const a=JSON.parse(atob(i));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const FS=Y("$ZodJWT",(r,t)=>{Kt.init(r,t),r._zod.check=e=>{jS(e.value,t.alg)||e.issues.push({code:"invalid_format",format:"jwt",input:e.value,inst:r,continue:!t.abort})}}),IS=Y("$ZodUnknown",(r,t)=>{me.init(r,t),r._zod.parse=e=>e}),US=Y("$ZodNever",(r,t)=>{me.init(r,t),r._zod.parse=(e,i)=>(e.issues.push({expected:"never",code:"invalid_type",input:e.value,inst:r}),e)});function Qm(r,t,e){r.issues.length&&t.issues.push(...sb(e,r.issues)),t.value[e]=r.value}const HS=Y("$ZodArray",(r,t)=>{me.init(r,t),r._zod.parse=(e,i)=>{const a=e.value;if(!Array.isArray(a))return e.issues.push({expected:"array",code:"invalid_type",input:a,inst:r}),e;e.value=Array(a.length);const l=[];for(let c=0;c<a.length;c++){const h=a[c],d=t.element._zod.run({value:h,issues:[]},i);d instanceof Promise?l.push(d.then(f=>Qm(f,e,c))):Qm(d,e,c)}return l.length?Promise.all(l).then(()=>e):e}});function Ll(r,t,e,i,a){if(r.issues.length){if(a&&!(e in i))return;t.issues.push(...sb(e,r.issues))}r.value===void 0?e in i&&(t.value[e]=void 0):t.value[e]=r.value}function db(r){const t=Object.keys(r.shape);for(const i of t)if(!r.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const e=pA(r.shape);return{...r,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(e)}}function fb(r,t,e,i,a,l){const c=[],h=a.keySet,d=a.catchall._zod,f=d.def.type,g=d.optout==="optional";for(const y in t){if(h.has(y))continue;if(f==="never"){c.push(y);continue}const b=d.run({value:t[y],issues:[]},i);b instanceof Promise?r.push(b.then(v=>Ll(v,e,y,t,g))):Ll(b,e,y,t,g)}return c.length&&e.issues.push({code:"unrecognized_keys",keys:c,input:t,inst:l}),r.length?Promise.all(r).then(()=>e):e}const qS=Y("$ZodObject",(r,t)=>{if(me.init(r,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const h=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...h};return Object.defineProperty(t,"shape",{value:d}),d}})}const i=Hl(()=>db(t));Pt(r._zod,"propValues",()=>{const h=t.shape,d={};for(const f in h){const g=h[f]._zod;if(g.values){d[f]??(d[f]=new Set);for(const y of g.values)d[f].add(y)}}return d});const a=zr,l=t.catchall;let c;r._zod.parse=(h,d)=>{c??(c=i.value);const f=h.value;if(!a(f))return h.issues.push({expected:"object",code:"invalid_type",input:f,inst:r}),h;h.value={};const g=[],y=c.shape;for(const b of c.keys){const v=y[b],A=v._zod.optout==="optional",S=v._zod.run({value:f[b],issues:[]},d);S instanceof Promise?g.push(S.then(E=>Ll(E,h,b,f,A))):Ll(S,h,b,f,A)}return l?fb(g,f,h,d,i.value,r):g.length?Promise.all(g).then(()=>h):h}}),GS=Y("$ZodObjectJIT",(r,t)=>{qS.init(r,t);const e=r._zod.parse,i=Hl(()=>db(t)),a=b=>{const v=new fS(["shape","payload","ctx"]),A=i.value,S=x=>{const D=Km(x);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};v.write("const input = payload.value;");const E=Object.create(null);let T=0;for(const x of A.keys)E[x]=`key_${T++}`;v.write("const newResult = {};");for(const x of A.keys){const D=E[x],k=Km(x),F=b[x]?._zod?.optout==="optional";v.write(`const ${D} = ${S(x)};`),F?v.write(`
        if (${D}.issues.length) {
          if (${k} in input) {
            payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${k}, ...iss.path] : [${k}]
            })));
          }
        }
        
        if (${D}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${D}.value;
        }
        
      `):v.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${k}, ...iss.path] : [${k}]
          })));
        }
        
        if (${D}.value === undefined) {
          if (${k} in input) {
            newResult[${k}] = undefined;
          }
        } else {
          newResult[${k}] = ${D}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const O=v.compile();return(x,D)=>O(b,x,D)};let l;const c=zr,h=!tb.jitless,f=h&&dA.value,g=t.catchall;let y;r._zod.parse=(b,v)=>{y??(y=i.value);const A=b.value;return c(A)?h&&f&&v?.async===!1&&v.jitless!==!0?(l||(l=a(t.shape)),b=l(b,v),g?fb([],A,b,v,y,r):b):e(b,v):(b.issues.push({expected:"object",code:"invalid_type",input:A,inst:r}),b)}});function Wm(r,t,e,i){for(const l of r)if(l.issues.length===0)return t.value=l.value,t;const a=r.filter(l=>!ma(l));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:e,errors:r.map(l=>l.issues.map(c=>As(c,i,_s())))}),t)}const pb=Y("$ZodUnion",(r,t)=>{me.init(r,t),Pt(r._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),Pt(r._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),Pt(r._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),Pt(r._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(l=>l._zod.pattern);return new RegExp(`^(${a.map(l=>hd(l.source)).join("|")})$`)}});const e=t.options.length===1,i=t.options[0]._zod.run;r._zod.parse=(a,l)=>{if(e)return i(a,l);let c=!1;const h=[];for(const d of t.options){const f=d._zod.run({value:a.value,issues:[]},l);if(f instanceof Promise)h.push(f),c=!0;else{if(f.issues.length===0)return f;h.push(f)}}return c?Promise.all(h).then(d=>Wm(d,a,r,l)):Wm(h,a,r,l)}}),$S=Y("$ZodDiscriminatedUnion",(r,t)=>{t.inclusive=!1,pb.init(r,t);const e=r._zod.parse;Pt(r._zod,"propValues",()=>{const a={};for(const l of t.options){const c=l._zod.propValues;if(!c||Object.keys(c).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(l)}"`);for(const[h,d]of Object.entries(c)){a[h]||(a[h]=new Set);for(const f of d)a[h].add(f)}}return a});const i=Hl(()=>{const a=t.options,l=new Map;for(const c of a){const h=c._zod.propValues?.[t.discriminator];if(!h||h.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(c)}"`);for(const d of h){if(l.has(d))throw new Error(`Duplicate discriminator value "${String(d)}"`);l.set(d,c)}}return l});r._zod.parse=(a,l)=>{const c=a.value;if(!zr(c))return a.issues.push({code:"invalid_type",expected:"object",input:c,inst:r}),a;const h=i.value.get(c?.[t.discriminator]);return h?h._zod.run(a,l):t.unionFallback?e(a,l):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:c,path:[t.discriminator],inst:r}),a)}}),VS=Y("$ZodIntersection",(r,t)=>{me.init(r,t),r._zod.parse=(e,i)=>{const a=e.value,l=t.left._zod.run({value:a,issues:[]},i),c=t.right._zod.run({value:a,issues:[]},i);return l instanceof Promise||c instanceof Promise?Promise.all([l,c]).then(([d,f])=>ty(e,d,f)):ty(e,l,c)}});function $h(r,t){if(r===t)return{valid:!0,data:r};if(r instanceof Date&&t instanceof Date&&+r==+t)return{valid:!0,data:r};if(Br(r)&&Br(t)){const e=Object.keys(t),i=Object.keys(r).filter(l=>e.indexOf(l)!==-1),a={...r,...t};for(const l of i){const c=$h(r[l],t[l]);if(!c.valid)return{valid:!1,mergeErrorPath:[l,...c.mergeErrorPath]};a[l]=c.data}return{valid:!0,data:a}}if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return{valid:!1,mergeErrorPath:[]};const e=[];for(let i=0;i<r.length;i++){const a=r[i],l=t[i],c=$h(a,l);if(!c.valid)return{valid:!1,mergeErrorPath:[i,...c.mergeErrorPath]};e.push(c.data)}return{valid:!0,data:e}}return{valid:!1,mergeErrorPath:[]}}function ty(r,t,e){const i=new Map;let a;for(const h of t.issues)if(h.code==="unrecognized_keys"){a??(a=h);for(const d of h.keys)i.has(d)||i.set(d,{}),i.get(d).l=!0}else r.issues.push(h);for(const h of e.issues)if(h.code==="unrecognized_keys")for(const d of h.keys)i.has(d)||i.set(d,{}),i.get(d).r=!0;else r.issues.push(h);const l=[...i].filter(([,h])=>h.l&&h.r).map(([h])=>h);if(l.length&&a&&r.issues.push({...a,keys:l}),ma(r))return r;const c=$h(t.value,e.value);if(!c.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(c.mergeErrorPath)}`);return r.value=c.data,r}const XS=Y("$ZodEnum",(r,t)=>{me.init(r,t);const e=eb(t.entries),i=new Set(e);r._zod.values=i,r._zod.pattern=new RegExp(`^(${e.filter(a=>fA.has(typeof a)).map(a=>typeof a=="string"?wa(a):a.toString()).join("|")})$`),r._zod.parse=(a,l)=>{const c=a.value;return i.has(c)||a.issues.push({code:"invalid_value",values:e,input:c,inst:r}),a}}),ZS=Y("$ZodLiteral",(r,t)=>{if(me.init(r,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const e=new Set(t.values);r._zod.values=e,r._zod.pattern=new RegExp(`^(${t.values.map(i=>typeof i=="string"?wa(i):i?wa(i.toString()):String(i)).join("|")})$`),r._zod.parse=(i,a)=>{const l=i.value;return e.has(l)||i.issues.push({code:"invalid_value",values:t.values,input:l,inst:r}),i}}),YS=Y("$ZodTransform",(r,t)=>{me.init(r,t),r._zod.parse=(e,i)=>{if(i.direction==="backward")throw new Wy(r.constructor.name);const a=t.transform(e.value,e);if(i.async)return(a instanceof Promise?a:Promise.resolve(a)).then(c=>(e.value=c,e));if(a instanceof Promise)throw new va;return e.value=a,e}});function ey(r,t){return r.issues.length&&t===void 0?{issues:[],value:void 0}:r}const gb=Y("$ZodOptional",(r,t)=>{me.init(r,t),r._zod.optin="optional",r._zod.optout="optional",Pt(r._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Pt(r._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${hd(e.source)})?$`):void 0}),r._zod.parse=(e,i)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(e,i);return a instanceof Promise?a.then(l=>ey(l,e.value)):ey(a,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,i)}}),KS=Y("$ZodExactOptional",(r,t)=>{gb.init(r,t),Pt(r._zod,"values",()=>t.innerType._zod.values),Pt(r._zod,"pattern",()=>t.innerType._zod.pattern),r._zod.parse=(e,i)=>t.innerType._zod.run(e,i)}),JS=Y("$ZodNullable",(r,t)=>{me.init(r,t),Pt(r._zod,"optin",()=>t.innerType._zod.optin),Pt(r._zod,"optout",()=>t.innerType._zod.optout),Pt(r._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${hd(e.source)}|null)$`):void 0}),Pt(r._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),r._zod.parse=(e,i)=>e.value===null?e:t.innerType._zod.run(e,i)}),QS=Y("$ZodDefault",(r,t)=>{me.init(r,t),r._zod.optin="optional",Pt(r._zod,"values",()=>t.innerType._zod.values),r._zod.parse=(e,i)=>{if(i.direction==="backward")return t.innerType._zod.run(e,i);if(e.value===void 0)return e.value=t.defaultValue,e;const a=t.innerType._zod.run(e,i);return a instanceof Promise?a.then(l=>ny(l,t)):ny(a,t)}});function ny(r,t){return r.value===void 0&&(r.value=t.defaultValue),r}const WS=Y("$ZodPrefault",(r,t)=>{me.init(r,t),r._zod.optin="optional",Pt(r._zod,"values",()=>t.innerType._zod.values),r._zod.parse=(e,i)=>(i.direction==="backward"||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,i))}),tw=Y("$ZodNonOptional",(r,t)=>{me.init(r,t),Pt(r._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(i=>i!==void 0)):void 0}),r._zod.parse=(e,i)=>{const a=t.innerType._zod.run(e,i);return a instanceof Promise?a.then(l=>iy(l,r)):iy(a,r)}});function iy(r,t){return!r.issues.length&&r.value===void 0&&r.issues.push({code:"invalid_type",expected:"nonoptional",input:r.value,inst:t}),r}const ew=Y("$ZodCatch",(r,t)=>{me.init(r,t),Pt(r._zod,"optin",()=>t.innerType._zod.optin),Pt(r._zod,"optout",()=>t.innerType._zod.optout),Pt(r._zod,"values",()=>t.innerType._zod.values),r._zod.parse=(e,i)=>{if(i.direction==="backward")return t.innerType._zod.run(e,i);const a=t.innerType._zod.run(e,i);return a instanceof Promise?a.then(l=>(e.value=l.value,l.issues.length&&(e.value=t.catchValue({...e,error:{issues:l.issues.map(c=>As(c,i,_s()))},input:e.value}),e.issues=[]),e)):(e.value=a.value,a.issues.length&&(e.value=t.catchValue({...e,error:{issues:a.issues.map(l=>As(l,i,_s()))},input:e.value}),e.issues=[]),e)}}),nw=Y("$ZodPipe",(r,t)=>{me.init(r,t),Pt(r._zod,"values",()=>t.in._zod.values),Pt(r._zod,"optin",()=>t.in._zod.optin),Pt(r._zod,"optout",()=>t.out._zod.optout),Pt(r._zod,"propValues",()=>t.in._zod.propValues),r._zod.parse=(e,i)=>{if(i.direction==="backward"){const l=t.out._zod.run(e,i);return l instanceof Promise?l.then(c=>yl(c,t.in,i)):yl(l,t.in,i)}const a=t.in._zod.run(e,i);return a instanceof Promise?a.then(l=>yl(l,t.out,i)):yl(a,t.out,i)}});function yl(r,t,e){return r.issues.length?(r.aborted=!0,r):t._zod.run({value:r.value,issues:r.issues},e)}const iw=Y("$ZodReadonly",(r,t)=>{me.init(r,t),Pt(r._zod,"propValues",()=>t.innerType._zod.propValues),Pt(r._zod,"values",()=>t.innerType._zod.values),Pt(r._zod,"optin",()=>t.innerType?._zod?.optin),Pt(r._zod,"optout",()=>t.innerType?._zod?.optout),r._zod.parse=(e,i)=>{if(i.direction==="backward")return t.innerType._zod.run(e,i);const a=t.innerType._zod.run(e,i);return a instanceof Promise?a.then(sy):sy(a)}});function sy(r){return r.value=Object.freeze(r.value),r}const sw=Y("$ZodCustom",(r,t)=>{$n.init(r,t),me.init(r,t),r._zod.parse=(e,i)=>e,r._zod.check=e=>{const i=e.value,a=t.fn(i);if(a instanceof Promise)return a.then(l=>ay(l,e,i,r));ay(a,e,i,r)}});function ay(r,t,e,i){if(!r){const a={code:"custom",input:e,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(a.params=i._zod.def.params),t.issues.push(Pr(a))}}var ry;class aw{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...e){const i=e[0];return this._map.set(t,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const e=this._map.get(t);return e&&typeof e=="object"&&"id"in e&&this._idmap.delete(e.id),this._map.delete(t),this}get(t){const e=t._zod.parent;if(e){const i={...this.get(e)??{}};delete i.id;const a={...i,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function rw(){return new aw}(ry=globalThis).__zod_globalRegistry??(ry.__zod_globalRegistry=rw());const Mr=globalThis.__zod_globalRegistry;function ow(r,t){return new r({type:"string",...pt(t)})}function lw(r,t){return new r({type:"string",format:"email",check:"string_format",abort:!1,...pt(t)})}function oy(r,t){return new r({type:"string",format:"guid",check:"string_format",abort:!1,...pt(t)})}function cw(r,t){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,...pt(t)})}function uw(r,t){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...pt(t)})}function hw(r,t){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...pt(t)})}function dw(r,t){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...pt(t)})}function fw(r,t){return new r({type:"string",format:"url",check:"string_format",abort:!1,...pt(t)})}function pw(r,t){return new r({type:"string",format:"emoji",check:"string_format",abort:!1,...pt(t)})}function gw(r,t){return new r({type:"string",format:"nanoid",check:"string_format",abort:!1,...pt(t)})}function mw(r,t){return new r({type:"string",format:"cuid",check:"string_format",abort:!1,...pt(t)})}function yw(r,t){return new r({type:"string",format:"cuid2",check:"string_format",abort:!1,...pt(t)})}function bw(r,t){return new r({type:"string",format:"ulid",check:"string_format",abort:!1,...pt(t)})}function vw(r,t){return new r({type:"string",format:"xid",check:"string_format",abort:!1,...pt(t)})}function _w(r,t){return new r({type:"string",format:"ksuid",check:"string_format",abort:!1,...pt(t)})}function Aw(r,t){return new r({type:"string",format:"ipv4",check:"string_format",abort:!1,...pt(t)})}function Sw(r,t){return new r({type:"string",format:"ipv6",check:"string_format",abort:!1,...pt(t)})}function ww(r,t){return new r({type:"string",format:"cidrv4",check:"string_format",abort:!1,...pt(t)})}function Ew(r,t){return new r({type:"string",format:"cidrv6",check:"string_format",abort:!1,...pt(t)})}function Tw(r,t){return new r({type:"string",format:"base64",check:"string_format",abort:!1,...pt(t)})}function xw(r,t){return new r({type:"string",format:"base64url",check:"string_format",abort:!1,...pt(t)})}function Cw(r,t){return new r({type:"string",format:"e164",check:"string_format",abort:!1,...pt(t)})}function Rw(r,t){return new r({type:"string",format:"jwt",check:"string_format",abort:!1,...pt(t)})}function Ow(r,t){return new r({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...pt(t)})}function Mw(r,t){return new r({type:"string",format:"date",check:"string_format",...pt(t)})}function Dw(r,t){return new r({type:"string",format:"time",check:"string_format",precision:null,...pt(t)})}function Nw(r,t){return new r({type:"string",format:"duration",check:"string_format",...pt(t)})}function kw(r){return new r({type:"unknown"})}function Lw(r,t){return new r({type:"never",...pt(t)})}function mb(r,t){return new iS({check:"max_length",...pt(t),maximum:r})}function zl(r,t){return new sS({check:"min_length",...pt(t),minimum:r})}function yb(r,t){return new aS({check:"length_equals",...pt(t),length:r})}function zw(r,t){return new rS({check:"string_format",format:"regex",...pt(t),pattern:r})}function Bw(r){return new oS({check:"string_format",format:"lowercase",...pt(r)})}function Pw(r){return new lS({check:"string_format",format:"uppercase",...pt(r)})}function jw(r,t){return new cS({check:"string_format",format:"includes",...pt(t),includes:r})}function Fw(r,t){return new uS({check:"string_format",format:"starts_with",...pt(t),prefix:r})}function Iw(r,t){return new hS({check:"string_format",format:"ends_with",...pt(t),suffix:r})}function xa(r){return new dS({check:"overwrite",tx:r})}function Uw(r){return xa(t=>t.normalize(r))}function Hw(){return xa(r=>r.trim())}function qw(){return xa(r=>r.toLowerCase())}function Gw(){return xa(r=>r.toUpperCase())}function $w(){return xa(r=>hA(r))}function Vw(r,t,e){return new r({type:"array",element:t,...pt(e)})}function Xw(r,t,e){return new r({type:"custom",check:"custom",fn:t,...pt(e)})}function Zw(r){const t=Yw(e=>(e.addIssue=i=>{if(typeof i=="string")e.issues.push(Pr(i,e.value,t._zod.def));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=e.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),e.issues.push(Pr(a))}},r(e.value,e)));return t}function Yw(r,t){const e=new $n({check:"custom",...pt(t)});return e._zod.check=r,e}function bb(r){let t=r?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:r.processors??{},metadataRegistry:r?.metadata??Mr,target:t,unrepresentable:r?.unrepresentable??"throw",override:r?.override??(()=>{}),io:r?.io??"output",counter:0,seen:new Map,cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0}}function Ne(r,t,e={path:[],schemaPath:[]}){var i;const a=r._zod.def,l=t.seen.get(r);if(l)return l.count++,e.schemaPath.includes(r)&&(l.cycle=e.path),l.schema;const c={schema:{},count:1,cycle:void 0,path:e.path};t.seen.set(r,c);const h=r._zod.toJSONSchema?.();if(h)c.schema=h;else{const g={...e,schemaPath:[...e.schemaPath,r],path:e.path};if(r._zod.processJSONSchema)r._zod.processJSONSchema(t,c.schema,g);else{const b=c.schema,v=t.processors[a.type];if(!v)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${a.type}`);v(r,t,b,g)}const y=r._zod.parent;y&&(c.ref||(c.ref=y),Ne(y,t,g),t.seen.get(y).isParent=!0)}const d=t.metadataRegistry.get(r);return d&&Object.assign(c.schema,d),t.io==="input"&&Be(r)&&(delete c.schema.examples,delete c.schema.default),t.io==="input"&&c.schema._prefault&&((i=c.schema).default??(i.default=c.schema._prefault)),delete c.schema._prefault,t.seen.get(r).schema}function vb(r,t){const e=r.seen.get(t);if(!e)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const c of r.seen.entries()){const h=r.metadataRegistry.get(c[0])?.id;if(h){const d=i.get(h);if(d&&d!==c[0])throw new Error(`Duplicate schema id "${h}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(h,c[0])}}const a=c=>{const h=r.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const y=r.external.registry.get(c[0])?.id,b=r.external.uri??(A=>A);if(y)return{ref:b(y)};const v=c[1].defId??c[1].schema.id??`schema${r.counter++}`;return c[1].defId=v,{defId:v,ref:`${b("__shared")}#/${h}/${v}`}}if(c[1]===e)return{ref:"#"};const f=`#/${h}/`,g=c[1].schema.id??`__schema${r.counter++}`;return{defId:g,ref:f+g}},l=c=>{if(c[1].schema.$ref)return;const h=c[1],{ref:d,defId:f}=a(c);h.def={...h.schema},f&&(h.defId=f);const g=h.schema;for(const y in g)delete g[y];g.$ref=d};if(r.cycles==="throw")for(const c of r.seen.entries()){const h=c[1];if(h.cycle)throw new Error(`Cycle detected: #/${h.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const c of r.seen.entries()){const h=c[1];if(t===c[0]){l(c);continue}if(r.external){const f=r.external.registry.get(c[0])?.id;if(t!==c[0]&&f){l(c);continue}}if(r.metadataRegistry.get(c[0])?.id){l(c);continue}if(h.cycle){l(c);continue}if(h.count>1&&r.reused==="ref"){l(c);continue}}}function _b(r,t){const e=r.seen.get(t);if(!e)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=c=>{const h=r.seen.get(c);if(h.ref===null)return;const d=h.def??h.schema,f={...d},g=h.ref;if(h.ref=null,g){i(g);const b=r.seen.get(g),v=b.schema;if(v.$ref&&(r.target==="draft-07"||r.target==="draft-04"||r.target==="openapi-3.0")?(d.allOf=d.allOf??[],d.allOf.push(v)):Object.assign(d,v),Object.assign(d,f),c._zod.parent===g)for(const S in d)S==="$ref"||S==="allOf"||S in f||delete d[S];if(v.$ref&&b.def)for(const S in d)S==="$ref"||S==="allOf"||S in b.def&&JSON.stringify(d[S])===JSON.stringify(b.def[S])&&delete d[S]}const y=c._zod.parent;if(y&&y!==g){i(y);const b=r.seen.get(y);if(b?.schema.$ref&&(d.$ref=b.schema.$ref,b.def))for(const v in d)v==="$ref"||v==="allOf"||v in b.def&&JSON.stringify(d[v])===JSON.stringify(b.def[v])&&delete d[v]}r.override({zodSchema:c,jsonSchema:d,path:h.path??[]})};for(const c of[...r.seen.entries()].reverse())i(c[0]);const a={};if(r.target==="draft-2020-12"?a.$schema="https://json-schema.org/draft/2020-12/schema":r.target==="draft-07"?a.$schema="http://json-schema.org/draft-07/schema#":r.target==="draft-04"?a.$schema="http://json-schema.org/draft-04/schema#":r.target,r.external?.uri){const c=r.external.registry.get(t)?.id;if(!c)throw new Error("Schema is missing an `id` property");a.$id=r.external.uri(c)}Object.assign(a,e.def??e.schema);const l=r.external?.defs??{};for(const c of r.seen.entries()){const h=c[1];h.def&&h.defId&&(l[h.defId]=h.def)}r.external||Object.keys(l).length>0&&(r.target==="draft-2020-12"?a.$defs=l:a.definitions=l);try{const c=JSON.parse(JSON.stringify(a));return Object.defineProperty(c,"~standard",{value:{...t["~standard"],jsonSchema:{input:Bl(t,"input",r.processors),output:Bl(t,"output",r.processors)}},enumerable:!1,writable:!1}),c}catch{throw new Error("Error converting schema to JSON.")}}function Be(r,t){const e=t??{seen:new Set};if(e.seen.has(r))return!1;e.seen.add(r);const i=r._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return Be(i.element,e);if(i.type==="set")return Be(i.valueType,e);if(i.type==="lazy")return Be(i.getter(),e);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return Be(i.innerType,e);if(i.type==="intersection")return Be(i.left,e)||Be(i.right,e);if(i.type==="record"||i.type==="map")return Be(i.keyType,e)||Be(i.valueType,e);if(i.type==="pipe")return Be(i.in,e)||Be(i.out,e);if(i.type==="object"){for(const a in i.shape)if(Be(i.shape[a],e))return!0;return!1}if(i.type==="union"){for(const a of i.options)if(Be(a,e))return!0;return!1}if(i.type==="tuple"){for(const a of i.items)if(Be(a,e))return!0;return!!(i.rest&&Be(i.rest,e))}return!1}const Kw=(r,t={})=>e=>{const i=bb({...e,processors:t});return Ne(r,i),vb(i,r),_b(i,r)},Bl=(r,t,e={})=>i=>{const{libraryOptions:a,target:l}=i??{},c=bb({...a??{},target:l,io:t,processors:e});return Ne(r,c),vb(c,r),_b(c,r)},Jw={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Qw=(r,t,e,i)=>{const a=e;a.type="string";const{minimum:l,maximum:c,format:h,patterns:d,contentEncoding:f}=r._zod.bag;if(typeof l=="number"&&(a.minLength=l),typeof c=="number"&&(a.maxLength=c),h&&(a.format=Jw[h]??h,a.format===""&&delete a.format,h==="time"&&delete a.format),f&&(a.contentEncoding=f),d&&d.size>0){const g=[...d];g.length===1?a.pattern=g[0].source:g.length>1&&(a.allOf=[...g.map(y=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:y.source}))])}},Ww=(r,t,e,i)=>{e.not={}},t1=(r,t,e,i)=>{},e1=(r,t,e,i)=>{const a=r._zod.def,l=eb(a.entries);l.every(c=>typeof c=="number")&&(e.type="number"),l.every(c=>typeof c=="string")&&(e.type="string"),e.enum=l},n1=(r,t,e,i)=>{const a=r._zod.def,l=[];for(const c of a.values)if(c===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof c=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");l.push(Number(c))}else l.push(c);if(l.length!==0)if(l.length===1){const c=l[0];e.type=c===null?"null":typeof c,t.target==="draft-04"||t.target==="openapi-3.0"?e.enum=[c]:e.const=c}else l.every(c=>typeof c=="number")&&(e.type="number"),l.every(c=>typeof c=="string")&&(e.type="string"),l.every(c=>typeof c=="boolean")&&(e.type="boolean"),l.every(c=>c===null)&&(e.type="null"),e.enum=l},i1=(r,t,e,i)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},s1=(r,t,e,i)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},a1=(r,t,e,i)=>{const a=e,l=r._zod.def,{minimum:c,maximum:h}=r._zod.bag;typeof c=="number"&&(a.minItems=c),typeof h=="number"&&(a.maxItems=h),a.type="array",a.items=Ne(l.element,t,{...i,path:[...i.path,"items"]})},r1=(r,t,e,i)=>{const a=e,l=r._zod.def;a.type="object",a.properties={};const c=l.shape;for(const f in c)a.properties[f]=Ne(c[f],t,{...i,path:[...i.path,"properties",f]});const h=new Set(Object.keys(c)),d=new Set([...h].filter(f=>{const g=l.shape[f]._zod;return t.io==="input"?g.optin===void 0:g.optout===void 0}));d.size>0&&(a.required=Array.from(d)),l.catchall?._zod.def.type==="never"?a.additionalProperties=!1:l.catchall?l.catchall&&(a.additionalProperties=Ne(l.catchall,t,{...i,path:[...i.path,"additionalProperties"]})):t.io==="output"&&(a.additionalProperties=!1)},o1=(r,t,e,i)=>{const a=r._zod.def,l=a.inclusive===!1,c=a.options.map((h,d)=>Ne(h,t,{...i,path:[...i.path,l?"oneOf":"anyOf",d]}));l?e.oneOf=c:e.anyOf=c},l1=(r,t,e,i)=>{const a=r._zod.def,l=Ne(a.left,t,{...i,path:[...i.path,"allOf",0]}),c=Ne(a.right,t,{...i,path:[...i.path,"allOf",1]}),h=f=>"allOf"in f&&Object.keys(f).length===1,d=[...h(l)?l.allOf:[l],...h(c)?c.allOf:[c]];e.allOf=d},c1=(r,t,e,i)=>{const a=r._zod.def,l=Ne(a.innerType,t,i),c=t.seen.get(r);t.target==="openapi-3.0"?(c.ref=a.innerType,e.nullable=!0):e.anyOf=[l,{type:"null"}]},u1=(r,t,e,i)=>{const a=r._zod.def;Ne(a.innerType,t,i);const l=t.seen.get(r);l.ref=a.innerType},h1=(r,t,e,i)=>{const a=r._zod.def;Ne(a.innerType,t,i);const l=t.seen.get(r);l.ref=a.innerType,e.default=JSON.parse(JSON.stringify(a.defaultValue))},d1=(r,t,e,i)=>{const a=r._zod.def;Ne(a.innerType,t,i);const l=t.seen.get(r);l.ref=a.innerType,t.io==="input"&&(e._prefault=JSON.parse(JSON.stringify(a.defaultValue)))},f1=(r,t,e,i)=>{const a=r._zod.def;Ne(a.innerType,t,i);const l=t.seen.get(r);l.ref=a.innerType;let c;try{c=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}e.default=c},p1=(r,t,e,i)=>{const a=r._zod.def,l=t.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;Ne(l,t,i);const c=t.seen.get(r);c.ref=l},g1=(r,t,e,i)=>{const a=r._zod.def;Ne(a.innerType,t,i);const l=t.seen.get(r);l.ref=a.innerType,e.readOnly=!0},Ab=(r,t,e,i)=>{const a=r._zod.def;Ne(a.innerType,t,i);const l=t.seen.get(r);l.ref=a.innerType},m1=Y("ZodISODateTime",(r,t)=>{xS.init(r,t),Wt.init(r,t)});function y1(r){return Ow(m1,r)}const b1=Y("ZodISODate",(r,t)=>{CS.init(r,t),Wt.init(r,t)});function v1(r){return Mw(b1,r)}const _1=Y("ZodISOTime",(r,t)=>{RS.init(r,t),Wt.init(r,t)});function A1(r){return Dw(_1,r)}const S1=Y("ZodISODuration",(r,t)=>{OS.init(r,t),Wt.init(r,t)});function w1(r){return Nw(S1,r)}const E1=(r,t)=>{rb.init(r,t),r.name="ZodError",Object.defineProperties(r,{format:{value:e=>wA(r,e)},flatten:{value:e=>SA(r,e)},addIssue:{value:e=>{r.issues.push(e),r.message=JSON.stringify(r.issues,Gh,2)}},addIssues:{value:e=>{r.issues.push(...e),r.message=JSON.stringify(r.issues,Gh,2)}},isEmpty:{get(){return r.issues.length===0}}})},xn=Y("ZodError",E1,{Parent:Error}),T1=fd(xn),x1=pd(xn),C1=ql(xn),R1=Gl(xn),O1=xA(xn),M1=CA(xn),D1=RA(xn),N1=OA(xn),k1=MA(xn),L1=DA(xn),z1=NA(xn),B1=kA(xn),ye=Y("ZodType",(r,t)=>(me.init(r,t),Object.assign(r["~standard"],{jsonSchema:{input:Bl(r,"input"),output:Bl(r,"output")}}),r.toJSONSchema=Kw(r,{}),r.def=t,r.type=t.type,Object.defineProperty(r,"_def",{value:t}),r.check=(...e)=>r.clone(Vi(t,{checks:[...t.checks??[],...e.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),r.with=r.check,r.clone=(e,i)=>Xi(r,e,i),r.brand=()=>r,r.register=((e,i)=>(e.add(r,i),r)),r.parse=(e,i)=>T1(r,e,i,{callee:r.parse}),r.safeParse=(e,i)=>C1(r,e,i),r.parseAsync=async(e,i)=>x1(r,e,i,{callee:r.parseAsync}),r.safeParseAsync=async(e,i)=>R1(r,e,i),r.spa=r.safeParseAsync,r.encode=(e,i)=>O1(r,e,i),r.decode=(e,i)=>M1(r,e,i),r.encodeAsync=async(e,i)=>D1(r,e,i),r.decodeAsync=async(e,i)=>N1(r,e,i),r.safeEncode=(e,i)=>k1(r,e,i),r.safeDecode=(e,i)=>L1(r,e,i),r.safeEncodeAsync=async(e,i)=>z1(r,e,i),r.safeDecodeAsync=async(e,i)=>B1(r,e,i),r.refine=(e,i)=>r.check(OE(e,i)),r.superRefine=e=>r.check(ME(e)),r.overwrite=e=>r.check(xa(e)),r.optional=()=>uy(r),r.exactOptional=()=>mE(r),r.nullable=()=>hy(r),r.nullish=()=>uy(hy(r)),r.nonoptional=e=>SE(r,e),r.array=()=>pi(r),r.or=e=>rE([r,e]),r.and=e=>uE(r,e),r.transform=e=>dy(r,pE(e)),r.default=e=>vE(r,e),r.prefault=e=>AE(r,e),r.catch=e=>EE(r,e),r.pipe=e=>dy(r,e),r.readonly=()=>CE(r),r.describe=e=>{const i=r.clone();return Mr.add(i,{description:e}),i},Object.defineProperty(r,"description",{get(){return Mr.get(r)?.description},configurable:!0}),r.meta=(...e)=>{if(e.length===0)return Mr.get(r);const i=r.clone();return Mr.add(i,e[0]),i},r.isOptional=()=>r.safeParse(void 0).success,r.isNullable=()=>r.safeParse(null).success,r.apply=e=>e(r),r)),Sb=Y("_ZodString",(r,t)=>{gd.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(i,a,l)=>Qw(r,i,a);const e=r._zod.bag;r.format=e.format??null,r.minLength=e.minimum??null,r.maxLength=e.maximum??null,r.regex=(...i)=>r.check(zw(...i)),r.includes=(...i)=>r.check(jw(...i)),r.startsWith=(...i)=>r.check(Fw(...i)),r.endsWith=(...i)=>r.check(Iw(...i)),r.min=(...i)=>r.check(zl(...i)),r.max=(...i)=>r.check(mb(...i)),r.length=(...i)=>r.check(yb(...i)),r.nonempty=(...i)=>r.check(zl(1,...i)),r.lowercase=i=>r.check(Bw(i)),r.uppercase=i=>r.check(Pw(i)),r.trim=()=>r.check(Hw()),r.normalize=(...i)=>r.check(Uw(...i)),r.toLowerCase=()=>r.check(qw()),r.toUpperCase=()=>r.check(Gw()),r.slugify=()=>r.check($w())}),P1=Y("ZodString",(r,t)=>{gd.init(r,t),Sb.init(r,t),r.email=e=>r.check(lw(j1,e)),r.url=e=>r.check(fw(F1,e)),r.jwt=e=>r.check(Rw(tE,e)),r.emoji=e=>r.check(pw(I1,e)),r.guid=e=>r.check(oy(ly,e)),r.uuid=e=>r.check(cw(bl,e)),r.uuidv4=e=>r.check(uw(bl,e)),r.uuidv6=e=>r.check(hw(bl,e)),r.uuidv7=e=>r.check(dw(bl,e)),r.nanoid=e=>r.check(gw(U1,e)),r.guid=e=>r.check(oy(ly,e)),r.cuid=e=>r.check(mw(H1,e)),r.cuid2=e=>r.check(yw(q1,e)),r.ulid=e=>r.check(bw(G1,e)),r.base64=e=>r.check(Tw(J1,e)),r.base64url=e=>r.check(xw(Q1,e)),r.xid=e=>r.check(vw($1,e)),r.ksuid=e=>r.check(_w(V1,e)),r.ipv4=e=>r.check(Aw(X1,e)),r.ipv6=e=>r.check(Sw(Z1,e)),r.cidrv4=e=>r.check(ww(Y1,e)),r.cidrv6=e=>r.check(Ew(K1,e)),r.e164=e=>r.check(Cw(W1,e)),r.datetime=e=>r.check(y1(e)),r.date=e=>r.check(v1(e)),r.time=e=>r.check(A1(e)),r.duration=e=>r.check(w1(e))});function Bt(r){return ow(P1,r)}const Wt=Y("ZodStringFormat",(r,t)=>{Kt.init(r,t),Sb.init(r,t)}),j1=Y("ZodEmail",(r,t)=>{yS.init(r,t),Wt.init(r,t)}),ly=Y("ZodGUID",(r,t)=>{gS.init(r,t),Wt.init(r,t)}),bl=Y("ZodUUID",(r,t)=>{mS.init(r,t),Wt.init(r,t)}),F1=Y("ZodURL",(r,t)=>{bS.init(r,t),Wt.init(r,t)}),I1=Y("ZodEmoji",(r,t)=>{vS.init(r,t),Wt.init(r,t)}),U1=Y("ZodNanoID",(r,t)=>{_S.init(r,t),Wt.init(r,t)}),H1=Y("ZodCUID",(r,t)=>{AS.init(r,t),Wt.init(r,t)}),q1=Y("ZodCUID2",(r,t)=>{SS.init(r,t),Wt.init(r,t)}),G1=Y("ZodULID",(r,t)=>{wS.init(r,t),Wt.init(r,t)}),$1=Y("ZodXID",(r,t)=>{ES.init(r,t),Wt.init(r,t)}),V1=Y("ZodKSUID",(r,t)=>{TS.init(r,t),Wt.init(r,t)}),X1=Y("ZodIPv4",(r,t)=>{MS.init(r,t),Wt.init(r,t)}),Z1=Y("ZodIPv6",(r,t)=>{DS.init(r,t),Wt.init(r,t)}),Y1=Y("ZodCIDRv4",(r,t)=>{NS.init(r,t),Wt.init(r,t)}),K1=Y("ZodCIDRv6",(r,t)=>{kS.init(r,t),Wt.init(r,t)}),J1=Y("ZodBase64",(r,t)=>{LS.init(r,t),Wt.init(r,t)}),Q1=Y("ZodBase64URL",(r,t)=>{BS.init(r,t),Wt.init(r,t)}),W1=Y("ZodE164",(r,t)=>{PS.init(r,t),Wt.init(r,t)}),tE=Y("ZodJWT",(r,t)=>{FS.init(r,t),Wt.init(r,t)}),eE=Y("ZodUnknown",(r,t)=>{IS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>t1()});function cy(){return kw(eE)}const nE=Y("ZodNever",(r,t)=>{US.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>Ww(r,e,i)});function iE(r){return Lw(nE,r)}const sE=Y("ZodArray",(r,t)=>{HS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>a1(r,e,i,a),r.element=t.element,r.min=(e,i)=>r.check(zl(e,i)),r.nonempty=e=>r.check(zl(1,e)),r.max=(e,i)=>r.check(mb(e,i)),r.length=(e,i)=>r.check(yb(e,i)),r.unwrap=()=>r.element});function pi(r,t){return Vw(sE,r,t)}const aE=Y("ZodObject",(r,t)=>{GS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>r1(r,e,i,a),Pt(r,"shape",()=>t.shape),r.keyof=()=>hE(Object.keys(r._zod.def.shape)),r.catchall=e=>r.clone({...r._zod.def,catchall:e}),r.passthrough=()=>r.clone({...r._zod.def,catchall:cy()}),r.loose=()=>r.clone({...r._zod.def,catchall:cy()}),r.strict=()=>r.clone({...r._zod.def,catchall:iE()}),r.strip=()=>r.clone({...r._zod.def,catchall:void 0}),r.extend=e=>yA(r,e),r.safeExtend=e=>bA(r,e),r.merge=e=>vA(r,e),r.pick=e=>gA(r,e),r.omit=e=>mA(r,e),r.partial=(...e)=>_A(Eb,r,e[0]),r.required=(...e)=>AA(Tb,r,e[0])});function gi(r,t){const e={type:"object",shape:r??{},...pt(t)};return new aE(e)}const wb=Y("ZodUnion",(r,t)=>{pb.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>o1(r,e,i,a),r.options=t.options});function rE(r,t){return new wb({type:"union",options:r,...pt(t)})}const oE=Y("ZodDiscriminatedUnion",(r,t)=>{wb.init(r,t),$S.init(r,t)});function lE(r,t,e){return new oE({type:"union",options:t,discriminator:r,...pt(e)})}const cE=Y("ZodIntersection",(r,t)=>{VS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>l1(r,e,i,a)});function uE(r,t){return new cE({type:"intersection",left:r,right:t})}const Vh=Y("ZodEnum",(r,t)=>{XS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(i,a,l)=>e1(r,i,a),r.enum=t.entries,r.options=Object.values(t.entries);const e=new Set(Object.keys(t.entries));r.extract=(i,a)=>{const l={};for(const c of i)if(e.has(c))l[c]=t.entries[c];else throw new Error(`Key ${c} not found in enum`);return new Vh({...t,checks:[],...pt(a),entries:l})},r.exclude=(i,a)=>{const l={...t.entries};for(const c of i)if(e.has(c))delete l[c];else throw new Error(`Key ${c} not found in enum`);return new Vh({...t,checks:[],...pt(a),entries:l})}});function hE(r,t){const e=Array.isArray(r)?Object.fromEntries(r.map(i=>[i,i])):r;return new Vh({type:"enum",entries:e,...pt(t)})}const dE=Y("ZodLiteral",(r,t)=>{ZS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>n1(r,e,i),r.values=new Set(t.values),Object.defineProperty(r,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Vl(r,t){return new dE({type:"literal",values:Array.isArray(r)?r:[r],...pt(t)})}const fE=Y("ZodTransform",(r,t)=>{YS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>s1(r,e),r._zod.parse=(e,i)=>{if(i.direction==="backward")throw new Wy(r.constructor.name);e.addIssue=l=>{if(typeof l=="string")e.issues.push(Pr(l,e.value,t));else{const c=l;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=e.value),c.inst??(c.inst=r),e.issues.push(Pr(c))}};const a=t.transform(e.value,e);return a instanceof Promise?a.then(l=>(e.value=l,e)):(e.value=a,e)}});function pE(r){return new fE({type:"transform",transform:r})}const Eb=Y("ZodOptional",(r,t)=>{gb.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>Ab(r,e,i,a),r.unwrap=()=>r._zod.def.innerType});function uy(r){return new Eb({type:"optional",innerType:r})}const gE=Y("ZodExactOptional",(r,t)=>{KS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>Ab(r,e,i,a),r.unwrap=()=>r._zod.def.innerType});function mE(r){return new gE({type:"optional",innerType:r})}const yE=Y("ZodNullable",(r,t)=>{JS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>c1(r,e,i,a),r.unwrap=()=>r._zod.def.innerType});function hy(r){return new yE({type:"nullable",innerType:r})}const bE=Y("ZodDefault",(r,t)=>{QS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>h1(r,e,i,a),r.unwrap=()=>r._zod.def.innerType,r.removeDefault=r.unwrap});function vE(r,t){return new bE({type:"default",innerType:r,get defaultValue(){return typeof t=="function"?t():ib(t)}})}const _E=Y("ZodPrefault",(r,t)=>{WS.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>d1(r,e,i,a),r.unwrap=()=>r._zod.def.innerType});function AE(r,t){return new _E({type:"prefault",innerType:r,get defaultValue(){return typeof t=="function"?t():ib(t)}})}const Tb=Y("ZodNonOptional",(r,t)=>{tw.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>u1(r,e,i,a),r.unwrap=()=>r._zod.def.innerType});function SE(r,t){return new Tb({type:"nonoptional",innerType:r,...pt(t)})}const wE=Y("ZodCatch",(r,t)=>{ew.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>f1(r,e,i,a),r.unwrap=()=>r._zod.def.innerType,r.removeCatch=r.unwrap});function EE(r,t){return new wE({type:"catch",innerType:r,catchValue:typeof t=="function"?t:()=>t})}const TE=Y("ZodPipe",(r,t)=>{nw.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>p1(r,e,i,a),r.in=t.in,r.out=t.out});function dy(r,t){return new TE({type:"pipe",in:r,out:t})}const xE=Y("ZodReadonly",(r,t)=>{iw.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>g1(r,e,i,a),r.unwrap=()=>r._zod.def.innerType});function CE(r){return new xE({type:"readonly",innerType:r})}const RE=Y("ZodCustom",(r,t)=>{sw.init(r,t),ye.init(r,t),r._zod.processJSONSchema=(e,i,a)=>i1(r,e)});function OE(r,t={}){return Xw(RE,r,t)}function ME(r){return Zw(r)}const DE=({section:r})=>L.jsx("div",{className:"space-y-4",children:r.items.map((t,e)=>L.jsxs("div",{children:[L.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-x-4",children:[L.jsx("span",{className:"text-base font-semibold",children:t.role}),L.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:t.duration})]}),L.jsxs("div",{className:"grid grid-cols-2 text-xs text-gray-700",children:[L.jsx("span",{children:t.company}),L.jsx("span",{className:"text-right",children:t.location})]}),L.jsx("ul",{className:"mt-1 list-disc space-y-1 pl-5",children:t.bullets.map((i,a)=>L.jsx("li",{children:i},a))})]},e))}),NE=({section:r})=>L.jsx("div",{className:"space-y-3",children:r.items.map((t,e)=>L.jsxs("div",{children:[L.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-x-4",children:[L.jsxs("span",{className:"font-semibold text-base",children:[t.degree,t.gpa&&L.jsxs("span",{className:"text-xs text-gray-700",children:[", GPA: ",t.gpa]})]}),L.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:t.duration})]}),L.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-x-4 text-xs text-gray-700",children:[L.jsx("span",{children:t.institution}),L.jsx("span",{children:t.location})]})]},e))}),kE=({section:r})=>L.jsx("div",{className:"space-y-2",children:r.items.map((t,e)=>L.jsxs("div",{children:[L.jsxs("span",{className:"font-semibold",children:[t.category,": "]}),L.jsx("span",{className:"text-gray-700",children:t.items.join(", ")})]},e))}),LE=({section:r})=>L.jsx("div",{className:"space-y-3",children:r.items.map((t,e)=>L.jsxs("div",{children:[L.jsx("p",{className:"font-semibold",children:t.label}),t.value&&L.jsx("p",{className:"text-gray-700",children:t.value}),t.bullets&&L.jsx("ul",{className:"mt-1 list-disc space-y-1 pl-5",children:t.bullets.map((i,a)=>L.jsx("li",{children:i},a))})]},e))}),fy=({title:r,children:t})=>L.jsxs("section",{className:"mt-6 print:mt-4",children:[L.jsx("h2",{className:"mb-2 border-b border-gray-300 pb-1 text-base font-semibold uppercase tracking-wide text-gray-700 print:text-black",children:r}),t]}),zE={experience:DE,education:NE,skills:kE,custom:LE},BE=({data:r})=>L.jsxs("div",{id:"resume",className:"mx-auto bg-white p-8 text-sm text-gray-900 max-w-[210mm]",children:[L.jsxs("header",{className:"flex flex-col gap-2",children:[L.jsx("h1",{className:"text-2xl font-bold",children:r.name}),L.jsx("h2",{className:"text-xl text-gray-700",children:r.title}),L.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-600",children:[L.jsx("span",{children:r.phone}),L.jsx("span",{children:r.email}),L.jsx("span",{children:r.location}),r.nationality&&L.jsx("span",{children:r.nationality}),r.extraField&&L.jsx("span",{children:r.extraField})]})]}),L.jsx(fy,{title:"Summary",children:L.jsx("p",{className:"leading-relaxed",children:r.summary})}),r.sections.map(t=>{const e=zE[t.type];return L.jsx(fy,{title:t.title,children:L.jsx(e,{section:t})},t.id)})]}),PE=({resumeData:r})=>{const t=()=>{const e=document.getElementById("resume");if(!e)return;const i=e.cloneNode(!0);i.classList.add("print-only");const a=document.querySelector(".app-root");a?.classList.add("printing-hidden"),document.body.appendChild(i),window.print(),document.body.removeChild(i),a?.classList.remove("printing-hidden")};return L.jsxs("main",{className:"col-span-12 lg:col-span-6 bg-base-100 rounded-xl shadow p-4 flex flex-col overflow-hidden",children:[L.jsxs("div",{className:"flex items-center justify-between mb-4",children:[L.jsx("h2",{className:"font-semibold",children:"Preview"}),L.jsx("button",{onClick:t,className:"btn btn-sm btn-primary",children:"Download PDF"})]}),L.jsx("div",{className:"flex-1 overflow-y-auto rounded-lg bg-base-200 p-4",children:L.jsx(BE,{data:r})})]})};let jE=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");function xb(r,t){return function(){return r.apply(t,arguments)}}const{toString:FE}=Object.prototype,{getPrototypeOf:md}=Object,{iterator:Xl,toStringTag:Cb}=Symbol,Zl=(r=>t=>{const e=FE.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Dn=r=>(r=r.toLowerCase(),t=>Zl(t)===r),Yl=r=>t=>typeof t===r,{isArray:Ca}=Array,Ea=Yl("undefined");function Hr(r){return r!==null&&!Ea(r)&&r.constructor!==null&&!Ea(r.constructor)&&Je(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Rb=Dn("ArrayBuffer");function IE(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&Rb(r.buffer),t}const UE=Yl("string"),Je=Yl("function"),Ob=Yl("number"),qr=r=>r!==null&&typeof r=="object",HE=r=>r===!0||r===!1,Rl=r=>{if(Zl(r)!=="object")return!1;const t=md(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Cb in r)&&!(Xl in r)},qE=r=>{if(!qr(r)||Hr(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},GE=Dn("Date"),$E=Dn("File"),VE=Dn("Blob"),XE=Dn("FileList"),ZE=r=>qr(r)&&Je(r.pipe),YE=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Je(r.append)&&((t=Zl(r))==="formdata"||t==="object"&&Je(r.toString)&&r.toString()==="[object FormData]"))},KE=Dn("URLSearchParams"),[JE,QE,WE,tT]=["ReadableStream","Request","Response","Headers"].map(Dn),eT=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gr(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let i,a;if(typeof r!="object"&&(r=[r]),Ca(r))for(i=0,a=r.length;i<a;i++)t.call(null,r[i],i,r);else{if(Hr(r))return;const l=e?Object.getOwnPropertyNames(r):Object.keys(r),c=l.length;let h;for(i=0;i<c;i++)h=l[i],t.call(null,r[h],h,r)}}function Mb(r,t){if(Hr(r))return null;t=t.toLowerCase();const e=Object.keys(r);let i=e.length,a;for(;i-- >0;)if(a=e[i],t===a.toLowerCase())return a;return null}const ps=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Db=r=>!Ea(r)&&r!==ps;function Xh(){const{caseless:r,skipUndefined:t}=Db(this)&&this||{},e={},i=(a,l)=>{const c=r&&Mb(e,l)||l;Rl(e[c])&&Rl(a)?e[c]=Xh(e[c],a):Rl(a)?e[c]=Xh({},a):Ca(a)?e[c]=a.slice():(!t||!Ea(a))&&(e[c]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Gr(arguments[a],i);return e}const nT=(r,t,e,{allOwnKeys:i}={})=>(Gr(t,(a,l)=>{e&&Je(a)?r[l]=xb(a,e):r[l]=a},{allOwnKeys:i}),r),iT=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),sT=(r,t,e,i)=>{r.prototype=Object.create(t.prototype,i),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},aT=(r,t,e,i)=>{let a,l,c;const h={};if(t=t||{},r==null)return t;do{for(a=Object.getOwnPropertyNames(r),l=a.length;l-- >0;)c=a[l],(!i||i(c,r,t))&&!h[c]&&(t[c]=r[c],h[c]=!0);r=e!==!1&&md(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},rT=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const i=r.indexOf(t,e);return i!==-1&&i===e},oT=r=>{if(!r)return null;if(Ca(r))return r;let t=r.length;if(!Ob(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},lT=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&md(Uint8Array)),cT=(r,t)=>{const i=(r&&r[Xl]).call(r);let a;for(;(a=i.next())&&!a.done;){const l=a.value;t.call(r,l[0],l[1])}},uT=(r,t)=>{let e;const i=[];for(;(e=r.exec(t))!==null;)i.push(e);return i},hT=Dn("HTMLFormElement"),dT=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,a){return i.toUpperCase()+a}),py=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),fT=Dn("RegExp"),Nb=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),i={};Gr(e,(a,l)=>{let c;(c=t(a,l,r))!==!1&&(i[l]=c||a)}),Object.defineProperties(r,i)},pT=r=>{Nb(r,(t,e)=>{if(Je(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=r[e];if(Je(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},gT=(r,t)=>{const e={},i=a=>{a.forEach(l=>{e[l]=!0})};return Ca(r)?i(r):i(String(r).split(t)),e},mT=()=>{},yT=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function bT(r){return!!(r&&Je(r.append)&&r[Cb]==="FormData"&&r[Xl])}const vT=r=>{const t=new Array(10),e=(i,a)=>{if(qr(i)){if(t.indexOf(i)>=0)return;if(Hr(i))return i;if(!("toJSON"in i)){t[a]=i;const l=Ca(i)?[]:{};return Gr(i,(c,h)=>{const d=e(c,a+1);!Ea(d)&&(l[h]=d)}),t[a]=void 0,l}}return i};return e(r,0)},_T=Dn("AsyncFunction"),AT=r=>r&&(qr(r)||Je(r))&&Je(r.then)&&Je(r.catch),kb=((r,t)=>r?setImmediate:t?((e,i)=>(ps.addEventListener("message",({source:a,data:l})=>{a===ps&&l===e&&i.length&&i.shift()()},!1),a=>{i.push(a),ps.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Je(ps.postMessage)),ST=typeof queueMicrotask<"u"?queueMicrotask.bind(ps):typeof process<"u"&&process.nextTick||kb,wT=r=>r!=null&&Je(r[Xl]),U={isArray:Ca,isArrayBuffer:Rb,isBuffer:Hr,isFormData:YE,isArrayBufferView:IE,isString:UE,isNumber:Ob,isBoolean:HE,isObject:qr,isPlainObject:Rl,isEmptyObject:qE,isReadableStream:JE,isRequest:QE,isResponse:WE,isHeaders:tT,isUndefined:Ea,isDate:GE,isFile:$E,isBlob:VE,isRegExp:fT,isFunction:Je,isStream:ZE,isURLSearchParams:KE,isTypedArray:lT,isFileList:XE,forEach:Gr,merge:Xh,extend:nT,trim:eT,stripBOM:iT,inherits:sT,toFlatObject:aT,kindOf:Zl,kindOfTest:Dn,endsWith:rT,toArray:oT,forEachEntry:cT,matchAll:uT,isHTMLForm:hT,hasOwnProperty:py,hasOwnProp:py,reduceDescriptors:Nb,freezeMethods:pT,toObjectSet:gT,toCamelCase:dT,noop:mT,toFiniteNumber:yT,findKey:Mb,global:ps,isContextDefined:Db,isSpecCompliantForm:bT,toJSONObject:vT,isAsyncFn:_T,isThenable:AT,setImmediate:kb,asap:ST,isIterable:wT};function St(r,t,e,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}U.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const Lb=St.prototype,zb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{zb[r]={value:r}});Object.defineProperties(St,zb);Object.defineProperty(Lb,"isAxiosError",{value:!0});St.from=(r,t,e,i,a,l)=>{const c=Object.create(Lb);U.toFlatObject(r,c,function(g){return g!==Error.prototype},f=>f!=="isAxiosError");const h=r&&r.message?r.message:"Error",d=t==null&&r?r.code:t;return St.call(c,h,d,e,i,a),r&&c.cause==null&&Object.defineProperty(c,"cause",{value:r,configurable:!0}),c.name=r&&r.name||"Error",l&&Object.assign(c,l),c};const ET=null;function Zh(r){return U.isPlainObject(r)||U.isArray(r)}function Bb(r){return U.endsWith(r,"[]")?r.slice(0,-2):r}function gy(r,t,e){return r?r.concat(t).map(function(a,l){return a=Bb(a),!e&&l?"["+a+"]":a}).join(e?".":""):t}function TT(r){return U.isArray(r)&&!r.some(Zh)}const xT=U.toFlatObject(U,{},null,function(t){return/^is[A-Z]/.test(t)});function Kl(r,t,e){if(!U.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=U.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,E){return!U.isUndefined(E[S])});const i=e.metaTokens,a=e.visitor||g,l=e.dots,c=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(a))throw new TypeError("visitor must be a function");function f(A){if(A===null)return"";if(U.isDate(A))return A.toISOString();if(U.isBoolean(A))return A.toString();if(!d&&U.isBlob(A))throw new St("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(A)||U.isTypedArray(A)?d&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function g(A,S,E){let T=A;if(A&&!E&&typeof A=="object"){if(U.endsWith(S,"{}"))S=i?S:S.slice(0,-2),A=JSON.stringify(A);else if(U.isArray(A)&&TT(A)||(U.isFileList(A)||U.endsWith(S,"[]"))&&(T=U.toArray(A)))return S=Bb(S),T.forEach(function(x,D){!(U.isUndefined(x)||x===null)&&t.append(c===!0?gy([S],D,l):c===null?S:S+"[]",f(x))}),!1}return Zh(A)?!0:(t.append(gy(E,S,l),f(A)),!1)}const y=[],b=Object.assign(xT,{defaultVisitor:g,convertValue:f,isVisitable:Zh});function v(A,S){if(!U.isUndefined(A)){if(y.indexOf(A)!==-1)throw Error("Circular reference detected in "+S.join("."));y.push(A),U.forEach(A,function(T,O){(!(U.isUndefined(T)||T===null)&&a.call(t,T,U.isString(O)?O.trim():O,S,b))===!0&&v(T,S?S.concat(O):[O])}),y.pop()}}if(!U.isObject(r))throw new TypeError("data must be an object");return v(r),t}function my(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function yd(r,t){this._pairs=[],r&&Kl(r,this,t)}const Pb=yd.prototype;Pb.append=function(t,e){this._pairs.push([t,e])};Pb.toString=function(t){const e=t?function(i){return t.call(this,i,my)}:my;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function CT(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function jb(r,t,e){if(!t)return r;const i=e&&e.encode||CT;U.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let l;if(a?l=a(t,e):l=U.isURLSearchParams(t)?t.toString():new yd(t,e).toString(i),l){const c=r.indexOf("#");c!==-1&&(r=r.slice(0,c)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class yy{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){U.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Fb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RT=typeof URLSearchParams<"u"?URLSearchParams:yd,OT=typeof FormData<"u"?FormData:null,MT=typeof Blob<"u"?Blob:null,DT={isBrowser:!0,classes:{URLSearchParams:RT,FormData:OT,Blob:MT},protocols:["http","https","file","blob","url","data"]},bd=typeof window<"u"&&typeof document<"u",Yh=typeof navigator=="object"&&navigator||void 0,NT=bd&&(!Yh||["ReactNative","NativeScript","NS"].indexOf(Yh.product)<0),kT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LT=bd&&window.location.href||"http://localhost",zT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bd,hasStandardBrowserEnv:NT,hasStandardBrowserWebWorkerEnv:kT,navigator:Yh,origin:LT},Symbol.toStringTag,{value:"Module"})),Le={...zT,...DT};function BT(r,t){return Kl(r,new Le.classes.URLSearchParams,{visitor:function(e,i,a,l){return Le.isNode&&U.isBuffer(e)?(this.append(i,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function PT(r){return U.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jT(r){const t={},e=Object.keys(r);let i;const a=e.length;let l;for(i=0;i<a;i++)l=e[i],t[l]=r[l];return t}function Ib(r){function t(e,i,a,l){let c=e[l++];if(c==="__proto__")return!0;const h=Number.isFinite(+c),d=l>=e.length;return c=!c&&U.isArray(a)?a.length:c,d?(U.hasOwnProp(a,c)?a[c]=[a[c],i]:a[c]=i,!h):((!a[c]||!U.isObject(a[c]))&&(a[c]=[]),t(e,i,a[c],l)&&U.isArray(a[c])&&(a[c]=jT(a[c])),!h)}if(U.isFormData(r)&&U.isFunction(r.entries)){const e={};return U.forEachEntry(r,(i,a)=>{t(PT(i),a,e,0)}),e}return null}function FT(r,t,e){if(U.isString(r))try{return(t||JSON.parse)(r),U.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(r)}const $r={transitional:Fb,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",a=i.indexOf("application/json")>-1,l=U.isObject(t);if(l&&U.isHTMLForm(t)&&(t=new FormData(t)),U.isFormData(t))return a?JSON.stringify(Ib(t)):t;if(U.isArrayBuffer(t)||U.isBuffer(t)||U.isStream(t)||U.isFile(t)||U.isBlob(t)||U.isReadableStream(t))return t;if(U.isArrayBufferView(t))return t.buffer;if(U.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return BT(t,this.formSerializer).toString();if((h=U.isFileList(t))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Kl(h?{"files[]":t}:t,d&&new d,this.formSerializer)}}return l||a?(e.setContentType("application/json",!1),FT(t)):t}],transformResponse:[function(t){const e=this.transitional||$r.transitional,i=e&&e.forcedJSONParsing,a=this.responseType==="json";if(U.isResponse(t)||U.isReadableStream(t))return t;if(t&&U.isString(t)&&(i&&!this.responseType||a)){const c=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(h){if(c)throw h.name==="SyntaxError"?St.from(h,St.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Le.classes.FormData,Blob:Le.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],r=>{$r.headers[r]={}});const IT=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UT=r=>{const t={};let e,i,a;return r&&r.split(`
`).forEach(function(c){a=c.indexOf(":"),e=c.substring(0,a).trim().toLowerCase(),i=c.substring(a+1).trim(),!(!e||t[e]&&IT[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},by=Symbol("internals");function Er(r){return r&&String(r).trim().toLowerCase()}function Ol(r){return r===!1||r==null?r:U.isArray(r)?r.map(Ol):String(r)}function HT(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(r);)t[i[1]]=i[2];return t}const qT=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Mh(r,t,e,i,a){if(U.isFunction(i))return i.call(this,t,e);if(a&&(t=e),!!U.isString(t)){if(U.isString(i))return t.indexOf(i)!==-1;if(U.isRegExp(i))return i.test(t)}}function GT(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function $T(r,t){const e=U.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(r,i+e,{value:function(a,l,c){return this[i].call(this,t,a,l,c)},configurable:!0})})}let Qe=class{constructor(t){t&&this.set(t)}set(t,e,i){const a=this;function l(h,d,f){const g=Er(d);if(!g)throw new Error("header name must be a non-empty string");const y=U.findKey(a,g);(!y||a[y]===void 0||f===!0||f===void 0&&a[y]!==!1)&&(a[y||d]=Ol(h))}const c=(h,d)=>U.forEach(h,(f,g)=>l(f,g,d));if(U.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if(U.isString(t)&&(t=t.trim())&&!qT(t))c(UT(t),e);else if(U.isObject(t)&&U.isIterable(t)){let h={},d,f;for(const g of t){if(!U.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[f=g[0]]=(d=h[f])?U.isArray(d)?[...d,g[1]]:[d,g[1]]:g[1]}c(h,e)}else t!=null&&l(e,t,i);return this}get(t,e){if(t=Er(t),t){const i=U.findKey(this,t);if(i){const a=this[i];if(!e)return a;if(e===!0)return HT(a);if(U.isFunction(e))return e.call(this,a,i);if(U.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Er(t),t){const i=U.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Mh(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let a=!1;function l(c){if(c=Er(c),c){const h=U.findKey(i,c);h&&(!e||Mh(i,i[h],h,e))&&(delete i[h],a=!0)}}return U.isArray(t)?t.forEach(l):l(t),a}clear(t){const e=Object.keys(this);let i=e.length,a=!1;for(;i--;){const l=e[i];(!t||Mh(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const e=this,i={};return U.forEach(this,(a,l)=>{const c=U.findKey(i,l);if(c){e[c]=Ol(a),delete e[l];return}const h=t?GT(l):String(l).trim();h!==l&&delete e[l],e[h]=Ol(a),i[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return U.forEach(this,(i,a)=>{i!=null&&i!==!1&&(e[a]=t&&U.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[by]=this[by]={accessors:{}}).accessors,a=this.prototype;function l(c){const h=Er(c);i[h]||($T(a,c),i[h]=!0)}return U.isArray(t)?t.forEach(l):l(t),this}};Qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(Qe.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(i){this[e]=i}}});U.freezeMethods(Qe);function Dh(r,t){const e=this||$r,i=t||e,a=Qe.from(i.headers);let l=i.data;return U.forEach(r,function(h){l=h.call(e,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Ub(r){return!!(r&&r.__CANCEL__)}function Ra(r,t,e){St.call(this,r??"canceled",St.ERR_CANCELED,t,e),this.name="CanceledError"}U.inherits(Ra,St,{__CANCEL__:!0});function Hb(r,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?r(e):t(new St("Request failed with status code "+e.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function VT(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function XT(r,t){r=r||10;const e=new Array(r),i=new Array(r);let a=0,l=0,c;return t=t!==void 0?t:1e3,function(d){const f=Date.now(),g=i[l];c||(c=f),e[a]=d,i[a]=f;let y=l,b=0;for(;y!==a;)b+=e[y++],y=y%r;if(a=(a+1)%r,a===l&&(l=(l+1)%r),f-c<t)return;const v=g&&f-g;return v?Math.round(b*1e3/v):void 0}}function ZT(r,t){let e=0,i=1e3/t,a,l;const c=(f,g=Date.now())=>{e=g,a=null,l&&(clearTimeout(l),l=null),r(...f)};return[(...f)=>{const g=Date.now(),y=g-e;y>=i?c(f,g):(a=f,l||(l=setTimeout(()=>{l=null,c(a)},i-y)))},()=>a&&c(a)]}const Pl=(r,t,e=3)=>{let i=0;const a=XT(50,250);return ZT(l=>{const c=l.loaded,h=l.lengthComputable?l.total:void 0,d=c-i,f=a(d),g=c<=h;i=c;const y={loaded:c,total:h,progress:h?c/h:void 0,bytes:d,rate:f||void 0,estimated:f&&h&&g?(h-c)/f:void 0,event:l,lengthComputable:h!=null,[t?"download":"upload"]:!0};r(y)},e)},vy=(r,t)=>{const e=r!=null;return[i=>t[0]({lengthComputable:e,total:r,loaded:i}),t[1]]},_y=r=>(...t)=>U.asap(()=>r(...t)),YT=Le.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,Le.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(Le.origin),Le.navigator&&/(msie|trident)/i.test(Le.navigator.userAgent)):()=>!0,KT=Le.hasStandardBrowserEnv?{write(r,t,e,i,a,l,c){if(typeof document>"u")return;const h=[`${r}=${encodeURIComponent(t)}`];U.isNumber(e)&&h.push(`expires=${new Date(e).toUTCString()}`),U.isString(i)&&h.push(`path=${i}`),U.isString(a)&&h.push(`domain=${a}`),l===!0&&h.push("secure"),U.isString(c)&&h.push(`SameSite=${c}`),document.cookie=h.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function JT(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function QT(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function qb(r,t,e){let i=!JT(t);return r&&(i||e==!1)?QT(r,t):t}const Ay=r=>r instanceof Qe?{...r}:r;function Ss(r,t){t=t||{};const e={};function i(f,g,y,b){return U.isPlainObject(f)&&U.isPlainObject(g)?U.merge.call({caseless:b},f,g):U.isPlainObject(g)?U.merge({},g):U.isArray(g)?g.slice():g}function a(f,g,y,b){if(U.isUndefined(g)){if(!U.isUndefined(f))return i(void 0,f,y,b)}else return i(f,g,y,b)}function l(f,g){if(!U.isUndefined(g))return i(void 0,g)}function c(f,g){if(U.isUndefined(g)){if(!U.isUndefined(f))return i(void 0,f)}else return i(void 0,g)}function h(f,g,y){if(y in t)return i(f,g);if(y in r)return i(void 0,f)}const d={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h,headers:(f,g,y)=>a(Ay(f),Ay(g),y,!0)};return U.forEach(Object.keys({...r,...t}),function(g){const y=d[g]||a,b=y(r[g],t[g],g);U.isUndefined(b)&&y!==h||(e[g]=b)}),e}const Gb=r=>{const t=Ss({},r);let{data:e,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:h}=t;if(t.headers=c=Qe.from(c),t.url=jb(qb(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),h&&c.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),U.isFormData(e)){if(Le.hasStandardBrowserEnv||Le.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(U.isFunction(e.getHeaders)){const d=e.getHeaders(),f=["content-type","content-length"];Object.entries(d).forEach(([g,y])=>{f.includes(g.toLowerCase())&&c.set(g,y)})}}if(Le.hasStandardBrowserEnv&&(i&&U.isFunction(i)&&(i=i(t)),i||i!==!1&&YT(t.url))){const d=a&&l&&KT.read(l);d&&c.set(a,d)}return t},WT=typeof XMLHttpRequest<"u",tx=WT&&function(r){return new Promise(function(e,i){const a=Gb(r);let l=a.data;const c=Qe.from(a.headers).normalize();let{responseType:h,onUploadProgress:d,onDownloadProgress:f}=a,g,y,b,v,A;function S(){v&&v(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function T(){if(!E)return;const x=Qe.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),k={data:!h||h==="text"||h==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:x,config:r,request:E};Hb(function(F){e(F),S()},function(F){i(F),S()},k),E=null}"onloadend"in E?E.onloadend=T:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(T)},E.onabort=function(){E&&(i(new St("Request aborted",St.ECONNABORTED,r,E)),E=null)},E.onerror=function(D){const k=D&&D.message?D.message:"Network Error",B=new St(k,St.ERR_NETWORK,r,E);B.event=D||null,i(B),E=null},E.ontimeout=function(){let D=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||Fb;a.timeoutErrorMessage&&(D=a.timeoutErrorMessage),i(new St(D,k.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,r,E)),E=null},l===void 0&&c.setContentType(null),"setRequestHeader"in E&&U.forEach(c.toJSON(),function(D,k){E.setRequestHeader(k,D)}),U.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),h&&h!=="json"&&(E.responseType=a.responseType),f&&([b,A]=Pl(f,!0),E.addEventListener("progress",b)),d&&E.upload&&([y,v]=Pl(d),E.upload.addEventListener("progress",y),E.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(g=x=>{E&&(i(!x||x.type?new Ra(null,r,E):x),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const O=VT(a.url);if(O&&Le.protocols.indexOf(O)===-1){i(new St("Unsupported protocol "+O+":",St.ERR_BAD_REQUEST,r));return}E.send(l||null)})},ex=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let i=new AbortController,a;const l=function(f){if(!a){a=!0,h();const g=f instanceof Error?f:this.reason;i.abort(g instanceof St?g:new Ra(g instanceof Error?g.message:g))}};let c=t&&setTimeout(()=>{c=null,l(new St(`timeout ${t} of ms exceeded`,St.ETIMEDOUT))},t);const h=()=>{r&&(c&&clearTimeout(c),c=null,r.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),r=null)};r.forEach(f=>f.addEventListener("abort",l));const{signal:d}=i;return d.unsubscribe=()=>U.asap(h),d}},nx=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let i=0,a;for(;i<e;)a=i+t,yield r.slice(i,a),i=a},ix=async function*(r,t){for await(const e of sx(r))yield*nx(e,t)},sx=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},Sy=(r,t,e,i)=>{const a=ix(r,t);let l=0,c,h=d=>{c||(c=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:f,value:g}=await a.next();if(f){h(),d.close();return}let y=g.byteLength;if(e){let b=l+=y;e(b)}d.enqueue(new Uint8Array(g))}catch(f){throw h(f),f}},cancel(d){return h(d),a.return()}},{highWaterMark:2})},wy=64*1024,{isFunction:vl}=U,ax=(({Request:r,Response:t})=>({Request:r,Response:t}))(U.global),{ReadableStream:Ey,TextEncoder:Ty}=U.global,xy=(r,...t)=>{try{return!!r(...t)}catch{return!1}},rx=r=>{r=U.merge.call({skipUndefined:!0},ax,r);const{fetch:t,Request:e,Response:i}=r,a=t?vl(t):typeof fetch=="function",l=vl(e),c=vl(i);if(!a)return!1;const h=a&&vl(Ey),d=a&&(typeof Ty=="function"?(A=>S=>A.encode(S))(new Ty):async A=>new Uint8Array(await new e(A).arrayBuffer())),f=l&&h&&xy(()=>{let A=!1;const S=new e(Le.origin,{body:new Ey,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!S}),g=c&&h&&xy(()=>U.isReadableStream(new i("").body)),y={stream:g&&(A=>A.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!y[A]&&(y[A]=(S,E)=>{let T=S&&S[A];if(T)return T.call(S);throw new St(`Response type '${A}' is not supported`,St.ERR_NOT_SUPPORT,E)})});const b=async A=>{if(A==null)return 0;if(U.isBlob(A))return A.size;if(U.isSpecCompliantForm(A))return(await new e(Le.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(U.isArrayBufferView(A)||U.isArrayBuffer(A))return A.byteLength;if(U.isURLSearchParams(A)&&(A=A+""),U.isString(A))return(await d(A)).byteLength},v=async(A,S)=>{const E=U.toFiniteNumber(A.getContentLength());return E??b(S)};return async A=>{let{url:S,method:E,data:T,signal:O,cancelToken:x,timeout:D,onDownloadProgress:k,onUploadProgress:B,responseType:F,headers:X,withCredentials:J="same-origin",fetchOptions:st}=Gb(A),W=t||fetch;F=F?(F+"").toLowerCase():"text";let dt=ex([O,x&&x.toAbortSignal()],D),bt=null;const gt=dt&&dt.unsubscribe&&(()=>{dt.unsubscribe()});let Et;try{if(B&&f&&E!=="get"&&E!=="head"&&(Et=await v(X,T))!==0){let R=new e(S,{method:"POST",body:T,duplex:"half"}),q;if(U.isFormData(T)&&(q=R.headers.get("content-type"))&&X.setContentType(q),R.body){const[K,tt]=vy(Et,Pl(_y(B)));T=Sy(R.body,wy,K,tt)}}U.isString(J)||(J=J?"include":"omit");const N=l&&"credentials"in e.prototype,G={...st,signal:dt,method:E.toUpperCase(),headers:X.normalize().toJSON(),body:T,duplex:"half",credentials:N?J:void 0};bt=l&&new e(S,G);let Q=await(l?W(bt,st):W(S,G));const ft=g&&(F==="stream"||F==="response");if(g&&(k||ft&&gt)){const R={};["status","statusText","headers"].forEach(ot=>{R[ot]=Q[ot]});const q=U.toFiniteNumber(Q.headers.get("content-length")),[K,tt]=k&&vy(q,Pl(_y(k),!0))||[];Q=new i(Sy(Q.body,wy,K,()=>{tt&&tt(),gt&&gt()}),R)}F=F||"text";let Tt=await y[U.findKey(y,F)||"text"](Q,A);return!ft&&gt&&gt(),await new Promise((R,q)=>{Hb(R,q,{data:Tt,headers:Qe.from(Q.headers),status:Q.status,statusText:Q.statusText,config:A,request:bt})})}catch(N){throw gt&&gt(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new St("Network Error",St.ERR_NETWORK,A,bt),{cause:N.cause||N}):St.from(N,N&&N.code,A,bt)}}},ox=new Map,$b=r=>{let t=r&&r.env||{};const{fetch:e,Request:i,Response:a}=t,l=[i,a,e];let c=l.length,h=c,d,f,g=ox;for(;h--;)d=l[h],f=g.get(d),f===void 0&&g.set(d,f=h?new Map:rx(t)),g=f;return f};$b();const vd={http:ET,xhr:tx,fetch:{get:$b}};U.forEach(vd,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const Cy=r=>`- ${r}`,lx=r=>U.isFunction(r)||r===null||r===!1;function cx(r,t){r=U.isArray(r)?r:[r];const{length:e}=r;let i,a;const l={};for(let c=0;c<e;c++){i=r[c];let h;if(a=i,!lx(i)&&(a=vd[(h=String(i)).toLowerCase()],a===void 0))throw new St(`Unknown adapter '${h}'`);if(a&&(U.isFunction(a)||(a=a.get(t))))break;l[h||"#"+c]=a}if(!a){const c=Object.entries(l).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let h=e?c.length>1?`since :
`+c.map(Cy).join(`
`):" "+Cy(c[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return a}const Vb={getAdapter:cx,adapters:vd};function Nh(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ra(null,r)}function Ry(r){return Nh(r),r.headers=Qe.from(r.headers),r.data=Dh.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Vb.getAdapter(r.adapter||$r.adapter,r)(r).then(function(i){return Nh(r),i.data=Dh.call(r,r.transformResponse,i),i.headers=Qe.from(i.headers),i},function(i){return Ub(i)||(Nh(r),i&&i.response&&(i.response.data=Dh.call(r,r.transformResponse,i.response),i.response.headers=Qe.from(i.response.headers))),Promise.reject(i)})}const Xb="1.13.2",Jl={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{Jl[r]=function(i){return typeof i===r||"a"+(t<1?"n ":" ")+r}});const Oy={};Jl.transitional=function(t,e,i){function a(l,c){return"[Axios v"+Xb+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,h)=>{if(t===!1)throw new St(a(c," has been removed"+(e?" in "+e:"")),St.ERR_DEPRECATED);return e&&!Oy[c]&&(Oy[c]=!0,console.warn(a(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,c,h):!0}};Jl.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function ux(r,t,e){if(typeof r!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const i=Object.keys(r);let a=i.length;for(;a-- >0;){const l=i[a],c=t[l];if(c){const h=r[l],d=h===void 0||c(h,l,r);if(d!==!0)throw new St("option "+l+" must be "+d,St.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new St("Unknown option "+l,St.ERR_BAD_OPTION)}}const Ml={assertOptions:ux,validators:Jl},jn=Ml.validators;let vs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new yy,response:new yy}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Ss(this.defaults,e);const{transitional:i,paramsSerializer:a,headers:l}=e;i!==void 0&&Ml.assertOptions(i,{silentJSONParsing:jn.transitional(jn.boolean),forcedJSONParsing:jn.transitional(jn.boolean),clarifyTimeoutError:jn.transitional(jn.boolean)},!1),a!=null&&(U.isFunction(a)?e.paramsSerializer={serialize:a}:Ml.assertOptions(a,{encode:jn.function,serialize:jn.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ml.assertOptions(e,{baseUrl:jn.spelling("baseURL"),withXsrfToken:jn.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=l&&U.merge(l.common,l[e.method]);l&&U.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),e.headers=Qe.concat(c,l);const h=[];let d=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(d=d&&S.synchronous,h.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let g,y=0,b;if(!d){const A=[Ry.bind(this),void 0];for(A.unshift(...h),A.push(...f),b=A.length,g=Promise.resolve(e);y<b;)g=g.then(A[y++],A[y++]);return g}b=h.length;let v=e;for(;y<b;){const A=h[y++],S=h[y++];try{v=A(v)}catch(E){S.call(this,E);break}}try{g=Ry.call(this,v)}catch(A){return Promise.reject(A)}for(y=0,b=f.length;y<b;)g=g.then(f[y++],f[y++]);return g}getUri(t){t=Ss(this.defaults,t);const e=qb(t.baseURL,t.url,t.allowAbsoluteUrls);return jb(e,t.params,t.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(t){vs.prototype[t]=function(e,i){return this.request(Ss(i||{},{method:t,url:e,data:(i||{}).data}))}});U.forEach(["post","put","patch"],function(t){function e(i){return function(l,c,h){return this.request(Ss(h||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}vs.prototype[t]=e(),vs.prototype[t+"Form"]=e(!0)});let hx=class Zb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(h=>{i.subscribe(h),l=h}).then(a);return c.cancel=function(){i.unsubscribe(l)},c},t(function(l,c,h){i.reason||(i.reason=new Ra(l,c,h),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Zb(function(a){t=a}),cancel:t}}};function dx(r){return function(e){return r.apply(null,e)}}function fx(r){return U.isObject(r)&&r.isAxiosError===!0}const Kh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Kh).forEach(([r,t])=>{Kh[t]=r});function Yb(r){const t=new vs(r),e=xb(vs.prototype.request,t);return U.extend(e,vs.prototype,t,{allOwnKeys:!0}),U.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return Yb(Ss(r,a))},e}const re=Yb($r);re.Axios=vs;re.CanceledError=Ra;re.CancelToken=hx;re.isCancel=Ub;re.VERSION=Xb;re.toFormData=Kl;re.AxiosError=St;re.Cancel=re.CanceledError;re.all=function(t){return Promise.all(t)};re.spread=dx;re.isAxiosError=fx;re.mergeConfig=Ss;re.AxiosHeaders=Qe;re.formToJSON=r=>Ib(U.isHTMLForm(r)?new FormData(r):r);re.getAdapter=Vb.getAdapter;re.HttpStatusCode=Kh;re.default=re;const{Axios:CR,AxiosError:RR,CanceledError:OR,isCancel:MR,CancelToken:DR,VERSION:NR,all:kR,Cancel:LR,isAxiosError:zR,spread:BR,toFormData:PR,AxiosHeaders:jR,HttpStatusCode:FR,formToJSON:IR,getAdapter:UR,mergeConfig:HR}=re,je=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Jh=[.001,0,0,.001,0,0],kh=1.35,un={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Kb="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},px={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Dl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ql={ERRORS:0,WARNINGS:1,INFOS:5},jr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},_l={moveTo:0,lineTo:1,curveTo:2,closePath:3},gx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Wl=Ql.WARNINGS;function mx(r){Number.isInteger(r)&&(Wl=r)}function yx(){return Wl}function tc(r){Wl>=Ql.INFOS&&console.log(`Info: ${r}`)}function _t(r){Wl>=Ql.WARNINGS&&console.log(`Warning: ${r}`)}function qt(r){throw new Error(r)}function ge(r,t){r||qt(t)}function bx(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Jb(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=wx(r)}catch{}const i=t?URL.parse(r,t):URL.parse(r);return bx(i)?i:null}function Qb(r,t,e=!1){const i=URL.parse(r);return i?(i.hash=t,i.href):e&&Jb(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function xt(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const xs=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class My extends xs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Lh extends xs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Qh extends xs{constructor(t){super(t,"InvalidPDFException")}}class jl extends xs{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class vx extends xs{constructor(t){super(t,"FormatError")}}class Gi extends xs{constructor(t){super(t,"AbortException")}}function Wb(r){(typeof r!="object"||r?.length===void 0)&&qt("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const i=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),c=r.subarray(a,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function Vr(r){typeof r!="string"&&qt("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function _x(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function Ax(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function Sx(){try{return new Function(""),!0}catch{return!1}}class De{static get isLittleEndian(){return xt(this,"isLittleEndian",Ax())}static get isEvalSupported(){return xt(this,"isEvalSupported",Sx())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return xt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const zh=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class it{static makeHexColor(t,e,i){return`#${zh[t]}${zh[e]}${zh[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],l=t[i+1];t[i]=a*e[0]+l*e[2]+e[4],t[i+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5];for(let g=0;g<6;g+=2){const y=t[i+g],b=t[i+g+1];t[i+g]=y*a+b*c+d,t[i+g+1]=y*l+b*h+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5],g=t[0],y=t[1],b=t[2],v=t[3];let A=a*g+d,S=A,E=a*b+d,T=E,O=h*y+f,x=O,D=h*v+f,k=D;if(l!==0||c!==0){const B=l*g,F=l*b,X=c*y,J=c*v;A+=X,T+=X,E+=J,S+=J,O+=B,k+=B,D+=F,x+=F}i[0]=Math.min(i[0],A,E,S,T),i[1]=Math.min(i[1],O,D,x,k),i[2]=Math.max(i[2],A,E,S,T),i[3]=Math.max(i[3],O,D,x,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],l=t[2],c=t[3],h=i**2+a**2,d=i*l+a*c,f=l**2+c**2,g=(h+f)/2,y=Math.sqrt(g**2-(h*f-d**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[i,l,a,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,a)}static#t(t,e,i,a,l,c,h,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,v=b*f,A=y*(y*(y*t+3*f*e)+3*b*i)+v*a,S=y*(y*(y*l+3*f*c)+3*b*h)+v*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],S)}static#e(t,e,i,a,l,c,h,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,i,a,l,c,h,d,-y/g,b);return}const v=g**2-4*y*f;if(v<0)return;const A=Math.sqrt(v),S=2*f;this.#t(t,e,i,a,l,c,h,d,(-g+A)/S,b),this.#t(t,e,i,a,l,c,h,d,(-g-A)/S,b)}static bezierBoundingBox(t,e,i,a,l,c,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),this.#e(t,i,l,h,e,a,c,d,3*(-t+3*(i-l)+h),6*(t-2*i+l),3*(i-t),f),this.#e(t,i,l,h,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}function wx(r){return decodeURIComponent(escape(r))}let Bh=null,Dy=null;function Ex(r){return Bh||(Bh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Dy=new Map([["","t"]])),r.replaceAll(Bh,(t,e,i)=>e?e.normalize("NFKC"):Dy.get(i))}function t0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Wb(r)}const _d="pdfjs_internal_id_";function Tx(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...l]=e;if(!r(i)&&!Number.isInteger(i)||!t(a))return!1;const c=l.length;let h=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Fe(r,t,e){return Math.min(Math.max(r,t),e)}function e0(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Wb(r))}function xx(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Vr(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});const hi="http://www.w3.org/2000/svg";class Ta{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Xr(r,t="text"){if(Dr(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class Zr{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:l=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=l,this.offsetY=c,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,v;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,v=1;break;case 90:g=0,y=1,b=1,v=0;break;case 270:g=0,y=-1,b=-1,v=0;break;case 0:g=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,v=-v);let A,S,E,T;g===0?(A=Math.abs(f-t[1])*i+l,S=Math.abs(d-t[0])*i+c,E=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(A=Math.abs(d-t[0])*i+l,S=Math.abs(f-t[1])*i+c,E=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[g*i,y*i,b*i,v*i,A-g*i*d-b*i*f,S-y*i*d-v*i*f],this.width=E,this.height=T}get rawDims(){const t=this.viewBox;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Zr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return it.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];it.applyTransform(e,this.transform);const i=[t[2],t[3]];return it.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return it.applyInverseTransform(i,this.transform),i}}class Ad extends xs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function ec(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function Sd(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Cx(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Rx(r,t="document.pdf"){if(typeof r!="string")return t;if(ec(r))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},l=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(l.test(c))return a(c);if(i.searchParams.size>0){const h=Array.from(i.searchParams.values()).reverse();for(const f of h)if(l.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(l.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class Ny{started=Object.create(null);times=[];time(t){t in this.started&&_t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||_t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Dr(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function Tn(r){r.preventDefault()}function pe(r){r.preventDefault(),r.stopPropagation()}function Ox(r){console.log("Deprecated API usage: "+r)}class Wh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,h+=y):f==="+"&&(c-=g,h-=y),new Date(Date.UTC(i,a,l,c,h,d))}}function Mx(r,{scale:t=1,rotation:e=0}){const{width:i,height:a}=r.attributes.style,l=[0,0,parseInt(i),parseInt(a)];return new Zr({viewBox:l,userUnit:1,scale:t,rotation:e})}function nc(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(_t(`Not a valid color format: "${r}"`),[0,0,0])}function Dx(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;r.set(e,nc(i))}t.remove()}function Qt(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform();return[t,e,i,a,l,c]}function Fn(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform().invertSelf();return[t,e,i,a,l,c]}function ws(r,t,e=!1,i=!0){if(t instanceof Zr){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:c}=r,h=De.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${l}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}i&&r.setAttribute("data-main-rotation",t.rotation)}class Gn{constructor(){const{pixelRatio:t}=Gn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,l=-1){let c=1/0,h=1/0,d=1/0;i=Gn.capPixels(i,l),i>0&&(c=Math.sqrt(i/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(c,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const td=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Lr{#t=null;#e=null;#n;#i=null;#a=null;#s=null;#r=null;static#o=null;constructor(t){this.#n=t,Lr.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Tn,{signal:e}),t.addEventListener("pointerdown",Lr.#l,{signal:e}));const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const a=this.#n.toolbarPosition;if(a){const{style:l}=t,c=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,pe(t)}#d(t){this.#n._focusEventsAllowed=!0,pe(t)}#u(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Tn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Lr.#o[t]),this.#u(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#u(e),this.#i.append(e,this.#f),this.#a=t}addComment(t){if(this.#s)return;const e=t.render();e&&(this.#u(e),this.#i.append(e,this.#f),this.#s=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#u(e),this.#i.append(e,this.#f)}async addEditSignatureButton(t){const e=this.#r=await t.renderEditButton(this.#n);this.#u(e),this.#i.append(e,this.#f)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#r&&(this.#r.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Nx{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Tn,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#n.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,e){let i=0,a=0;for(const l of t){const c=l.y+l.height;if(c<i)continue;const h=l.x+(e?l.width:0);if(c>i){a=h,i=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,i]}show(t,e,i){const[a,l]=this.#a(e,i),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,i,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const h=this.#n._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",Tn,{signal:h}),l.addEventListener("click",a,{signal:h})),this.#t.append(l)}}function n0(r,t,e){for(const i of e)t.addEventListener(i,r[i].bind(r))}class kx{#t=0;get id(){return`${Kb}${this.#t++}`}}class wd{#t=t0();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",l)}async#i(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await Xr(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=wd._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((f,g)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,f()},c.onload=async()=>{const y=i.svgUrl=c.result;h.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=g});c.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){_t(a),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:l}=t;return this.#i(`${e}_${i}_${a}_${l}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Lx{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:a,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(c&&this.#t[this.#i].type===l){h&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Yr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=De.platform;for(const[i,a,l={}]of t)for(const c of i){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:l=!1,args:c=[],checker:h=null}}=i;h&&!h(t,e)||(a.bind(t,...c,e)(),l||pe(e))}}class Ed{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Dx(t),xt(this,"_colors",t)}convert(t){const e=nc(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((l,c)=>l===e[c]))return Ed._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?it.makeHexColor(...e):t}}class $i{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#s=null;#r=null;#o=null;#l=new Lx;#c=null;#d=null;#u=null;#f=0;#g=new Set;#p=null;#h=null;#m=new Set;_editorUndoBar=null;#v=!1;#y=!1;#A=!1;#S=null;#b=null;#w=null;#R=null;#x=!1;#E=null;#N=new kx;#C=!1;#O=!1;#z=!1;#k=null;#L=null;#B=null;#D=null;#F=null;#T=yt.NONE;#_=new Set;#I=null;#U=null;#q=null;#Z=null;#V=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#P=[0,0];#G=null;#$=null;#Q=null;#W=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=$i.prototype,e=c=>c.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new Yr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#$.contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,a,l,c,h,d,f,g,y,b,v,A,S,E){const T=this._signal=this.#t.signal;this.#$=t,this.#Q=e,this.#W=i,this.#s=a,this.#c=l,this.#U=c,this.#V=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:T}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),h._on("setpreference",this.onSetPreference.bind(this),{signal:T}),h._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:T}),window.addEventListener("pointerdown",()=>{this.#O=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#O=!1},{capture:!0,signal:T}),this.#lt(),this.#dt(),this.#et(),this.#r=d.annotationStorage,this.#S=d.filterFactory,this.#q=f,this.#R=g||null,this.#v=y,this.#y=b,this.#A=v,this.#F=A||null,this.viewParameters={realScale:Ta.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#m.clear(),this.#D?.clear(),this.#e=null,this.#_.clear(),this.#l.destroy(),this.#s?.destroy(),this.#c?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#B?.destroy(),this.#B=null,this.#n=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#G&&(clearTimeout(this.#G),this.#G=null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#A}get hcmFilter(){return xt(this,"hcmFilter",this.#q?this.#S.addHCMFilter(this.#q.foreground,this.#q.background):"none")}get direction(){return xt(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return xt(this,"_highlightColors",this.#R?new Map(this.#R.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return xt(this,"highlightColors",null);const e=new Map,i=!!this.#q;for(const[a,l]of t){const c=a.endsWith("_HCM");if(i&&c){e.set(a.replace("_HCM",""),l);continue}!i&&!c&&e.set(a,l)}return xt(this,"highlightColors",e)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#c}editComment(t,e){this.#c?.open(this,t,e)}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#A=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#$.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:a,y:l,width:c,height:h}=i.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=l&&e<=l+h)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ta.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#J({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h}=i,d=i.toString(),g=this.#J(i).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;i.empty();const b=this.#tt(g),v=this.#T===yt.NONE,A=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h,text:d});v&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(v){this.switchToMode(yt.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#J(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#E||=new Nx(this),this.#E.show(i,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#W;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#I&&(this.#E?.hide(),this.#I=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#I)return;const a=this.#J(t).closest(".textLayer");if(!a){this.#I&&(this.#E?.hide(),this.#I=null,this.#M({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#I=e,this.#M({hasSelectedText:!0}),!(this.#T!==yt.HIGHLIGHT&&this.#T!==yt.NONE)&&(this.#T===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#T===yt.HIGHLIGHT?this.#tt(a):null;if(l?.toggleDrawing(),this.#O){const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l?.toggleDrawing(!0),this.#Y("main_toolbar")}}#Y(t=""){this.#T===yt.HIGHLIGHT?this.highlightSelection(t):this.#v&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#_)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#k?.abort(),this.#k=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#_){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of this.#h)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){_t(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;l.push(f)}const c=()=>{for(const d of l)this.#st(d);this.#at(l)},h=()=>{for(const d of l)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(l){_t(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==yt.NONE&&!this.isEditorHandlingKeyboard&&$i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#Y("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#M(t){Object.entries(t).some(([i,a])=>this.#X[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#T===yt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Nt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#M({isEditing:this.#T!==yt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,l=!1){if(this.#T!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#T===yt.POPUP&&this.#c?.hideSidebar(),this.#T=t,t===yt.NONE){this.setEditingState(!1),this.#pt(),this._editorUndoBar?.hide(),this.#j.resolve();return}t===yt.SIGNATURE&&await this.#U?.loadSignatures(),t===yt.POPUP&&(this.#n||=await this.#V.getAnnotationsByType(new Set(this.#h.map(c=>c._editorType))),this.#c?.showSidebar(this.#n)),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#a.values())c.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const c of this.#i.values())c.annotationElementId===e||c.id===e?(this.setSelected(c),l?c.editComment():a&&c.enterInEditMode()):c.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#h){switch(t){case Nt.CREATE:this.currentLayer.addNewEditor(e);return;case Nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Z||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#_)i.updateParams(t,e);else for(const i of this.#h)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#i.values())l.editorType===t&&l.show(e);(this.#Z?.get(Nt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[Nt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#C){this.#C=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#pt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#i.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#D?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#gt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#u?.commitOrRemove();for(const e of this.#_)e!==t&&e.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#M({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#l.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#l.cleanType(t)}#K(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#_],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},a=()=>{for(const l of e)this.#st(l)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#_)e.unselect();this.#_.clear();for(const e of t)e.isEmpty()||(this.#_.add(e),e.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#at(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==yt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#P[0]+=t,this.#P[1]+=e;const[a,l]=this.#P,c=[...this.#_],h=1e3;this.#G&&clearTimeout(this.#G),this.#G=setTimeout(()=>{this.#G=null,this.#P[0]=this.#P[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(a,l),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-a,-l),d.translationDone())},mustExec:!1})},h);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#_)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:l,pageIndex:c},h]of t)h.newX=a,h.newY=l,h.newPageIndex=c,e||=a!==h.savedX||l!==h.savedY||c!==h.savedPageIndex;if(!e)return!1;const i=(a,l,c,h)=>{if(this.#i.has(a.id)){const d=this.#a.get(h);d?a._setParentAndPosition(d,l,c):(a.pageIndex=h,a.x=l,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:c,newPageIndex:h}]of t)i(a,l,c,h)},undo:()=>{for(const[a,{savedX:l,savedY:c,savedPageIndex:h}]of t)i(a,l,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const i of this.#p.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}get imageManager(){return xt(this,"imageManager",new wd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:l,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,g,y,b)=>({x:(g-a)/c,y:1-(f+y-i)/l,width:b/c,height:y/l});break;case"180":h=(f,g,y,b)=>({x:1-(f+y-i)/l,y:1-(g+b-a)/c,width:y/l,height:b/c});break;case"270":h=(f,g,y,b)=>({x:1-(g+b-a)/c,y:(f-i)/l,width:b/c,height:y/l});break;default:h=(f,g,y,b)=>({x:(f-i)/l,y:(g-a)/c,width:y/l,height:b/c});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:v,width:A,height:S}of y.getClientRects())A===0||S===0||d.push(h(b,v,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#r.getRawValue(e);i&&(this.#T===yt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#D?.get(t);a&&(a.setCanvas(e,i),this.#D.delete(t))}addMissingCanvas(t,e){(this.#D||=new Map).set(t,e)}}class Hn{#t=null;#e=!1;#n=null;#i=null;#a=null;#s=null;#r=!1;#o=null;#l=null;#c=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#l=t,this.#u=t._uiManager.useNewAltTextFlow,Hn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Hn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Hn.#f.missing),e.setAttribute("data-l10n-id",Hn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#l._uiManager._signal;t.addEventListener("contextmenu",Tn,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#r=!0,a(l))},{signal:i}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Hn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#l.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:l=!1}){i&&(this.#c=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Hn.#f[this.#g]),this.#i?.setAttribute("data-l10n-id",Hn.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#l.id}`;const a=100,l=this.#l._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#l.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Al{#t=null;#e=!1;#n=null;#i=null;#a=null;#s=null;#r=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;if(!(e instanceof AbortSignal)||e.aborted)return t;t.addEventListener("contextmenu",Tn,{signal:e}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:e});const i=a=>{a.preventDefault(),this.edit()};return t.addEventListener("click",i,{capture:!0,signal:e}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#e=!0,i(a))},{signal:e}),t}edit(){const{bottom:t,left:e,right:i}=this.#n.getClientDimensions(),a={top:t};this.#n._uiManager.direction==="ltr"?a.right=i:a.left=e,this.#n._uiManager.editComment(this.#n,a)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#r||this.#a===""}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#i}serialize(){return this.data}get data(){return{text:this.#a,date:this.#s,deleted:this.#r}}set data(t){if(t===null){this.#a="",this.#r=!0;return}this.#a=t,this.#s=new Date,this.#r=!1}setInitialText(t){this.#i=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#n=null,this.#e=!1,this.#r=!1}}class ic{#t;#e=!1;#n=null;#i;#a;#s;#r;#o=null;#l;#c=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:c=null,signal:h}){this.#t=t,this.#n=i,this.#i=e,this.#a=a,this.#s=l,this.#r=c,this.#d=new AbortController,this.#l=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Gn.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,l=AbortSignal.any([this.#l,a.signal]),c=this.#t,h={capture:!0,signal:l,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(pe(f),d(f))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!this.#u){this.#u=new AbortController;const a=AbortSignal.any([this.#l,this.#u.signal]),l=this.#t,c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",this.#g.bind(this),c);const h=this.#p.bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",pe,c),l.addEventListener("pointermove",pe,c),l.addEventListener("pointercancel",pe,c),l.addEventListener("pointerup",pe,c),this.#a?.()}if(pe(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#c||t.touches.length!==2)return;pe(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:l}=e,{screenX:c,screenY:h}=i,d=this.#c,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=d,v=y-f,A=b-g,S=c-a,E=h-l,T=Math.hypot(S,E)||1,O=Math.hypot(v,A)||1;if(!this.#e&&Math.abs(O-T)<=ic.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=l,d.touch1X=c,d.touch1Y=h,!this.#e){this.#e=!0;return}const x=[(a+c)/2,(l+h)/2];this.#s?.(x,O,T)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#r?.()),this.#c&&(pe(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ct{#t=null;#e=null;#n=null;#i=null;#a=!1;#s=null;#r="";#o=!1;#l=null;#c=null;#d=null;#u=null;#f="";#g=!1;#p=null;#h=!1;#m=!1;#v=!1;#y=null;#A=0;#S=0;#b=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#R=!1;#x=ct._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ed;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ct.prototype._resizeWithKeyboard,e=$i.TRANSLATE_SMALL,i=$i.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new Yr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ct.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[l,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new zx({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ct._l10n??=t,ct._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ct._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#R}set _isDraggable(t){this.#R=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#P(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[l,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/l,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#E([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#E(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#E(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[d,f]=this.getBaseTranslation();c+=d,h+=f;const{style:g}=i;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ct,a=i/t,l=i/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:l,y:c,width:h,height:d}=this;if(h*=i,d*=a,l*=i,c*=a,this._mustFixPosition)switch(t){case 0:l=Fe(l,0,i-h),c=Fe(c,0,a-d);break;case 90:l=Fe(l,0,i-d),c=Fe(c,h,a);break;case 180:l=Fe(l,h,i),c=Fe(c,d,a);break;case 270:l=Fe(l,d,i),c=Fe(c,0,a-h);break}this.x=l/=i,this.y=c/=a;const[f,g]=this.getBaseTranslation();l+=f,c+=g,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#N(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ct.#N(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ct.#N(t,e,360-this.parentRotation)}#C(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,a]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/i).toFixed(2)}%`,this.#o||(l.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,a=i.endsWith("%"),l=!this.#o&&e.endsWith("%");if(a&&l)return;const[c,h]=this.parentDimensions;a||(t.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!this.#o&&!l&&(t.height=`${(100*parseFloat(e)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#O(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#l.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#z.bind(this,i),{signal:e}),a.addEventListener("contextmenu",Tn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#l)}#z(t,e){e.preventDefault();const{isMac:i}=De.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",pe,{passive:!1,signal:c}),window.addEventListener("contextmenu",Tn,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#L()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e;const[l,c]=this.parentDimensions;this.setDims(l*i,c*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const l=this.x,c=this.y,h=this.width,d=this.height;l===t&&c===e&&h===i&&d===a||this.addCommands({cmd:this.#k.bind(this,l,c,h,d),undo:this.#k.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,e){const[i,a]=this.parentDimensions,l=this.x,c=this.y,h=this.width,d=this.height,f=ct.MIN_SIZE/i,g=ct.MIN_SIZE/a,y=this.#C(this.rotation),b=(N,G)=>[y[0]*N+y[2]*G,y[1]*N+y[3]*G],v=this.#C(360-this.rotation),A=(N,G)=>[v[0]*N+v[2]*G,v[1]*N+v[3]*G];let S,E,T=!1,O=!1;switch(t){case"topLeft":T=!0,S=(N,G)=>[0,0],E=(N,G)=>[N,G];break;case"topMiddle":S=(N,G)=>[N/2,0],E=(N,G)=>[N/2,G];break;case"topRight":T=!0,S=(N,G)=>[N,0],E=(N,G)=>[0,G];break;case"middleRight":O=!0,S=(N,G)=>[N,G/2],E=(N,G)=>[0,G/2];break;case"bottomRight":T=!0,S=(N,G)=>[N,G],E=(N,G)=>[0,0];break;case"bottomMiddle":S=(N,G)=>[N/2,G],E=(N,G)=>[N/2,0];break;case"bottomLeft":T=!0,S=(N,G)=>[0,G],E=(N,G)=>[N,0];break;case"middleLeft":O=!0,S=(N,G)=>[0,G/2],E=(N,G)=>[N,G/2];break}const x=S(h,d),D=E(h,d);let k=b(...D);const B=ct._round(l+k[0]),F=ct._round(c+k[1]);let X=1,J=1,st,W;if(e.fromKeyboard)({deltaX:st,deltaY:W}=e);else{const{screenX:N,screenY:G}=e,[Q,ft]=this.#c;[st,W]=this.screenToPageTranslation(N-Q,G-ft),this.#c[0]=N,this.#c[1]=G}if([st,W]=A(st/i,W/a),T){const N=Math.hypot(h,d);X=J=Math.max(Math.min(Math.hypot(D[0]-x[0]-st,D[1]-x[1]-W)/N,1/h,1/d),f/h,g/d)}else O?X=Fe(Math.abs(D[0]-x[0]-st),f,1)/h:J=Fe(Math.abs(D[1]-x[1]-W),g,1)/d;const dt=ct._round(h*X),bt=ct._round(d*J);k=b(...E(dt,bt));const gt=B-k[0],Et=F-k[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=dt,this.height=bt,this.x=gt,this.y=Et,this.setDims(i*dt,a*bt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new Lr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Hn.initialize(ct._l10n),this.#n=new Hn(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#i?this.#i:this.#i=new Al(this)}get commentColor(){return null}get comment(){const t=this.#i;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#i||(this.#i=new Al(this)),this.#i.data=t}setCommentData(t){this.#i||(this.#i=new Al(this)),this.#i.setInitialText(t)}get hasEditedComment(){return this.#i?.hasBeenEdited()}async editComment(){this.#i||(this.#i=new Al(this)),this.#i.edit()}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,h=c+l+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),n0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new ic({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#D.bind(this),onPinching:this.#F.bind(this),onPinchEnd:this.#T.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#D(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#F(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const c=this.#C(this.rotation),h=(B,F)=>[c[0]*B+c[2]*F,c[1]*B+c[3]*F],[d,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,v=this.height,A=ct.MIN_SIZE/d,S=ct.MIN_SIZE/f;l=Math.max(Math.min(l,1/b,1/v),A/b,S/v);const E=ct._round(b*l),T=ct._round(v*l);if(E===b&&T===v)return;this.#p||=[g,y,b,v];const O=h(b/2,v/2),x=ct._round(g+O[0]),D=ct._round(y+O[1]),k=h(E/2,T/2);this.x=x-k[0],this.y=D-k[1],this.width=E,this.height=T,this.setDims(d*E,f*T),this.fixAndSetPosition(),this._onResizing()}#T(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#I(t);return}this.#_(t)}#_(t){const{isMac:e}=De.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:l},h=f=>{a.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#_(f),i&&this._onStopDragging()};e&&(this.#A=t.clientX,this.#S=t.clientY,this.#s=t.pointerId,this.#r=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){pe(f);return}const[v,A]=this.screenToPageTranslation(g-this.#A,y-this.#S);this.#A=g,this.#S=y,this._uiManager.dragSelectedEditors(v,A)},c),window.addEventListener("touchmove",pe,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#r&&(this.#w||f.isPrimary)&&h(f),pe(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){h(f);return}pe(f)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[l,c]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,g=e/a,y=this.x*l,b=this.y*c,v=this.width*l,A=this.height*c;switch(i){case 0:return[y+f+h,c-b-g-A+d,y+f+v+h,c-b-g+d];case 90:return[y+g+h,c-b+f+d,y+g+A+h,c-b+f+v+d];case 180:return[y-f-v+h,c-b+g+d,y-f+h,c-b+g+A+d];case 270:return[y-g-A+h,c-b-f-v+d,y-g+h,c-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,l,c]=t,h=l-i,d=c-a;switch(this.rotation){case 0:return[i,e-c,h,d];case 90:return[i,e-a,d,h];case 180:return[l,e-a,h,d];case 270:return[l,e-c,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&a>0&&t<l&&i>0}#U(){if(this.#u||!this.div)return;this.#u=new AbortController;const t=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){qt("An editor must be serializable")}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[l,c]=a.pageDimensions,[h,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/l,a.y=d/c,a.width=f/l,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#P(),this.removeEditToolbar(),this.#b){for(const t of this.#b.values())clearTimeout(t);this.#b=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#O(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#l.children;if(!this.#e){this.#e=Array.from(e);const c=this.#q.bind(this),h=this.#Z.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#V.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ct._l10nResizer[g])}}const i=this.#e[0];let a=0;for(const c of e){if(c===i)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==a){if(l<a)for(let h=0;h<a-l;h++)this.#l.append(this.#l.firstChild);else if(l>a)for(let h=0;h<l-a;h++)this.#l.firstChild.before(this.#l.lastChild);let c=0;for(const h of e){const f=this.#e[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",ct._l10nResizer[f])}}this.#X(0),this.#v=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){ct._resizerKeyboardManager.exec(this,t)}#Z(t){this.#v&&t.relatedTarget?.parentNode!==this.#l&&this.#P()}#V(t){this.#f=this.#v?t:""}#X(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#B(this.#f,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#v=!1,this.#X(-1),this.#L()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const i=t/e,{style:a}=this.div;a.aspectRatio=i,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#b||=new Map;const{action:i}=t;let a=this.#b.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#b.delete(i),this.#b.size===0&&(this.#b=null)},ct._telemetryTimeout),this.#b.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class zx extends ct{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ky=3285377520,Sn=4294901760,In=65535;class i0{constructor(t){this.h1=t?t&4294967295:ky,this.h2=t?t&4294967295:ky}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let S=0,E=t.length;S<E;S++){const T=t.charCodeAt(S);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,l=i-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,v=y&In,A=b&In;for(let S=0;S<a;S++)S&1?(h=c[S],h=h*y&Sn|h*v&In,h=h<<15|h>>>17,h=h*b&Sn|h*A&In,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*y&Sn|d*v&In,d=d<<15|d>>>17,d=d*b&Sn|d*A&In,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,l){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*y&Sn|h*v&In,h=h<<15|h>>>17,h=h*b&Sn|h*A&In,a&1?f^=h:g^=h}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Sn|t*36045&In,e=e*4283543511&Sn|((e<<16|t>>>16)*2950163797&Sn)>>>16,t^=e>>>1,t=t*444984403&Sn|t*60499&In,e=e*3301882366&Sn|((e<<16|t>>>16)*3120437893&Sn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const ed=Object.freeze({map:null,hash:"",transfer:void 0});class Td{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof ct)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[l,c]of Object.entries(e))i[l]!==c&&(a=!0,i[l]=c);else a=!0,this.#n.set(t,e);a&&this.#i(),e instanceof ct&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new s0(this)}get serializable(){if(this.#n.size===0)return ed;const t=new Map,e=new i0,i=[],a=Object.create(null);let l=!1;for(const[c,h]of this.#n){const d=h instanceof ct?h.serialize(!1,a):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:ed}get editorStats(){let t=null;const e=new Map;for(const i of this.#n.values()){if(!(i instanceof ct))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:l}=a;e.has(l)||e.set(l,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const c=t[l]||=new Map;for(const[h,d]of Object.entries(a)){if(h==="type")continue;let f=c.get(h);f||(f=new Map,c.set(h,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[i,a]of e)t[i]=a.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof ct)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class s0 extends Td{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,l=structuredClone(e,a?{transfer:a}:null);this.#t={map:l,hash:i,transfer:a}}get print(){qt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return xt(this,"modifiedIds",{ids:new Set,hash:""})}}class Bx{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(ge(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:c}=t,h=new FontFace(a,l,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),i?.(t)}catch{_t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw _t(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return xt(this,"isSyncFontLoadingSupported",je||De.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ge(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(D,k){return D.charCodeAt(k)<<24|D.charCodeAt(k+1)<<16|D.charCodeAt(k+2)<<8|D.charCodeAt(k+3)&255}function a(D,k,B,F){const X=D.substring(0,k),J=D.substring(k+B);return X+F+J}let l,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function g(D,k){if(++f>30){_t("Load test font never loaded."),k();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(g.bind(null,D,k))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const A=16,S=1482184792;let E=i(b,A);for(l=0,c=y.length-3;l<c;l+=4)E=E-S+i(y,l)|0;l<y.length&&(E=E-S+i(y+"XXX",l)|0),b=a(b,A,4,_x(E));const T=`url(data:font/opentype;base64,${btoa(b)});`,O=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(O);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const D of[t.loadedName,y]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=D,x.append(k)}this._document.body.append(x),g(y,()=>{x.remove(),e.complete()})}}class Px{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${e0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(c){_t(`getPathGenerator - ignoring character: "${c}".`)}const l=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}}function jx(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(je)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Fx(r){if(je&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Vr(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sl(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const nd=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,Ix=r=>typeof r=="object"&&typeof r?.name=="string",Ux=Tx.bind(null,nd,Ix);class Hx{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const wl={DATA:1,ERROR:2},de={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ly(){}function Ye(r){if(r instanceof Gi||r instanceof Qh||r instanceof My||r instanceof jl||r instanceof Lh)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Gi(r.message);case"InvalidPDFException":return new Qh(r.message);case"PasswordException":return new My(r.message,r.code);case"ResponseException":return new jl(r.message,r.status,r.missing);case"UnknownErrorException":return new Lh(r.message,r.details)}return new Lh(r.message,r.toString())}class Nr{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===wl.DATA)a.resolve(t.data);else if(t.callback===wl.ERROR)a.reject(Ye(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:i,targetName:a,callback:wl.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:i,targetName:a,callback:wl.ERROR,callbackId:t.callbackId,reason:Ye(c)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,i,a){const l=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:l,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,d.postMessage({sourceName:c,targetName:h,stream:de.PULL,streamId:l,desiredSize:f.desiredSize}),g.promise},cancel:f=>{ge(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:de.CANCEL,streamId:l,reason:Ye(f)}),g.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:a,stream:de.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:de.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){ge(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:de.ERROR,streamId:e,reason:Ye(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:de.START_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:de.START_COMPLETE,streamId:e,reason:Ye(f)})})}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case de.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Ye(t.reason));break;case de.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Ye(t.reason));break;case de.PULL:if(!h){l.postMessage({sourceName:i,targetName:a,stream:de.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||Ly).then(function(){l.postMessage({sourceName:i,targetName:a,stream:de.PULL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:de.PULL_COMPLETE,streamId:e,reason:Ye(f)})});break;case de.ENQUEUE:if(ge(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case de.CLOSE:if(ge(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,e);break;case de.ERROR:ge(c,"error should have stream controller"),c.controller.error(Ye(t.reason)),this.#a(c,e);break;case de.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Ye(t.reason)),this.#a(c,e);break;case de.CANCEL:if(!h)break;const d=Ye(t.reason);Promise.try(h.onCancel||Ly,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:de.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:de.CANCEL_COMPLETE,streamId:e,reason:Ye(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class a0{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){qt("Abstract method `_createCanvas` called.")}}class qx extends a0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class r0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class zy extends r0{async _fetch(t){const e=await Xr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Vr(e)}}class o0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,l){return"none"}destroy(t=!1){}}class Gx extends o0{#t;#e;#n;#i;#a;#s;#r=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#l(){return this.#s||=new Map}get#c(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(hi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#a.createElementNS(hi,"defs"),t.append(i),i.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[e,i,a]=t,l=new Array(256),c=new Array(256),h=new Array(256);for(let d=0;d<256;d++)l[d]=e[d]/255,c[d]=i[d]/255,h[d]=a[d]/255;return[l.join(","),c.join(","),h.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(ec(e)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Qb(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,l]=this.#d(t),c=t.length===1?i:`${i}${a}${l}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#i}_transfer_map_${this.#r++}`,d=this.#u(h);this.#o.set(t,d),this.#o.set(c,d);const f=this.#p(h);return this.#m(i,a,l,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let l=this.#l.get(a);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#l.set(a,l)),!t||!e))return l.url;const c=this.#y(t);t=it.makeHexColor(...c);const h=this.#y(e);if(e=it.makeHexColor(...h),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const d=new Array(256);for(let v=0;v<=255;v++){const A=v/255;d[v]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,y=l.filter=this.#p(g);this.#m(f,f,f,y),this.#g(y);const b=(v,A)=>{const S=c[v]/255,E=h[v]/255,T=new Array(A+1);for(let O=0;O<=A;O++)T[O]=S+O/A*(E-S);return T.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),y),l.url=this.#u(g),l.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#i}_alpha_map_${this.#r++}`,c=this.#u(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#p(l);return this.#v(i,h),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#i}_luminosity_map_${this.#r++}`,c=this.#u(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#p(l);return this.#f(h),t&&this.#v(i,h),c}addHighlightHCMFilter(t,e,i,a,l){const c=`${e}-${i}-${a}-${l}`;let h=this.#l.get(t);if(h?.key===c||(h?(h.filter?.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},this.#l.set(t,h)),!e||!i))return h.url;const[d,f]=[e,i].map(this.#y.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[a,l].map(this.#y.bind(this));y<g&&([g,y,b,v]=[y,g,v,b]),this.#c.style.color="";const A=(T,O,x)=>{const D=new Array(256),k=(y-g)/x,B=T/255,F=(O-T)/(255*x);let X=0;for(let J=0;J<=x;J++){const st=Math.round(g+J*k),W=B+J*F;for(let dt=X;dt<=st;dt++)D[dt]=W;X=st+1}for(let J=X;J<256;J++)D[J]=D[X-1];return D.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,E=h.filter=this.#p(S);return this.#g(E),this.#m(A(b[0],v[0],5),A(b[1],v[1],5),A(b[2],v[2],5),E),h.url=this.#u(S),h.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#r=0)}#f(t){const e=this.#a.createElementNS(hi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(hi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#a.createElementNS(hi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#h(t,e,i){const a=this.#a.createElementNS(hi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#m(t,e,i,a){const l=this.#a.createElementNS(hi,"feComponentTransfer");a.append(l),this.#h(l,"feFuncR",t),this.#h(l,"feFuncG",e),this.#h(l,"feFuncB",i)}#v(t,e){const i=this.#a.createElementNS(hi,"feComponentTransfer");e.append(i),this.#h(i,"feFuncA",t)}#y(t){return this.#c.style.color=t,nc(getComputedStyle(this.#c).getPropertyValue("color"))}}class l0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class By extends l0{async _fetch(t){const e=await Xr(t,"arraybuffer");return new Uint8Array(e)}}class c0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){qt("Abstract method `_fetch` called.")}}class Py extends c0{async _fetch(t){const e=await Xr(t,"arraybuffer");return new Uint8Array(e)}}je&&_t("Please use the `legacy` build in Node.js environments.");async function xd(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class $x extends o0{}class Vx extends a0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Xx extends r0{async _fetch(t){return xd(t)}}class Zx extends l0{async _fetch(t){return xd(t)}}class Yx extends c0{async _fetch(t){return xd(t)}}const da="__forcedDependency";class Kx{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[da]:[]};#n=new Map;#i=[];#a=[];#s=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#l=-1;#c=new Set;#d=new Map;#u=new Map;#f;#g;constructor(t){this.#f=t.width,this.#g=t.height}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[da]:{__proto__:this.#e[da]}},this.#r={__proto__:this.#r},this.#i.push([t,null]),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#r=Object.getPrototypeOf(this.#r);const i=this.#i.pop();return i!==void 0&&(i[1]=t),this}recordOpenMarker(t){return this.#i.push([t,null]),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)[0]}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(e[1]=t),this}beginMarkedContent(t){return this.#a.push([t,null]),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(e[1]=t),this}pushBaseTransform(t){return this.#s.push(it.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordFutureForcedDependency(t,e){return this.recordIncrementalData(da,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#c)this.recordFutureForcedDependency(da,t);return this}resetBBox(t){return this.#l=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0,this}get hasPendingBBox(){return this.#l!==-1}recordClipBox(t,e,i,a,l,c){const h=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([i,l,a,c],h,d);const f=it.intersect(this.#r,d);return f?(this.#r[0]=f[0],this.#r[1]=f[1],this.#r[2]=f[2],this.#r[3]=f[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(t,e,i,a,l,c){const h=this.#r;if(h[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(h[0]===-1/0)return it.axialAlignedBoundingBox([i,l,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([i,l,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,i,a=1,l=0,c=0,h){const d=i.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#u.get(i),f!==!1&&(g=[0,0,0,0],it.axialAlignedBoundingBox(d,i.fontMatrix,g),(a!==1||l!==0||c!==0)&&it.scaleMinMax([a,0,0,-a,l,c],g),f)))return this.recordBBox(t,e,g[0],g[2],g[1],g[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return d&&g&&f===void 0&&(f=g[0]<=l-y.actualBoundingBoxLeft&&g[2]>=l+y.actualBoundingBoxRight&&g[1]<=c-y.actualBoundingBoxAscent&&g[3]>=c+y.actualBoundingBoxDescent,this.#u.set(i,f),f)?this.recordBBox(t,e,g[0],g[2],g[1],g[3]):this.recordBBox(t,e,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#g,this.#r[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#c,a=this.#t,l=this.#e;for(const c of e)c in this.#t?i.add(a[c]):c in l&&l[c].forEach(i.add,i);return this}copyDependenciesFromIncrementalOperation(t,e){const i=this.#d,a=this.#c;for(const l of this.#e[e])i.get(l).dependencies.forEach(a.add,a.add(l));return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#c.add(this.#n.get(e)),this}recordOperation(t,e=!1){this.recordDependencies(t,[da]);const i=new Set(this.#c),a=this.#i.concat(this.#a),l=this.#l===t?{minX:this.#o[0],minY:this.#o[1],maxX:this.#o[2],maxY:this.#o[3]}:null;return this.#d.set(t,{bbox:l,pairs:a,dependencies:i}),e||(this.#l=-1),this.#c.clear(),this}bboxToClipBoxDropOperation(t){return this.#l!==-1&&(this.#l=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3])),this.#c.clear(),this}_takePendingDependencies(){const t=this.#c;return this.#c=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#c.add(e)}take(){return this.#u.clear(),Array.from(this.#d,([t,{bbox:e,pairs:i,dependencies:a}])=>(i.forEach(l=>l.forEach(a.add,a)),a.delete(t),{minX:(e?.minX??0)/this.#f,maxX:(e?.maxX??this.#f)/this.#f,minY:(e?.minY??0)/this.#g,maxY:(e?.maxY??this.#g)/this.#g,dependencies:Array.from(a).sort((l,c)=>l-c),idx:t}))}}class Fl{#t;#e;#n=0;#i;#a=0;constructor(t,e){if(t instanceof Fl)return t;this.#t=t,this.#i=t._takePendingDependencies(),this.#e=e}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#t.hasPendingBBox||this.#t.resetBBox(this.#e),this}get hasPendingBBox(){return this.#t.hasPendingBBox}recordClipBox(t,e,i,a,l,c){return this.#t.recordClipBox(this.#e,e,i,a,l,c),this}recordBBox(t,e,i,a,l,c){return this.#t.recordBBox(this.#e,e,i,a,l,c),this}recordCharacterBBox(t,e,i,a,l,c,h){return this.#t.recordCharacterBBox(this.#e,e,i,a,l,c,h),this}recordFullPageBBox(t){return this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}copyDependenciesFromIncrementalOperation(t,e){return this.#t.copyDependenciesFromIncrementalOperation(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){this.#t.recordOperation(this.#e,!0);const e=this.#t._extractOperation(this.#e);for(const i of e.dependencies)this.#i.add(i);return this.#i.delete(this.#e),this.#i.delete(null),this}bboxToClipBoxDropOperation(t){return this.#t.bboxToClipBoxDropOperation(this.#e),this}recordNestedDependencies(){this.#t._pushPendingDependencies(this.#i)}take(){throw new Error("Unreachable")}}const wn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},Me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function id(r,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),r.clip(a)}class Cd{isModifyingCurrentTransform(){return!1}getPattern(){qt("Abstract method `getPattern` called.")}}class Jx extends Cd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let l;if(a===Me.STROKE||a===Me.FILL){const c=e.current.getClippedPathBoundingBox(a,Qt(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),i=it.transform(i,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),id(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);l.setTransform(y)}else id(t,this._bbox),l=this._createGradient(t);return l}}function Ph(r,t,e,i,a,l,c,h){const d=t.coords,f=t.colors,g=r.data,y=r.width*4;let b;d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b),d[i+1]>d[a+1]&&(b=i,i=a,a=b,b=c,c=h,h=b),d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b);const v=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,S=(d[i]+t.offsetX)*t.scaleX,E=(d[i+1]+t.offsetY)*t.scaleY,T=(d[a]+t.offsetX)*t.scaleX,O=(d[a+1]+t.offsetY)*t.scaleY;if(A>=O)return;const x=f[l],D=f[l+1],k=f[l+2],B=f[c],F=f[c+1],X=f[c+2],J=f[h],st=f[h+1],W=f[h+2],dt=Math.round(A),bt=Math.round(O);let gt,Et,N,G,Q,ft,Tt,R;for(let q=dt;q<=bt;q++){if(q<E){const lt=q<A?0:(A-q)/(A-E);gt=v-(v-S)*lt,Et=x-(x-B)*lt,N=D-(D-F)*lt,G=k-(k-X)*lt}else{let lt;q>O?lt=1:E===O?lt=0:lt=(E-q)/(E-O),gt=S-(S-T)*lt,Et=B-(B-J)*lt,N=F-(F-st)*lt,G=X-(X-W)*lt}let K;q<A?K=0:q>O?K=1:K=(A-q)/(A-O),Q=v-(v-T)*K,ft=x-(x-J)*K,Tt=D-(D-st)*K,R=k-(k-W)*K;const tt=Math.round(Math.min(gt,Q)),ot=Math.round(Math.max(gt,Q));let mt=y*q+tt*4;for(let lt=tt;lt<=ot;lt++)K=(gt-lt)/(gt-Q),K<0?K=0:K>1&&(K=1),g[mt++]=Et-(Et-ft)*K|0,g[mt++]=N-(N-Tt)*K|0,g[mt++]=G-(G-R)*K|0,g[mt++]=255}}function Qx(r,t,e){const i=t.coords,a=t.colors;let l,c;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(i.length/h)-1,f=h-1;for(l=0;l<d;l++){let g=l*h;for(let y=0;y<f;y++,g++)Ph(r,e,i[g],i[g+1],i[g+h],a[g],a[g+1],a[g+h]),Ph(r,e,i[g+h+1],i[g+1],i[g+h],a[g+h+1],a[g+1],a[g+h])}break;case"triangles":for(l=0,c=i.length;l<c;l+=3)Ph(r,e,i[l],i[l+1],i[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class Wx extends Cd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),v=f/y,A=g/b,S={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/v,scaleY:1/A},E=y+4,T=b+4,O=i.getCanvas("mesh",E,T),x=O.context,D=x.createImageData(y,b);if(e){const B=D.data;for(let F=0,X=B.length;F<X;F+=4)B[F]=e[0],B[F+1]=e[1],B[F+2]=e[2],B[F+3]=255}for(const B of this._figures)Qx(D,B,S);return x.putImageData(D,2,2),{canvas:O.canvas,offsetX:h-2*v,offsetY:d-2*A,scaleX:v,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){id(t,this._bbox);const l=new Float32Array(2);if(a===Me.SHADING)it.singularValueDecompose2dScale(Qt(t),l);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,l);const[h,d]=l;it.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=d}else it.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,a===Me.SHADING?null:this._background,e.cachedCanvases);return a!==Me.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class tC extends Cd{getPattern(){return"hotpink"}}function eC(r){switch(r[0]){case"RadialAxial":return new Jx(r);case"Mesh":return new Wx(r);case"Dummy":return new tC}throw new Error(`Unknown IR type: ${r[0]}`)}const jy={COLORED:1,UNCOLORED:2};class Rd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:a,tilingType:l,color:c,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),tc("TilingType: "+l);const g=e[0],y=e[1],b=e[2],v=e[3],A=b-g,S=v-y,E=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,E);const[T,O]=E;it.singularValueDecompose2dScale(this.baseTransform,E);const x=T*E[0],D=O*E[1];let k=A,B=S,F=!1,X=!1;const J=Math.ceil(d*x),st=Math.ceil(f*D),W=Math.ceil(A*x),dt=Math.ceil(S*D);J>=W?k=d:F=!0,st>=dt?B=f:X=!0;const bt=this.getSizeAndScale(k,this.ctx.canvas.width,x),gt=this.getSizeAndScale(B,this.ctx.canvas.height,D),Et=t.cachedCanvases.getCanvas("pattern",bt.size,gt.size),N=Et.context,G=h.createCanvasGraphics(N);if(G.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(G,a,c),N.translate(-bt.scale*g,-gt.scale*y),G.transform(0,bt.scale,0,0,gt.scale,0,0),N.save(),G.dependencyTracker?.save(),this.clipBbox(G,g,y,b,v),G.baseTransform=Qt(G.ctx),G.executeOperatorList(i),G.endDrawing(),G.dependencyTracker?.restore().recordNestedDependencies?.(),N.restore(),F||X){const Q=Et.canvas;F&&(k=d),X&&(B=f);const ft=this.getSizeAndScale(k,this.ctx.canvas.width,x),Tt=this.getSizeAndScale(B,this.ctx.canvas.height,D),R=ft.size,q=Tt.size,K=t.cachedCanvases.getCanvas("pattern-workaround",R,q),tt=K.context,ot=F?Math.floor(A/d):0,mt=X?Math.floor(S/f):0;for(let lt=0;lt<=ot;lt++)for(let ne=0;ne<=mt;ne++)tt.drawImage(Q,R*lt,q*ne,R,q,0,0,R,q);return{canvas:K.canvas,scaleX:ft.scale,scaleY:Tt.scale,offsetX:g,offsetY:y}}return{canvas:Et.canvas,scaleX:bt.scale,scaleY:gt.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,i){const a=Math.max(Rd.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=a?l=a:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,a,l){const c=a-e,h=l-i;t.ctx.rect(e,i,c,h),it.axialAlignedBoundingBox([e,i,a,l],Qt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,l=t.current;switch(e){case jy.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;a.fillStyle=l.fillColor=c,a.strokeStyle=l.strokeColor=h;break;case jy.UNCOLORED:a.fillStyle=a.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new vx(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a){let l=i;a!==Me.SHADING&&(l=it.transform(l,e.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const c=this.createPatternCanvas(e);let h=new DOMMatrix(l);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(h),d}}function nC({src:r,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const h=De.isLittleEndian?4278190080:255,[d,f]=c?[l,h]:[h,l],g=i>>3,y=i&7,b=r.length;e=new Uint32Array(e.buffer);let v=0;for(let A=0;A<a;A++){for(const E=t+g;t<E;t++){const T=t<b?r[t]:255;e[v++]=T&128?f:d,e[v++]=T&64?f:d,e[v++]=T&32?f:d,e[v++]=T&16?f:d,e[v++]=T&8?f:d,e[v++]=T&4?f:d,e[v++]=T&2?f:d,e[v++]=T&1?f:d}if(y===0)continue;const S=t<b?r[t++]:255;for(let E=0;E<y;E++)e[v++]=S&1<<7-E?f:d}return{srcPos:t,destPos:v}}const Fy=16,Iy=100,iC=15,Uy=10,Ke=16,jh=new DOMMatrix,hn=new Float32Array(2),ya=new Float32Array([1/0,1/0,-1/0,-1/0]);function sC(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},r.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},r.transform=function(e,i,a,l,c,h){t.transform(e,i,a,l,c,h),this.__originalTransform(e,i,a,l,c,h)},r.setTransform=function(e,i,a,l,c,h){t.setTransform(e,i,a,l,c,h),this.__originalSetTransform(e,i,a,l,c,h)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,a,l,c,h){t.bezierCurveTo(e,i,a,l,c,h),this.__originalBezierCurveTo(e,i,a,l,c,h)},r.rect=function(e,i,a,l){t.rect(e,i,a,l),this.__originalRect(e,i,a,l)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class aC{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function El(r,t,e,i,a,l,c,h,d,f){const[g,y,b,v,A,S]=Qt(r);if(y===0&&b===0){const O=c*g+A,x=Math.round(O),D=h*v+S,k=Math.round(D),B=(c+d)*g+A,F=Math.abs(Math.round(B)-x)||1,X=(h+f)*v+S,J=Math.abs(Math.round(X)-k)||1;return r.setTransform(Math.sign(g),0,0,Math.sign(v),x,k),r.drawImage(t,e,i,a,l,0,0,F,J),r.setTransform(g,y,b,v,A,S),[F,J]}if(g===0&&v===0){const O=h*b+A,x=Math.round(O),D=c*y+S,k=Math.round(D),B=(h+f)*b+A,F=Math.abs(Math.round(B)-x)||1,X=(c+d)*y+S,J=Math.abs(Math.round(X)-k)||1;return r.setTransform(0,Math.sign(y),Math.sign(b),0,x,k),r.drawImage(t,e,i,a,l,0,0,J,F),r.setTransform(g,y,b,v,A,S),[J,F]}r.drawImage(t,e,i,a,l,c,h,d,f);const E=Math.hypot(g,y),T=Math.hypot(b,v);return[E*d,T*f]}class Hy{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Jh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Re.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ya.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Me.FILL,e=null){const i=this.minMax.slice();if(t===Me.STROKE){e||qt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(e,hn);const a=hn[0]*this.lineWidth/2,l=hn[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ya,0)}getClippedPathBoundingBox(t=Me.FILL,e=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function qy(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%Ke,l=(e-a)/Ke,c=a===0?l:l+1,h=r.createImageData(i,Ke);let d=0,f;const g=t.data,y=h.data;let b,v,A,S;if(t.kind===Dl.GRAYSCALE_1BPP){const E=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),O=T.length,x=i+7>>3,D=4294967295,k=De.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(A=b<l?Ke:a,f=0,v=0;v<A;v++){const B=E-d;let F=0;const X=B>x?i:B*8-7,J=X&-8;let st=0,W=0;for(;F<J;F+=8)W=g[d++],T[f++]=W&128?D:k,T[f++]=W&64?D:k,T[f++]=W&32?D:k,T[f++]=W&16?D:k,T[f++]=W&8?D:k,T[f++]=W&4?D:k,T[f++]=W&2?D:k,T[f++]=W&1?D:k;for(;F<X;F++)st===0&&(W=g[d++],st=128),T[f++]=W&st?D:k,st>>=1}for(;f<O;)T[f++]=0;r.putImageData(h,0,b*Ke)}}else if(t.kind===Dl.RGBA_32BPP){for(v=0,S=i*Ke*4,b=0;b<l;b++)y.set(g.subarray(d,d+S)),d+=S,r.putImageData(h,0,v),v+=Ke;b<c&&(S=i*a*4,y.set(g.subarray(d,d+S)),r.putImageData(h,0,v))}else if(t.kind===Dl.RGB_24BPP)for(A=Ke,S=i*A,b=0;b<c;b++){for(b>=l&&(A=a,S=i*A),f=0,v=S;v--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;r.putImageData(h,0,b*Ke)}else throw new Error(`bad image kind: ${t.kind}`)}function Gy(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%Ke,l=(e-a)/Ke,c=a===0?l:l+1,h=r.createImageData(i,Ke);let d=0;const f=t.data,g=h.data;for(let y=0;y<c;y++){const b=y<l?Ke:a;({srcPos:d}=nC({src:f,srcPos:d,dest:g,width:i,height:b,nonBlackColor:0})),r.putImageData(h,0,y*Ke)}}function Tr(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Tl(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function $y(r,t){if(t)return!0;it.singularValueDecompose2dScale(r,hn);const e=Math.fround(Gn.pixelRatio*Ta.PDF_TO_CSS_UNITS);return hn[0]<=e&&hn[1]<=e}const rC=["butt","round","square"],oC=["miter","round","bevel"],lC={},Vy={};class _a{constructor(t,e,i,a,l,{optionalContentConfig:c,markedContentStack:h=null},d,f,g){this.ctx=t,this.current=new Hy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new aC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Qt(this.compositeCtx))}this.ctx.save(),Tl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Qt(this.ctx)}executeOperatorList(t,e,i,a,l){const c=t.argsArray,h=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const g=f-d>Uy&&typeof i=="function",y=g?Date.now()+iC:0;let b=0;const v=this.commonObjs,A=this.objs;let S,E;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!l||l.has(d))if(S=h[d],E=c[d]??null,S!==jr.dependency)E===null?this[S](d):this[S](d,...E);else for(const T of E){this.dependencyTracker?.recordNamedData(T,d);const O=T.startsWith("g_")?v:A;if(!O.has(T))return O.get(T,i),d}if(d++,d===f)return d;if(g&&++b>Uy){if(Date.now()>y)return i(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=i,d=a,f="prescale1",g,y;for(;l>2&&h>1||c>2&&d>1;){let b=h,v=d;l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/b),c>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/v),g=this.cachedCanvases.getCanvas(f,b,v),y=g.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,h,d,0,0,b,v),t=g.canvas,h=b,d=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:l}=e,c=this.current.fillColor,h=this.current.patternFill,d=Qt(i);let f,g,y,b;if((e.bitmap||e.data)&&e.count>1){const st=e.bitmap||e.data.buffer;g=JSON.stringify(h?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(st),f||(f=new Map,this._cachedBitmapsMap.set(st,f));const W=f.get(g);if(W&&!h){const dt=Math.round(Math.min(d[0],d[2])+d[4]),bt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,wn.transformAndFill),{canvas:W,offsetX:dt,offsetY:bt}}y=W}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,l),Gy(b.context,e));let v=it.transform(d,[1/a,0,0,-1/l,0,0]);v=it.transform(v,[1,0,0,1,0,-l]);const A=ya.slice();it.axialAlignedBoundingBox([0,0,a,l],v,A);const[S,E,T,O]=A,x=Math.round(T-S)||1,D=Math.round(O-E)||1,k=this.cachedCanvases.getCanvas("fillCanvas",x,D),B=k.context,F=S,X=E;B.translate(-F,-X),B.transform(...v),y||(y=this._scaleImage(b.canvas,Fn(B)),y=y.img,f&&h&&f.set(g,y)),B.imageSmoothingEnabled=$y(Qt(B),e.interpolate),El(B,y,0,0,y.width,y.height,0,0,a,l),B.globalCompositeOperation="source-in";const J=it.transform(Fn(B),[1,0,0,1,-F,-X]);return B.fillStyle=h?c.getPattern(i,this,J,Me.FILL):c,B.fillRect(0,0,a,l),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,k.canvas)),this.dependencyTracker?.recordDependencies(t,wn.transformAndFill),{canvas:k.canvas,offsetX:Math.round(F),offsetY:Math.round(X)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=rC[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=oC[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),Tr(this.suspendedCtx,c),sC(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Tr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const l=a[0],c=a[1],h=a[2]-l,d=a[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,i,h,d,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,l,c,h,d,f,g,y){let b=t.canvas,v=d-g,A=f-y;if(c)if(v<0||A<0||v+i>b.width||A+a>b.height){const E=this.cachedCanvases.getCanvas("maskExtension",i,a),T=E.context;T.drawImage(b,-v,-A),T.globalCompositeOperation="destination-atop",T.fillStyle=c,T.fillRect(0,0,i,a),T.globalCompositeOperation="source-over",b=E.canvas,v=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(v,A,i,a),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(v,A,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const S=new Path2D;S.rect(d,f,i,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,v,A,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&Tr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Tr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,l,c,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,l,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[l]=i;if(!a){l||=i[0]=new Path2D,this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===jr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}if(!(l instanceof Path2D)){const c=i[0]=new Path2D;for(let h=0,d=l.length;h<d;)switch(l[h++]){case _l.moveTo:c.moveTo(l[h++],l[h++]);break;case _l.lineTo:c.lineTo(l[h++],l[h++]);break;case _l.curveTo:c.bezierCurveTo(l[h++],l[h++],l[h++],l[h++],l[h++],l[h++]);break;case _l.closePath:c.closePath();break;default:_t(`Unrecognized drawing path operator: ${l[h-1]}`);break}l=c}it.axialAlignedBoundingBox(a,Qt(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,Fn(a),Me.STROKE),c){const h=new Path2D;h.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=h}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,wn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Me.STROKE,Qt(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const f=l.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=l.getPattern(a,this,Fn(a),Me.FILL),f){const g=new Path2D;g.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=g}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,wn.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,wn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=lC}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Vy}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=i.getTransform().invertSelf();for(const{transform:c,x:h,y:d,fontSize:f,path:g}of e)g&&a.addPath(g,new DOMMatrix(c).preMultiplySelf(l).translate(h,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordNamedDependency(t,e);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||Jh,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=i;i<Fy?g=Fy:i>Iy&&(g=Iy),this.current.fontSizeScale=i/g,this.ctx.font=`${f} ${d} ${g}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,l,c){const h=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&Re.FILL_STROKE_MASK,v=!!(g&Re.ADD_TO_PATH_FLAG),A=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||v||A||S)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,e)),E&&(f.disableFontFace||A||S)){h.save(),h.translate(i,a),h.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,h,f);let T;if(b===Re.FILL||b===Re.FILL_STROKE)if(l){T=h.getTransform(),h.setTransform(...l);const O=this.#n(E,T,l);h.fill(O)}else h.fill(E);if(b===Re.STROKE||b===Re.FILL_STROKE)if(c){T||=h.getTransform(),h.setTransform(...c);const{a:O,b:x,c:D,d:k}=T,B=it.inverseTransform(c),F=it.transform([O,x,D,k,0,0],B);it.singularValueDecompose2dScale(F,hn),h.lineWidth*=Math.max(hn[0],hn[1])/y,h.stroke(this.#n(E,T,c))}else h.lineWidth/=y,h.stroke(E);h.restore()}else(b===Re.FILL||b===Re.FILL_STROKE)&&(h.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e))),(b===Re.STROKE||b===Re.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e)).recordDependencies(t,wn.stroke),h.strokeText(e,i,a));v&&((this.pendingTextPaths||=[]).push({transform:Qt(h),x:i,y:a,fontSize:y,path:E}),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return xt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,wn.showText).copyDependenciesFromIncrementalOperation(t,"sameLineText").resetBBox(t),this.current.textRenderingMode&Re.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t);return}const l=i.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,h=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,g=i.fontDirection,y=i.textHScale*g,b=e.length,v=a.vertical,A=v?1:-1,S=a.defaultVMetrics,E=l*i.fontMatrix[0],T=i.textRenderingMode===Re.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),g>0?c.scale(y,-1):c.scale(y,1);let O,x;if(i.patternFill){c.save();const X=i.fillColor.getPattern(c,this,Fn(c),Me.FILL);O=Qt(c),c.restore(),c.fillStyle=X}if(i.patternStroke){c.save();const X=i.strokeColor.getPattern(c,this,Fn(c),Me.STROKE);x=Qt(c),c.restore(),c.strokeStyle=X}let D=i.lineWidth;const k=i.textMatrixScale;if(k===0||D===0){const X=i.textRenderingMode&Re.FILL_STROKE_MASK;(X===Re.STROKE||X===Re.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=k;if(h!==1&&(c.scale(h,h),D/=h),c.lineWidth=D,a.isInvalidPDFjsFont){const X=[];let J=0;for(const W of e)X.push(W.unicode),J+=W.width;const st=X.join("");if(c.fillText(st,0,0),this.dependencyTracker!==null){const W=c.measureText(st);this.dependencyTracker.recordBBox(t,this.ctx,-W.actualBoundingBoxLeft,W.actualBoundingBoxRight,-W.actualBoundingBoxAscent,W.actualBoundingBoxDescent).recordOperation(t).recordIncrementalData("sameLineText",t)}i.x+=J*E*y,c.restore(),this.compose();return}let B=0,F;for(F=0;F<b;++F){const X=e[F];if(typeof X=="number"){B+=A*X*l/1e3;continue}let J=!1;const st=(X.isSpace?f:0)+d,W=X.fontChar,dt=X.accent;let bt,gt,Et=X.width;if(v){const Q=X.vmetric||S,ft=-(X.vmetric?Q[1]:Et*.5)*E,Tt=Q[2]*E;Et=Q?-Q[0]:Et,bt=ft/h,gt=(B+Tt)/h}else bt=B/h,gt=0;let N;if(a.remeasure&&Et>0){N=c.measureText(W);const Q=N.width*1e3/l*h;if(Et<Q&&this.isFontSubpixelAAEnabled){const ft=Et/Q;J=!0,c.save(),c.scale(ft,1),bt/=ft}else Et!==Q&&(bt+=(Et-Q)/2e3*l/h)}if(this.contentVisible&&(X.isInFont||a.missingFile)){if(T&&!dt)c.fillText(W,bt,gt),this.dependencyTracker?.recordCharacterBBox(t,c,N?{bbox:null}:a,l/h,bt,gt,()=>N??c.measureText(W));else if(this.paintChar(t,W,bt,gt,O,x),dt){const Q=bt+l*dt.offset.x/h,ft=gt-l*dt.offset.y/h;this.paintChar(t,dt.fontChar,Q,ft,O,x)}}const G=v?Et*E-st*g:Et*E+st*g;B+=G,J&&c.restore()}v?i.y-=B:i.x+=B*y,c.restore(),this.compose(),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t)}showType3Text(t,e){const i=this.ctx,a=this.current,l=a.font,c=a.fontSize,h=a.fontDirection,d=l.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,y=a.textHScale*h,b=a.fontMatrix||Jh,v=e.length,A=a.textRenderingMode===Re.INVISIBLE;let S,E,T,O;if(A||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,h);const x=this.dependencyTracker;for(this.dependencyTracker=x?new Fl(x,t):null,S=0;S<v;++S){if(E=e[S],typeof E=="number"){O=d*E*c/1e3,this.ctx.translate(O,0),a.x+=O*y;continue}const D=(E.isSpace?g:0)+f,k=l.charProcOperatorList[E.operatorListId];k?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...b),this.executeOperatorList(k),this.restore()):_t(`Type3 character "${E.operatorListId}" is not available.`);const B=[E.width,0];it.applyTransform(B,b),T=B[0]*c+D,i.translate(T,0),a.x+=T*y}i.restore(),x&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=x)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,l,c,h){const d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,l,h).recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||Qt(this.ctx),l={createCanvasGraphics:c=>new _a(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Fl(this.dependencyTracker,t):null)};i=new Rd(e,this.ctx,l,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=eC(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,Fn(i),Me.SHADING);const l=Fn(i);if(l){const{width:c,height:h}=i.canvas,d=ya.slice();it.axialAlignedBoundingBox([0,0,c,h],l,d);const[f,g,y,b]=d;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,wn.transform).recordDependencies(t,wn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){qt("Should not call beginInlineImage")}beginImageData(){qt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Qt(this.ctx),i)){it.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,l,c,h]=i,d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||tc("TODO: Support non-isolated groups."),e.knockout&&_t("Knockout groups not supported.");const a=Qt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=ya.slice();it.axialAlignedBoundingBox(e.bbox,Qt(i),l);const c=[0,0,i.canvas.width,i.canvas.height];l=it.intersect(l,c)||[0,0,0,0];const h=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-h,1),g=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),v=b.context;v.translate(-h,-d),v.transform(...a);let A=new Path2D;const[S,E,T,O]=e.bbox;if(A.rect(S,E,T-S,O-E),e.matrix){const x=new Path2D;x.addPath(A,new DOMMatrix(e.matrix)),A=x}v.clip(A),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(h,d),i.save()),Tr(i,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Qt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=ya.slice();it.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,a,l,c){if(this.#t(),Tl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const h=i[2]-i[0],d=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=h,i[3]=d,it.singularValueDecompose2dScale(Qt(this.ctx),hn);const{viewportScale:f}=this,g=Math.ceil(h*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(hn[0],0,0,-hn[1],0,d*hn[1]),Tl(this.ctx)}else{Tl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],h,d),this.ctx.clip(f)}}this.current=new Hy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,l=0,c,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=Qt(d);d.transform(i,a,l,c,0,0);const g=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=h.length;y<b;y+=2){const v=it.transform(f,[i,a,l,c,h[y],h[y+1]]);d.drawImage(g.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+g.canvas.width,v[5],v[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,wn.transformAndFill);for(const c of e){const{data:h,width:d,height:f,transform:g}=c,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const v=this.getObject(t,h,c);Gy(b,v),b.globalCompositeOperation="source-in",b.fillStyle=l?a.getPattern(b,this,Fn(i),Me.FILL):a,b.fillRect(0,0,d,f),b.restore(),i.save(),i.transform(...g),i.scale(1,-1),El(i,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){_t("Dependent image isn't ready yet");return}const h=c.width,d=c.height,f=[];for(let g=0,y=l.length;g<y;g+=2)f.push({transform:[i,0,0,a,l[g],l[g+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,a),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/i,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",i,a).context;qy(g,e),h=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(h,Fn(l));l.imageSmoothingEnabled=$y(Qt(l),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,i,-a,0).recordDependencies(t,wn.imageXObject).recordOperation(t),El(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const c=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,h).context;qy(f,e),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),El(a,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,wn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===Vy?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:l}=this.ctx.getTransform();let c,h;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(l);if(d===f)if(t===0)c=h=1/d;else{const g=d*t;c=h=g<1?1/g:1}else if(t===0)c=1/d,h=1/f;else{const g=d*t,y=f*t;c=g<1?1/g:1,h=y<1?1/y:1}}else{const d=Math.abs(e*l-i*a),f=Math.hypot(e,i),g=Math.hypot(a,l);if(t===0)c=g/d,h=f/d;else{const y=t*d;c=g>y?g/y:1,h=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[l,c]=this.getScaleForStroking();if(l===c){i.lineWidth=(a||1)*l,i.stroke(t);return}const h=i.getLineDash();e&&i.save(),i.scale(l,c),jh.a=1/l,jh.d=1/c;const d=new Path2D;if(d.addPath(t,jh),h.length>0){const f=Math.max(l,c);i.setLineDash(h.map(g=>g/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in jr)_a.prototype[r]!==void 0&&(_a.prototype[jr[r]]=_a.prototype[r]);class Aa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class cC{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const pa=Symbol("INTERNAL");class uC{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:l}){this.#t=!!(t&un.DISPLAY),this.#e=!!(t&un.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==pa&&qt("Internal method `_setVisible` called."),this.#n=i,this.#i=e}}class hC{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=un.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new uC(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(pa,!1);for(const i of t.on)this.#e.get(i)._setVisible(pa,!0);for(const i of t.off)this.#e.get(i)._setVisible(pa,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const l=t[a];let c;if(Array.isArray(l))c=this.#a(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return _t(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return tc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(_t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return _t(`Unknown optional content policy ${t.policy}.`),!0}return _t(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){_t(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(pa,!1,!0);a._setVisible(pa,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const l=this.#e.get(a);if(l)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new i0;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class dC{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ge(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(i),!0)});ge(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ge(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new fC(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new pC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class fC{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=Sd(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pC{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function gC(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let g=h(e);return g=unescape(g),g=d(g),g=f(g),l(g)}if(e=c(r),e){const g=f(e);return l(g)}if(e=i("filename","i").exec(r),e){e=e[1];let g=h(e);return g=f(g),l(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),v=Vr(y);y=b.decode(v),t=!1}catch{}}return y}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let b;const v=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(g))!==null;){let[,S,E,T]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[E,T]}const A=[];for(let S=0;S<y.length&&S in y;++S){let[E,T]=y[S];T=h(T),E&&(T=unescape(T),S===0&&(T=d(T))),A.push(T)}return A.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return a(b,A)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,A){if(v==="q"||v==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),a(b,A);try{A=atob(A)}catch{}return a(b,A)})}return""}function u0(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function sc(r){return URL.parse(r)?.origin??null}function h0({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(r.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function d0(r){const t=r.get("Content-Disposition");if(t){let e=gC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Sd(e))return e}return null}function Kr(r,t){return new jl(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function f0(r){return r===200||r===206}function p0(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function g0(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(_t(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class mC{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=u0(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ge(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new yC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new bC(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class yC{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,p0(i,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=sc(l.url),!f0(l.status))throw Kr(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:h,suggestedLength:d}=h0({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=d0(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Gi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:g0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class bC{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${i-1}`);const c=a.url;fetch(c,p0(l,this._withCredentials,this._abortController)).then(h=>{const d=sc(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!f0(h.status))throw Kr(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:g0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Fh=200,Ih=206;function vC(r){const t=r.response;return typeof t!="string"?t:Vr(t).buffer}class _C{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=u0(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,c]of this.headers)e.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Ih):a.expectedStatus=Fh,e.responseType="arraybuffer",ge(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const l=a.status||Fh;if(!(l===Fh&&i.expectedStatus===Ih)&&l!==i.expectedStatus){i.onError(a.status);return}const h=vC(a);if(l===Ih){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:h}):(_t('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class AC{constructor(t){this._source=t,this._manager=new _C(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ge(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new SC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new wC(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class SC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=sc(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=h0({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=d0(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Kr(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class wC{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=sc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Kr(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const EC=/^[a-z][a-z0-9\-+.]+:/i;function TC(r){if(EC.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class xC{constructor(t){this.source=t,this.url=TC(t.url),ge(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ge(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new CC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new RC(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class CC{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Kr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Gi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class RC{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const xr=Symbol("INITIAL_DATA");class m0{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:xr}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===xr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==xr}delete(t){const e=this.#t[t];return!e||e.data===xr?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==xr&&(yield[t,e])}}}const OC=1e5,Xy=30;class Pe{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#r=0;#o=0;#l=null;#c=null;#d=0;#u=0;#f=Object.create(null);#g=[];#p=null;#h=[];#m=new WeakMap;#v=null;static#y=new Map;static#A=new Map;static#S=new WeakMap;static#b=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#u=i.scale*Gn.pixelRatio,this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:l,pageX:c,pageY:h}=i.rawDims;this.#v=[1,0,0,-1,-c,h+l],this.#o=a,this.#r=l,Pe.#O(),ws(e,i),this.#t.promise.finally(()=>{Pe.#w.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=De.platform;return xt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#l.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#R(e.items),t()},this.#t.reject)};return this.#l=this.#p.getReader(),Pe.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Gn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,ws(this.#c,{rotation:a})),i!==this.#u){e?.(),this.#u=i;const l={div:null,properties:null,ctx:Pe.#N(this.#a)};for(const c of this.#h)l.properties=this.#m.get(c),l.div=c,this.#E(l)}}cancel(){const t=new Gi("TextLayer task cancelled.");this.#l?.cancel(t).catch(()=>{}),this.#l=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#g}#R(t){if(this.#n)return;this.#s.ctx??=Pe.#N(this.#a);const e=this.#h,i=this.#g;for(const a of t){if(e.length>OC){_t("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),l.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#x(a)}}#x(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const a=it.transform(this.#v,t.transform);let l=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let h=this.#i&&c.fontSubstitution||c.fontFamily;h=Pe.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*Pe.#z(h,c,this.#a);let g,y;l===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(l),y=a[5]-f*Math.cos(l));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#c?(v.left=`${(100*g/this.#o).toFixed(2)}%`,v.top=`${(100*y/this.#r).toFixed(2)}%`):(v.left=`${b}${g.toFixed(2)}px)`,v.top=`${b}${y.toFixed(2)}px)`),v.fontSize=`${b}${(Pe.#b*d).toFixed(2)}px)`,v.fontFamily=h,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);S!==E&&Math.max(S,E)/Math.min(S,E)>1.5&&(A=!0)}if(A&&(i.canvasWidth=c.vertical?t.height:t.width),this.#m.set(e,i),this.#s.div=e,this.#s.properties=i,this.#E(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#E(t){const{div:e,properties:i,ctx:a}=t,{style:l}=e;let c="";if(Pe.#b>1&&(c=`scale(${1/Pe.#b})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:h}=l,{canvasWidth:d,fontSize:f}=i;Pe.#C(a,f*this.#u,h);const{width:g}=a.measureText(e.textContent);g>0&&(c=`scaleX(${d*this.#u/g}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(l.transform=c)}static cleanup(){if(!(this.#w.size>0)){this.#y.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#N(t=null){let e=this.#A.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#C(t,e,i){const a=this.#S.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#O(){if(this.#b!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#b=t.getBoundingClientRect().height,t.remove()}static#z(t,e,i){const a=this.#y.get(t);if(a)return a;const l=this.#N(i);l.canvas.width=l.canvas.height=Xy,this.#C(l,Xy,t);const c=l.measureText(""),h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return h?f=h/(h+d):(De.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#y.set(t,f),f}}class Fr{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(l){if(!l)return;let c=null;const h=l.name;if(h==="#text")c=l.value;else if(Fr.shouldBuildText(h))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const d of l.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const MC=100;function y0(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new Od,{docId:e}=t,i=r.url?jx(r.url):null,a=r.data?Fx(r.data):null,l=r.httpHeaders||null,c=r.withCredentials===!0,h=r.password??null,d=r.range instanceof b0?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let g=r.worker instanceof Ir?r.worker:null;const y=r.verbosity,b=typeof r.docBaseUrl=="string"&&!ec(r.docBaseUrl)?r.docBaseUrl:null,v=Sl(r.cMapUrl),A=r.cMapPacked!==!1,S=r.CMapReaderFactory||(je?Xx:zy),E=Sl(r.iccUrl),T=Sl(r.standardFontDataUrl),O=r.StandardFontDataFactory||(je?Zx:By),x=Sl(r.wasmUrl),D=r.WasmFactory||(je?Yx:Py),k=r.stopAtErrors!==!0,B=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,F=r.isEvalSupported!==!1,X=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!je,J=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!je&&(De.platform.isFirefox||!globalThis.chrome),st=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,W=typeof r.disableFontFace=="boolean"?r.disableFontFace:je,dt=r.fontExtraProperties===!0,bt=r.enableXfa===!0,gt=r.ownerDocument||globalThis.document,Et=r.disableRange===!0,N=r.disableStream===!0,G=r.disableAutoFetch===!0,Q=r.pdfBug===!0,ft=r.CanvasFactory||(je?Vx:qx),Tt=r.FilterFactory||(je?$x:Gx),R=r.enableHWA===!0,q=r.useWasm!==!1,K=d?d.length:r.length??NaN,tt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!je&&!W,ot=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(S===zy&&O===By&&D===Py&&v&&T&&x&&Dr(v,document.baseURI)&&Dr(T,document.baseURI)&&Dr(x,document.baseURI)),mt=null;mx(y);const lt={canvasFactory:new ft({ownerDocument:gt,enableHWA:R}),filterFactory:new Tt({docId:e,ownerDocument:gt}),cMapReaderFactory:ot?null:new S({baseUrl:v,isCompressed:A}),standardFontDataFactory:ot?null:new O({baseUrl:T}),wasmFactory:ot?null:new D({baseUrl:x})};g||(g=Ir.create({verbosity:y,port:Aa.workerPort}),t._worker=g);const ne={docId:e,apiVersion:"5.4.149",data:a,password:h,disableAutoFetch:G,rangeChunkSize:f,length:K,docBaseUrl:b,enableXfa:bt,evaluatorOptions:{maxImageSize:B,disableFontFace:W,ignoreErrors:k,isEvalSupported:F,isOffscreenCanvasSupported:X,isImageDecoderSupported:J,canvasMaxAreaInBytes:st,fontExtraProperties:dt,useSystemFonts:tt,useWasm:q,useWorkerFetch:ot,cMapUrl:v,iccUrl:E,standardFontDataUrl:T,wasmUrl:x}},Jt={ownerDocument:gt,pdfBug:Q,styleElement:mt,loadingParams:{disableAutoFetch:G,enableXfa:bt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Zi=g.messageHandler.sendWithPromise("GetDocRequest",ne,a?[a.buffer]:null);let mi;if(d)mi=new dC(d,{disableRange:Et,disableStream:N});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Yi=Dr(i)?mC:je?xC:AC;mi=new Yi({url:i,length:K,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:Et,disableStream:N})}return Zi.then(Yi=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Oa=new Nr(e,Yi,g.port),Vn=new kC(Oa,t,mi,Jt,lt,R);t._transport=Vn,Oa.send("Ready",null)})}).catch(t._capability.reject),t}class Od{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Od.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class b0{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class DC{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class NC{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new Ny:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new m0,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}={}){return new Zr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:l=Hi.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:v=!1,filteredOperationIndexes:A=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,l,y,b),{renderingIntent:E,cacheKey:T}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(E);let O=this._intentStates.get(T);O||(O=Object.create(null),this._intentStates.set(T,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const x=!!(E&un.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const D=!this.recordedGroups&&(v||this._pdfBug&&globalThis.StepperManager?.enabled),k=X=>{if(O.renderTasks.delete(B),D){const J=B.gfx?.dependencyTracker.take();J?(B.stepper?.setOperatorGroups(J),v&&(this.recordedGroups=J)):v&&(this.recordedGroups=[])}x&&(this.#t=!0),this.#e(),X?(B.capability.reject(X),this._abortOperatorList({intentState:O,reason:X instanceof Error?X:new Error(X)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ba({callback:k,params:{canvas:e,canvasContext:t,dependencyTracker:D?new Kx(e):null,viewport:i,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,filteredOperationIndexes:A});(O.renderTasks||=new Set).add(B);const F=B.task;return Promise.all([O.displayReadyCapability.promise,d]).then(([X,J])=>{if(this.destroyed){k();return}if(this._stats?.time("Rendering"),!(J.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:X,optionalContentConfig:J}),B.operatorListChanged()}).catch(k),F}getOperatorList({intent:t="display",annotationMode:e=Hi.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,i,a,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Fr.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function l(){c.read().then(function({value:d,done:f}){if(f){i(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),l()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Ny),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:l,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Ad){let a=MC;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Gi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var qi,Mn,fi,ms,Ul,ys,bs,Ie,Nl,v0,_0,kr,Sa,kl;const Yt=class Yt{constructor({name:t=null,port:e=null,verbosity:i=yx()}={}){Bn(this,Ie);Bn(this,qi,Promise.withResolvers());Bn(this,Mn,null);Bn(this,fi,null);Bn(this,ms,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Zt(Yt,bs).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Zt(Yt,bs).set(e,this),Pn(this,Ie,v0).call(this,e)}else Pn(this,Ie,_0).call(this)}get promise(){return Zt(this,qi).promise}get port(){return Zt(this,fi)}get messageHandler(){return Zt(this,Mn)}destroy(){this.destroyed=!0,Zt(this,ms)?.terminate(),Ze(this,ms,null),Zt(Yt,bs).delete(Zt(this,fi)),Ze(this,fi,null),Zt(this,Mn)?.destroy(),Ze(this,Mn,null)}static create(t){const e=Zt(this,bs).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Yt(t)}static get workerSrc(){if(Aa.workerSrc)return Aa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>Zt(this,Sa,kl)?Zt(this,Sa,kl):(await import(this.workerSrc)).WorkerMessageHandler)())}};qi=new WeakMap,Mn=new WeakMap,fi=new WeakMap,ms=new WeakMap,Ul=new WeakMap,ys=new WeakMap,bs=new WeakMap,Ie=new WeakSet,Nl=function(){Zt(this,qi).resolve(),Zt(this,Mn).send("configure",{verbosity:this.verbosity})},v0=function(t){Ze(this,fi,t),Ze(this,Mn,new Nr("main","worker",t)),Zt(this,Mn).on("ready",()=>{}),Pn(this,Ie,Nl).call(this)},_0=function(){if(Zt(Yt,ys)||Zt(Yt,Sa,kl)){Pn(this,Ie,kr).call(this);return}let{workerSrc:t}=Yt;try{Yt._isSameOrigin(window.location,t)||(t=Yt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Nr("main","worker",e),a=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?Zt(this,qi).reject(new Error("Worker was destroyed")):Pn(this,Ie,kr).call(this)},l=new AbortController;e.addEventListener("error",()=>{Zt(this,ms)||a()},{signal:l.signal}),i.on("test",h=>{if(l.abort(),this.destroyed||!h){a();return}Ze(this,Mn,i),Ze(this,fi,e),Ze(this,ms,e),Pn(this,Ie,Nl).call(this)}),i.on("ready",h=>{if(l.abort(),this.destroyed){a();return}try{c()}catch{Pn(this,Ie,kr).call(this)}});const c=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};c();return}catch{tc("The worker has been disabled.")}Pn(this,Ie,kr).call(this)},kr=function(){Zt(Yt,ys)||(_t("Setting up fake worker."),Ze(Yt,ys,!0)),Yt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Zt(this,qi).reject(new Error("Worker was destroyed"));return}const e=new Hx;Ze(this,fi,e);const i=`fake${jm(Yt,Ul)._++}`,a=new Nr(i+"_worker",i,e);t.setup(a,e),Ze(this,Mn,new Nr(i,i+"_worker",e)),Pn(this,Ie,Nl).call(this)}).catch(t=>{Zt(this,qi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Sa=new WeakSet,kl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Bn(Yt,Sa),Bn(Yt,Ul,0),Bn(Yt,ys,!1),Bn(Yt,bs,new WeakMap),je&&(Ze(Yt,ys,!0),Aa.workerSrc||="./pdf.worker.mjs"),Yt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},Yt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Yt.fromPort=t=>{if(Ox("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt.create(t)};let Ir=Yt;class kC{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,e,i,a,l,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new m0,this.fontLoader=new Bx({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return xt(this,"annotationStorage",new Td)}getRenderingIntent(t,e=Hi.ENABLE,i=null,a=!1,l=!1){let c=un.DISPLAY,h=ed;switch(t){case"any":c=un.ANY;break;case"display":break;case"print":c=un.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${t}`)}const d=c&un.PRINT&&i instanceof s0?i:this.annotationStorage;switch(e){case Hi.DISABLE:c+=un.ANNOTATIONS_DISABLE;break;case Hi.ENABLE:break;case Hi.ENABLE_FORMS:c+=un.ANNOTATIONS_FORMS;break;case Hi.ENABLE_STORAGE:c+=un.ANNOTATIONS_STORAGE,h=d.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=un.IS_EDITING),l&&(c+=un.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[c,h.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Pe.cleanup(),this._networkStream?.cancelAllRequests(new Gi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{ge(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){a.close();return}ge(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:c}=this._fullReader;return(!a||!l)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(i,a)=>{ge(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:c,done:h}){if(h){a.close();return}ge(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{l.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new DC(i,this))}),t.on("DocException",i=>{e._capability.reject(Ye(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw Ye(i);const a=l=>{l instanceof Error?this.#a.reject(l):this.#a.resolve({password:l})};e.onPassword(a,i.code)}catch(a){this.#a.reject(a)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in l){const f=l.error;_t(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,h=new Px(l,c);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:d}=l;ge(d,"The imageRef must be defined.");for(const f of this.#e.values())for(const[,g]of f.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,l);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,l,c])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i)){if(h._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,t);const c=new NC(e,l,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#n.set(e,a),a}getPageIndex(t){return nd(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new hC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new cC(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Pe.cleanup()}}cachedPageNumber(t){if(!nd(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class LC{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ba{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:l,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:v=!1,filteredOperationIndexes:A=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new LC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._filteredOperationIndexes=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ba.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ba.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:l,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new _a(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ba.#e.delete(this._canvas),t||=new Ad(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ba.#e.delete(this._canvas),this.callback())))}}const A0="5.4.149",zC="9e2e9e209";class En{#t=null;#e=null;#n;#i=null;#a=!1;#s=!1;#r=null;#o;#l=null;#c=null;static#d=null;static get _keyboardManager(){return xt(this,"_keyboardManager",new Yr([[["Escape","mac+Escape"],En.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],En.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],En.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],En.prototype._moveToPrevious],[["Home","mac+Home"],En.prototype._moveToBeginning],[["End","mac+End"],En.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#r=t):this.#s=!0,this.#c=t?._uiManager||e,this.#o=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",En.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",Tn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,a]of this.#c.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=i,l.setAttribute("data-l10n-id",En.#d[i]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=a,l.ariaSelected=a===this.#n,l.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Nt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#i.lastChild?.focus()}#g(t){En._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#a=t.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#u();this.#t.append(e)}#h(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#r?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#c.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Ur{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Ur.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Ur.#i[t]),a.addEventListener("input",()=>{this.#n.updateParams(e,a.value)},{signal:this.#n._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Zy(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Cr(r){return Math.max(0,Math.min(255,255*r))}class Yy{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Cr(t),[t,t,t]}static G_HTML([t]){const e=Zy(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Cr)}static RGB_HTML(t){return`#${t.map(Zy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[Cr(1-Math.min(1,t+a)),Cr(1-Math.min(1,i+a)),Cr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,l=1-e,c=1-i,h=Math.min(a,l,c);return["CMYK",a,l,c,h]}}class BC{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){qt("Abstract method `_createSVG` called.")}}class Il extends BC{_createSVG(t){return document.createElementNS(hi,t)}}class S0{static setupStorage(t,e,i,a,l){const c=a.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of i.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:l}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&l.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,l=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:l,linkService:i});const h=l!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);c.append(y),h&&Fr.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[y,b,v]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const A=y.children[++g.at(-1)[1]];if(A===null)continue;const{name:S}=A;if(S==="#text"){const T=document.createTextNode(A.value);f.push(T),v.append(T);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,S):document.createElement(S);if(v.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:e,intent:l,linkService:i}),A.children?.length>0)g.push([A,-1,E]);else if(A.value){const T=document.createTextNode(A.value);h&&Fr.shouldBuildText(S)&&f.push(T),E.append(T)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const PC=9,Es=new WeakSet,jC=new Date().getTimezoneOffset()*60*1e3;class Ky{static create(t){switch(t.data.annotationType){case fe.LINK:return new Md(t);case fe.TEXT:return new FC(t);case fe.WIDGET:switch(t.data.fieldType){case"Tx":return new IC(t);case"Btn":return t.data.radioButton?new w0(t):t.data.checkBox?new HC(t):new qC(t);case"Ch":return new GC(t);case"Sig":return new UC(t)}return new Cs(t);case fe.POPUP:return new sd(t);case fe.FREETEXT:return new E0(t);case fe.LINE:return new VC(t);case fe.SQUARE:return new XC(t);case fe.CIRCLE:return new ZC(t);case fe.POLYLINE:return new T0(t);case fe.CARET:return new KC(t);case fe.INK:return new Dd(t);case fe.POLYGON:return new YC(t);case fe.HIGHLIGHT:return new x0(t);case fe.UNDERLINE:return new JC(t);case fe.SQUIGGLY:return new QC(t);case fe.STRIKEOUT:return new WC(t);case fe.STAMP:return new C0(t);case fe.FILEATTACHMENT:return new tR(t);default:return new oe(t)}}}class oe{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return oe._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:t,rect:e}=this.data;let i=-1/0,a=-1/0;if(t?.length>=8){for(let l=0;l<t.length;l+=8)t[l+1]>a?(a=t[l+1],i=t[l+2]):t[l+1]===a&&(i=Math.max(i,t[l+2]));return[i,a]}return e?[e[2],e[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[t,e,i]=this.data.color,l=255*(1-(this.data.opacity??1));return this.#i(Math.min(t+l,255),Math.min(e+l,255),Math.min(i+l,255))}#i(t,e,i){t/=255,e/=255,i/=255;const a=Math.max(t,e,i),l=Math.min(t,e,i),c=(a+l)/2,h=((1+Math.sqrt(c))/2*100).toFixed(2);if(a===l)return`hsl(0, 0%, ${h}%)`;const d=a-l;let f;a===t?f=(e-i)/d+(e<i?6:0):a===e?f=(i-t)/d+2:f=(t-e)/d+4,f=(f*60).toFixed(2);const g=(d/(1-Math.abs(2*c-1))*100).toFixed(2);return`hsl(${f}, ${g}%, ${h}%)`}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/i,t[1]=100*(t[1]-c)/a,t}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#a(e);let a=this.#n?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#n.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#a(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#a(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof Cs)&&!(this instanceof Md)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof sd){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(S>0||E>0){const O=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;c.borderRadius=O}else if(this instanceof w0){const O=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=O}switch(e.borderStyle.style){case fa.SOLID:c.borderStyle="solid";break;case fa.DASHED:c.borderStyle="dashed";break;case fa.BEVELED:_t("Unimplemented border style: beveled");break;case fa.INSET:_t("Unimplemented border style: inset");break;case fa.UNDERLINE:c.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(this.#e=!0,c.borderColor=it.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const f=it.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:v}=a.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-v)/y}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*h/g}%`,c.height=`${100*d/y}%`):this.setRotation(A,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const l=a.detail[e],c=l[0],h=l.slice(1);a.target.style[i]=Yy[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:Yy[`${c}_rgb`](h)})};return xt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,l]of Object.entries(e)){const c=i[a];if(c){const h={detail:{[a]:l},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,E,T,O]=t.subarray(2,6);if(a===S&&l===E&&e===T&&i===O)return}const{style:c}=this.container;let h;if(this.#e){const{borderColor:S,borderWidth:E}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=a-e,f=l-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const v=g.createElement("clipPath"),A=`clippath_${this.data.id}`;v.setAttribute("id",A),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let S=2,E=t.length;S<E;S+=8){const T=t[S],O=t[S+1],x=t[S+2],D=t[S+3],k=g.createElement("rect"),B=(x-e)/d,F=(l-O)/f,X=(T-x)/d,J=(O-D)/f;k.setAttribute("x",B),k.setAttribute("y",F),k.setAttribute("width",X),k.setAttribute("height",J),v.append(k),h?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${F}" width="${X}" height="${J}"/>`)}this.#e&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate);const l=this.#n=new sd({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(l.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:c,exportValues:h}of a){if(l===-1||c===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Es.has(f)){_t(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,c=a.getAttribute("data-element-id");c!==e&&Es.has(a)&&i.push({id:c,exportValue:l,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Md extends oe{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#n(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#n(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const l=i.get(a);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:l,include:c}=e,h=[];if(a.length!==0||l.length!==0){const g=new Set(l);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:v}of b)g.add(v)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===c&&h.push(b)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,f=[];for(const g of h){const{id:y}=g;switch(f.push(y),g.type){case"text":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=g.defaultValue===g.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!Es.has(b)){_t(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class FC extends oe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Cs extends oe{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return De.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,l){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c)}})})}_setEventListeners(t,e,i,a){for(const[l,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":it.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||PC,l=t.style;let c;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(f/(kh*a))||1,y=f/g;c=Math.min(a,d(y/kh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,d(f/kh))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=it.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class IC extends Cs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),l.setValue(c.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Es.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",A=>{const S=this.data.defaultFieldValue??"";i.value=d.userValue=S,d.formattedValue=null});let v=A=>{const{formattedValue:S}=d;S!=null&&(A.target.value=S),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{if(d.focused)return;const{target:E}=S;if(b&&(E.type=g,y&&(E.step=y)),d.userValue){const T=d.userValue;if(b)if(g==="time"){const O=new Date(T),x=[O.getHours(),O.getMinutes(),O.getSeconds()];E.value=x.map(D=>D.toString().padStart(2,"0")).join(":")}else E.value=new Date(T-jC).toISOString().split(g==="date"?"T":".",1)[0];else E.value=T}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(T){d.userValue=T.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),T.target.value=d.userValue},formattedValue(T){const{formattedValue:O}=T.detail;d.formattedValue=O,O!=null&&T.target!==document.activeElement&&(T.target.value=O);const x={formattedValue:O};b&&(x.value=O),t.setValue(e,x)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:O}=T.detail,{target:x}=T;if(O===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",O);let D=d.userValue;!D||D.length<=O||(D=D.slice(0,O),x.value=d.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),i.addEventListener("keydown",S=>{d.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:T}=S.target;d.lastCommittedValue!==T&&(d.lastCommittedValue=T,d.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const A=v;v=null,i.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=S;let{value:T}=E;if(b){if(T&&g==="time"){const O=T.split(":").map(x=>parseInt(x,10));T=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),E.step=""}else T=new Date(T).valueOf();E.type="text"}d.userValue=T,d.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),A(S)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:E,target:T}=S,{value:O,selectionStart:x,selectionEnd:D}=T;let k=x,B=D;switch(S.inputType){case"deleteWordBackward":{const F=O.substring(0,x).match(/\w*[^\w]*$/);F&&(k-=F[0].length);break}case"deleteWordForward":{const F=O.substring(x).match(/^[^\w]*\w*/);F&&(B+=F[0].length);break}case"deleteContentBackward":x===D&&(k-=1);break;case"deleteContentForward":x===D&&(B+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,change:E||"",willCommit:!1,selStart:k,selEnd:B}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class UC extends Cs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class HC extends Cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Es.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class w0 extends Cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(Es.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===i;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class qC extends Md{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class GC extends Cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Es.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),l=!1),a.append(y)}let c=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=g=>{const y=g?"value":"textContent",{options:b,multiple:v}=a;return v?Array.prototype.filter.call(b,A=>A.selected).map(A=>A[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=h(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){c?.();const v=b.detail.value,A=new Set(Array.isArray(v)?v:[v]);for(const S of a.options)S.selected=A.has(S.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(b){a.multiple=!0},remove(b){const v=a.options,A=b.detail.remove;v[A].selected=!1,a.remove(A),v.length>0&&Array.prototype.findIndex.call(v,E=>E.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(b){const{index:v,displayValue:A,exportValue:S}=b.detail.insert,E=a.children[v],T=document.createElement("option");T.textContent=A,T.value=S,E?E.before(T):a.append(T),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},items(b){const{items:v}=b.detail;for(;a.length!==0;)a.remove(0);for(const A of v){const{displayValue:S,exportValue:E}=A,T=document.createElement("option");T.textContent=S,T.value=E,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},indices(b){const v=new Set(b.detail.indices);for(const A of b.target.options)A.selected=v.has(A.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=h(!0),b=h(!1);t.setValue(e,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class sd extends oe{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:oe._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new $C({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${_d}${a}`).join(",")),this.container}}class $C{#t=this.#L.bind(this);#e=this.#T.bind(this);#n=this.#F.bind(this);#i=this.#D.bind(this);#a=null;#s=null;#r=null;#o=null;#l=null;#c=null;#d=null;#u=null;#f=!1;#g=null;#p=null;#h=null;#m=null;#v=null;#y=null;#A=null;#S=null;#b=null;#w=null;#R=!1;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:l,contentsObj:c,richText:h,parent:d,rect:f,parentRect:g,open:y,eventBus:b=null}){this.#s=t,this.#b=a,this.#r=c,this.#S=h,this.#d=d,this.#a=e,this.#A=f,this.#u=g,this.#l=i,this.#c=b,this.#o=Wh.toDateObject(l),this.trigger=i.flatMap(v=>v.getElementsToTriggerPopup()),this.#x(),this.#s.hidden=!0,y&&this.#D()}#x(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#i,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#t,{signal:t});this.#N()}#E(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#v=t._normalizePoint(t.commentButtonPosition),this.#y=t.commentButtonColor)}#N(){if(this.#m||(this.#v||this.#E(),!this.#v))return;const t=this.#m=document.createElement("button");t.className="annotationCommentButton";const e=this.#l[0].container;t.style.zIndex=e.style.zIndex+1,t.tabIndex=0;const{signal:i}=this.#p;t.addEventListener("hover",this.#i,{signal:i}),t.addEventListener("keydown",this.#t,{signal:i}),t.addEventListener("click",()=>{const[{data:{id:l},annotationEditorType:c}]=this.#l;this.#c?.dispatch("switchannotationeditormode",{source:this,editId:l,mode:c,editComment:!0})},{signal:i});const{style:a}=t;a.left=`calc(${this.#v[0]}%)`,a.top=`calc(${this.#v[1]}% - var(--comment-button-dim))`,this.#y&&(a.backgroundColor=this.#y),e.after(t)}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const a=t.style.outlineColor=it.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#b?.str){const a=document.createElement("span");a.className="title",e.append(a),{dir:a.dir,str:a.textContent}=this.#b}if(t.append(e),this.#o){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),a.dateTime=this.#o.toISOString(),e.append(a)}const i=this.#C;if(i)S0.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(this.#r);t.append(a)}this.#s.append(t)}get#C(){const t=this.#S,e=this.#r;return t?.str&&(!e?.str||e.str===t.str)&&this.#S.html||null}get#O(){return this.#C?.attributes?.style?.fontSize||0}get#z(){return this.#C?.attributes?.style?.color||null}#k(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#z,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let l=0,c=a.length;l<c;++l){const h=a[l];i.append(document.createTextNode(h)),l<c-1&&i.append(document.createElement("br"))}return i}#L(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#D()}updateEdited({rect:t,popup:e,deleted:i}){if(i||e?.deleted){this.remove();return}this.#x(),this.#w||={contentsObj:this.#r,richText:this.#S},t&&(this.#h=null),e&&(this.#S=this.#k(e.text),this.#o=Wh.toDateObject(e.date),this.#r=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#r,richText:this.#S}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#h=null)}remove(){this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#R=!1,this.#f=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#B(){if(this.#h!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:l}}}=this.#d;let c=!!this.#u,h=c?this.#u:this.#A;for(const A of this.#l)if(!h||it.intersect(A.data.rect,h)!==null){h=A.data.rect,c=!0;break}const d=it.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=c?h[2]-h[0]+5:0,y=d[0]+g,b=d[1];this.#h=[100*(y-a)/e,100*(b-l)/i];const{style:v}=this.#s;v.left=`${this.#h[0]}%`,v.top=`${this.#h[1]}%`}#D(){this.#f=!this.#f,this.#f?(this.#F(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#T(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#F(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#B(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#T(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#R=this.isVisible,this.#R&&(this.#s.hidden=!0)}maybeShow(){this.#x(),this.#R&&(this.#g||this.#F(),this.#R=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class E0 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class VC extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class XC extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",e-l),c.setAttribute("height",i-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ZC extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-l/2),c.setAttribute("ry",i/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class T0 extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:l,height:c}=this;if(!e)return this.container;const h=this.svgFactory.create(l,c,!0);let d=[];for(let g=0,y=e.length;g<y;g+=2){const b=e[g]-t[0],v=t[3]-e[g+1];d.push(`${b},${v}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class YC extends T0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class KC extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Dd extends oe{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:c,width:h,height:d}=this.#n(e,t),f=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,b=i.length;y<b;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",i[y].join(",")),g.append(v)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let c=0,h=this.#e.length;c<h;c++)this.#e[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:h,height:d}=this.#n(this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:e}=this.data;if(t?.length>=1){let i=-1/0,a=-1/0;for(const l of t)for(let c=0,h=l.length;c<h;c+=2)l[c+1]>a?(a=l[c+1],i=l[c]):l[c+1]===a&&(i=Math.max(i,l[c]));if(i!==1/0)return[i,a]}return e?[e[2],e[3]]:null}}class x0 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class JC extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class QC extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class WC extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class C0 extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class tR extends oe{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=De.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Nd{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:l,viewport:c,structTreeLayer:h}){this.div=t,this.#t=e,this.#e=i,this.#i=h||null,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){const a=t.firstChild||t,l=a.id=`${_d}${e}`,c=await this.#i?.getAriaAttributes(l);if(c)for(const[h,d]of c)a.setAttribute(h,d);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;ws(i,this.viewport);const a=new Map,l={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Il,annotationStorage:t.annotationStorage||new Td,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const h=c.annotationType===fe.POPUP;if(h){const g=a.get(c.id);if(!g)continue;l.elements=g}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const d=Ky.create(l);if(!d.isRenderable)continue;if(!h&&c.popupRef){const g=a.get(c.popupRef);g?g.push(d):a.set(c.popupRef,[d])}const f=d.render();c.hidden&&(f.style.visibility="hidden"),await this.#a(f,c.id,l.elements),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#s()}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new Il,parent:this};for(const a of t){a.borderStyle||=Nd._defaultBorderStyle,i.data=a;const l=Ky.create(i);if(!l.isRenderable)continue;const c=l.render();await this.#a(c,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ws(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):a.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return xt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const xl=/\r\n?|\n/g;class Se extends ct{#t;#e="";#n=`${this.id}-editor`;#i=null;#a;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Se.prototype,e=l=>l.isEmpty(),i=$i.TRANSLATE_SMALL,a=$i.TRANSLATE_BIG;return xt(this,"_keyboardManager",new Yr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=yt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||Se._defaultColor||ct._defaultLineColor,this.#a=t.fontSize||Se._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){ct.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Nt.FREETEXT_SIZE:Se._defaultFontSize=e;break;case Nt.FREETEXT_COLOR:Se._defaultColor=e;break}}updateParams(t,e){switch(t){case Nt.FREETEXT_SIZE:this.#s(e);break;case Nt.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[Nt.FREETEXT_SIZE,Se._defaultFontSize],[Nt.FREETEXT_COLOR,Se._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[Nt.FREETEXT_SIZE,this.#a],[Nt.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new Ur(this),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.FREETEXT_COLOR}get colorValue(){return this.#t}#s(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#a)*this.parentScale),this.#a=a,this.#l()},i=this.#a;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#r(t){const e=a=>{this.#t=this.editorDiv.style.color=a,this._colorPicker?.update(a)},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Se._internalPadding*t,-(Se._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Se.#c(i)),e=i);return t.join(`
`)}#l(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Se._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let v,A;switch(this.rotation){case 0:v=t+(c[0]-y)/f,A=e+this.height-(c[1]-b)/g;break;case 90:v=t+(c[0]-y)/f,A=e-(c[1]-b)/g,[h,d]=[d,-h];break;case 180:v=t-this.width+(c[0]-y)/f,A=e-(c[1]-b)/g,[h,d]=[-h,-d];break;case 270:v=t+(c[0]-y-this.height*g)/f,A=e+(c[1]-b-this.width*f)/g,[h,d]=[-d,h];break}this.setAt(v*a,A*l,h,d)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=Se.#f(e.getData("text")||"").replaceAll(xl,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=c,f=[],g=[];if(h.nodeType===Node.TEXT_NODE){const v=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(xl,"")),v!==this.editorDiv){let A=f;for(const S of this.editorDiv.childNodes){if(S===v){A=g;continue}A.push(Se.#c(S))}}f.push(h.nodeValue.slice(0,d).replaceAll(xl,""))}else if(h===this.editorDiv){let v=f,A=0;for(const S of this.editorDiv.childNodes)A++===d&&(v=g),v.push(Se.#c(S))}this.#e=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#d();const y=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const A=v.nodeValue.length;if(b<=A){y.setStart(v,b),y.setEnd(v,b);break}b-=A}l.removeAllRanges(),l.addRange(y)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Se._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof E0){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:f,id:g,popupRef:y,contentsObj:b},textContent:v,textPosition:A,parent:{page:{pageNumber:S}}}=t;if(!v||v.length===0)return null;a=t={annotationType:yt.FREETEXT,color:Array.from(h),fontSize:c,value:v.join(`
`),position:A,pageIndex:S-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:b?.str||null}}const l=await super.deserialize(t,e,i);return l.#a=t.fontSize,l.#t=it.makeHexColor(...t.color),l.#e=Se.#f(t.value),l._initialData=a,t.comment&&l.setCommentData(t.comment),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),i=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:yt.FREETEXT,color:i,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!this.#g(a)?null:(a.id=this.annotationElementId,a)}#g(t){const{value:e,fontSize:i,color:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,h)=>c!==a[h])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,e.replaceChildren();for(const l of this.#e.split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),e.append(c)}const a={rect:this.getPDFRect()};return a.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(a),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){qt("Abstract method `toSVGPath` must be implemented.")}get box(){qt("Abstract getter `box` must be implemented.")}serialize(t,e){qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h]*a,c[h+1]=i+t[h+1]*l;return c}static _rescaleAndSwap(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h+1]*a,c[h+1]=i+t[h]*l;return c}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l],a[l+1]=i+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,l){switch(l){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,l,c){return[(t+5*i)/6,(e+5*a)/6,(5*i+l)/6,(5*a+c)/6,(i+l)/2,(a+c)/2]}}class gs{#t;#e=[];#n;#i;#a=[];#s=new Float32Array(18);#r;#o;#l;#c;#d;#u;#f=[];static#g=8;static#p=2;static#h=gs.#g+gs.#p;constructor({x:t,y:e},i,a,l,c,h=0){this.#t=i,this.#u=l*a,this.#i=c,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=h,this.#c=gs.#g*a,this.#l=gs.#h*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,a,l,c]=this.#t;return[(this.#r+(t[0]-e[0])/2-i)/l,(this.#o+(t[1]-e[1])/2-a)/c,(this.#r+(e[0]-t[0])/2-i)/l,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#r=t,this.#o=e;const[i,a,l,c]=this.#t;let[h,d,f,g]=this.#s.subarray(8,12);const y=t-f,b=e-g,v=Math.hypot(y,b);if(v<this.#l)return!1;const A=v-this.#c,S=A/v,E=S*y,T=S*b;let O=h,x=d;h=f,d=g,f+=E,g+=T,this.#f?.push(t,e);const D=-T/A,k=E/A,B=D*this.#u,F=k*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+B,g+F],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-B,g-F],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([h+B,d+F],2),this.#a.push(NaN,NaN,NaN,NaN,(h+B-i)/l,(d+F-a)/c),this.#s.set([h-B,d-F],14),this.#e.push(NaN,NaN,NaN,NaN,(h-B-i)/l,(d-F-a)/c)),this.#s.set([O,x,h,d,f,g],6),!this.isEmpty()):(this.#s.set([O,x,h,d,f,g],6),Math.abs(Math.atan2(x-d,O-h)-Math.atan2(T,E))<Math.PI/2?([h,d,f,g]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((h+f)/2-i)/l,((d+g)/2-a)/c),[h,d,O,x]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((O+h)/2-i)/l,((x+d)/2-a)/c),!0):([O,x,h,d,f,g]=this.#s.subarray(0,6),this.#a.push(((O+5*h)/6-i)/l,((x+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+g)/6-a)/c,((h+f)/2-i)/l,((d+g)/2-a)/c),[f,g,h,d,O,x]=this.#s.subarray(12,18),this.#e.push(((O+5*h)/6-i)/l,((x+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+g)/6-a)/c,((h+f)/2-i)/l,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#A(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#y(i),i.join(" ")}#v(){const[t,e,i,a]=this.#t,[l,c,h,d]=this.#m();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-e)/a} L${(this.#s[4]-t)/i} ${(this.#s[5]-e)/a} L${l} ${c} L${h} ${d} L${(this.#s[16]-t)/i} ${(this.#s[17]-e)/a} L${(this.#s[14]-t)/i} ${(this.#s[15]-e)/a} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#A(t){const[e,i,a,l]=this.#t,c=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[d,f,g,y]=this.#m();t.push(`L${(c[0]-e)/a} ${(c[1]-i)/l} L${d} ${f} L${g} ${y} L${(h[0]-e)/a} ${(h[1]-i)/l}`)}newFreeDrawOutline(t,e,i,a,l,c){return new R0(t,e,i,a,l,c)}getOutlines(){const t=this.#a,e=this.#e,i=this.#s,[a,l,c,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/c,d[y+1]=(this.#f[y+1]-l)/h;if(d[d.length-2]=(this.#r-a)/c,d[d.length-1]=(this.#o-l)/h,isNaN(i[6])&&!this.isEmpty())return this.#S(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#w(f,g);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[y+b],f[g+1]=e[y+b+1],g+=2}return this.#b(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#S(t){const e=this.#s,[i,a,l,c]=this.#t,[h,d,f,g]=this.#m(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#b(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#w(t,e){const i=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[l,c,h,d]=this.#t,[f,g,y,b]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/h,(i[1]-c)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-l)/h,(a[1]-c)/d],e),e+=24}}class R0 extends et{#t;#e=new Float32Array(4);#n;#i;#a;#s;#r;constructor(t,e,i,a,l,c){super(),this.#r=t,this.#a=e,this.#t=i,this.#s=a,this.#n=l,this.#i=c,this.lastPoint=[NaN,NaN],this.#o(c);const[h,d,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-h)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-h)/f,e[y+1]=(e[y+1]-d)/g}toSVGPath(){const t=[`M${this.#r[4]} ${this.#r[5]}`];for(let e=6,i=this.#r.length;e<i;e+=6){if(isNaN(this.#r[e])){t.push(`L${this.#r[e+4]} ${this.#r[e+5]}`);continue}t.push(`C${this.#r[e]} ${this.#r[e+1]} ${this.#r[e+2]} ${this.#r[e+3]} ${this.#r[e+4]} ${this.#r[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],l){const c=i-t,h=a-e;let d,f;switch(l){case 0:d=et._rescale(this.#r,t,a,c,-h),f=et._rescale(this.#a,t,a,c,-h);break;case 90:d=et._rescaleAndSwap(this.#r,t,e,c,h),f=et._rescaleAndSwap(this.#a,t,e,c,h);break;case 180:d=et._rescale(this.#r,i,e,-c,h),f=et._rescale(this.#a,i,e,-c,h);break;case 270:d=et._rescaleAndSwap(this.#r,i,a,-c,-h),f=et._rescaleAndSwap(this.#a,i,a,-c,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#r;let i=e[4],a=e[5];const l=[i,a,i,a];let c=i,h=a;const d=t?Math.max:Math.min;for(let g=6,y=e.length;g<y;g+=6){const b=e[g+4],v=e[g+5];if(isNaN(e[g]))it.pointBoundingBox(b,v,l),h<v?(c=b,h=v):h===v&&(c=d(c,b));else{const A=[1/0,1/0,-1/0,-1/0];it.bezierBoundingBox(i,a,...e.slice(g,g+6),A),it.rectBoundingBox(...A,l),h<A[3]?(c=A[2],h=A[3]):h===A[3]&&(c=d(c,A[2]))}i=b,a=v}const f=this.#e;f[0]=l[0]-this.#n,f[1]=l[1]-this.#n,f[2]=l[2]-l[0]+2*this.#n,f[3]=l[3]-l[1]+2*this.#n,this.lastPoint=[c,h]}get box(){return this.#e}newOutliner(t,e,i,a,l,c=0){return new gs(t,e,i,a,l,c)}getNewOutline(t,e){const[i,a,l,c]=this.#e,[h,d,f,g]=this.#t,y=l*f,b=c*g,v=i*f+h,A=a*g+d,S=this.newOutliner({x:this.#a[0]*y+v,y:this.#a[1]*b+A},this.#t,this.#s,t,this.#i,e??this.#n);for(let E=2;E<this.#a.length;E+=2)S.add({x:this.#a[E]*y+v,y:this.#a[E+1]*b+A});return S.getOutlines()}}class ad{#t;#e;#n=[];#i=[];constructor(t,e=0,i=0,a=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:v,y:A,width:S,height:E}of t){const T=Math.floor((v-e)/c)*c,O=Math.ceil((v+S+e)/c)*c,x=Math.floor((A-e)/c)*c,D=Math.ceil((A+E+e)/c)*c,k=[T,x,D,!0],B=[O,x,D,!1];this.#n.push(k,B),it.rectBoundingBox(T,x,O,D,l)}const h=l[2]-l[0]+2*i,d=l[3]-l[1]+2*i,f=l[0]-i,g=l[1]-i,y=this.#n.at(a?-1:-2),b=[y[0],y[2]];for(const v of this.#n){const[A,S,E]=v;v[0]=(A-f)/h,v[1]=(S-g)/d,v[2]=(E-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=b}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#r(e)):(this.#o(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],i=new Set;for(const c of t){const[h,d,f]=c;e.push([h,d,c],[h,f,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let l;for(;i.size>0;){const c=i.values().next().value;let[h,d,f,g,y]=c;i.delete(c);let b=h,v=d;for(l=[h,f],a.push(l);;){let A;if(i.has(g))A=g;else if(i.has(y))A=y;else break;i.delete(A),[h,d,f,g,y]=A,b!==h&&(l.push(b,v,h,v===d?d:f),b=h),v=v===d?f:d}l.push(b,v)}return new eR(a,this.#t,this.#e)}#s(t){const e=this.#i;let i=0,a=e.length-1;for(;i<=a;){const l=i+a>>1,c=e[l][0];if(c===t)return l;c<t?i=l+1:a=l-1}return a+1}#r([,t,e]){const i=this.#s(t);this.#i.splice(i,0,[t,e])}#o([,t,e]){const i=this.#s(t);for(let a=i;a<this.#i.length;a++){const[l,c]=this.#i[a];if(l!==t)break;if(l===t&&c===e){this.#i.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[l,c]=this.#i[a];if(l!==t)break;if(l===t&&c===e){this.#i.splice(a,1);return}}}#l(t){const[e,i,a]=t,l=[[e,i,a]],c=this.#s(a);for(let h=0;h<c;h++){const[d,f]=this.#i[h];for(let g=0,y=l.length;g<y;g++){const[,b,v]=l[g];if(!(f<=b||v<=d)){if(b>=d){if(v>f)l[g][1]=f;else{if(y===1)return[];l.splice(g,1),g--,y--}continue}l[g][2]=d,v>f&&l.push([e,f,v])}}}return l}}class eR extends et{#t;#e;constructor(t,e,i){super(),this.#e=t,this.#t=e,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let l=2;l<e.length;l+=2){const c=e[l],h=e[l+1];c===i?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],l){const c=[],h=i-t,d=a-e;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*h,g[y+1]=a-f[y+1]*d;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class rd extends gs{newFreeDrawOutline(t,e,i,a,l,c){return new nR(t,e,i,a,l,c)}}class nR extends R0{newOutliner(t,e,i,a,l,c=0){return new rd(t,e,i,a,l,c)}}class ae extends ct{#t=null;#e=0;#n;#i=null;#a=null;#s=null;#r=null;#o=0;#l=null;#c=null;#d=null;#u=!1;#f=null;#g;#p=null;#h="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=yt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ae.prototype;return xt(this,"_keyboardManager",new Yr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ae._defaultColor,this.#m=t.thickness||ae._defaultThickness,this.#g=t.opacity||ae._defaultOpacity,this.#n=t.boxes||null,this.#v=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#A(t),this.#x()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#r=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new ad(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new ad(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:i}=this.#s;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#c=t;const a=1.5;if(this.#s=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ae.#E(this.#c.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ae.#E(this.#s.box,g),path:{d:this.#s.toSVGPath()}})}const[l,c,h,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=h,this.height=d;break;case 90:{const[g,y]=this.parentDimensions;this.x=c,this.y=1-l,this.width=h*y/g,this.height=d*g/y;break}case 180:this.x=1-l,this.y=1-c,this.width=h,this.height=d;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-c,this.y=l,this.width=h*y/g,this.height=d*g/y;break}}const{lastPoint:f}=this.#s;this.#f=[(f[0]-l)/h,(f[1]-c)/d]}static initialize(t,e){ct.initialize(t,e),ae._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Nt.HIGHLIGHT_COLOR:ae._defaultColor=e;break;case Nt.HIGHLIGHT_THICKNESS:ae._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Nt.HIGHLIGHT_COLOR:this.#S(e);break;case Nt.HIGHLIGHT_THICKNESS:this.#b(e);break}}static get defaultPropertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,ae._defaultColor],[Nt.HIGHLIGHT_THICKNESS,ae._defaultThickness]]}get propertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,this.color||ae._defaultColor],[Nt.HIGHLIGHT_THICKNESS,this.#m||ae._defaultThickness],[Nt.HIGHLIGHT_FREE,this.#u]]}#S(t){const e=(l,c)=>{this.color=l,this.#g=c,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:l,"fill-opacity":c}}),this.#a?.updateColor(l)},i=this.color,a=this.#g;this.addCommands({cmd:e.bind(this,t,ae._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#b(t){const e=this.#m,i=a=>{this.#m=a,this.#w(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new En({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#O())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#R():t&&(this.#x(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){if(!this.#u)return;this.#A({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#x(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#i))}static#E([t,e,i,a],l){switch(l){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#u?(t=(t-this.rotation+360)%360,i=ae.#E(this.#c.box,t)):i=ae.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:ae.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const e=this.#l=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),n0(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#N(t){ae._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#r,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#C(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#O(){return this.#u?this.rotation:0}#z(){if(this.#u)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,l=this.#n,c=new Float32Array(l.length*8);let h=0;for(const{x:d,y:f,width:g,height:y}of l){const b=d*t+i,v=(1-f)*e+a;c[h]=c[h+4]=b,c[h+1]=c[h+3]=v,c[h+2]=c[h+6]=b+g*t,c[h+5]=c[h+7]=v-y*e,h+=8}return c}#k(t){return this.#c.serialize(t,this.#O())}static startHighlighting(t,e,{target:i,x:a,y:l}){const{x:c,y:h,width:d,height:f}=i.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=v=>{g.abort(),this.#B(t,v)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",pe,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Tn,{signal:y}),i.addEventListener("pointermove",this.#L.bind(this,t),{signal:y}),this._freeHighlight=new rd({x:a,y:l},[c,h,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof x0){const{data:{quadPoints:A,rect:S,rotation:E,id:T,color:O,opacity:x,popupRef:D,contentsObj:k},parent:{page:{pageNumber:B}}}=t;a=t={annotationType:yt.HIGHLIGHT,color:Array.from(O),opacity:x,quadPoints:A,boxes:null,pageIndex:B-1,rect:S.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:D,comment:k?.str||null}}else if(t instanceof Dd){const{data:{inkLists:A,rect:S,rotation:E,id:T,color:O,borderStyle:{rawWidth:x},popupRef:D,contentsObj:k},parent:{page:{pageNumber:B}}}=t;a=t={annotationType:yt.HIGHLIGHT,color:Array.from(O),thickness:x,inkLists:A,boxes:null,pageIndex:B-1,rect:S.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:D,comment:k?.str||null}}const{color:l,quadPoints:c,inkLists:h,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=it.makeHexColor(...l),f.#g=d||1,h&&(f.#m=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t.comment);const[g,y]=f.pageDimensions,[b,v]=f.pageTranslation;if(c){const A=f.#n=[];for(let S=0;S<c.length;S+=8)A.push({x:(c[S]-b)/g,y:1-(c[S+1]-v)/y,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/y});f.#y(),f.#x(),f.rotate(f.rotation)}else if(h){f.#u=!0;const A=h[0],S={x:A[0]-b,y:y-(A[1]-v)},E=new rd(S,[0,0,g,y],1,f.#m/2,!0,.001);for(let x=0,D=A.length;x<D;x+=2)S.x=A[x]-b,S.y=y-(A[x+1]-v),E.add(S);const{id:T,clipPathId:O}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#A({highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:O}),f.#x(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getPDFRect(),i=ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a={annotationType:yt.HIGHLIGHT,color:i,opacity:this.#g,thickness:this.#m,quadPoints:this.#z(),outlines:this.#k(e),pageIndex:this.pageIndex,rect:e,rotation:this.#O(),structTreeParentId:this._structTreeParentId};return this.addComment(a),this.annotationElementId&&!this.#D(a)?null:(a.id=this.annotationElementId,a)}#D(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class O0{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){qt("Not implemented")}}class ht extends ct{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#s=NaN;static#r=null;static#o=null;static#l=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(ht._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(e))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){qt("Not implemented")}static get typesMap(){qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(ht.#n.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,l=a[e],c=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(h)};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,a]){const{parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[e,1-t,i*(c/l),a*(l/c)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(c/l),a*(l/c)];default:return[t,e,i,a]}}#p(){const{x:t,y:e,width:i,height:a,parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[1-e,t,i*(l/c),a*(c/l)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(l/c),a*(c/l)];default:return[t,e,i,a]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}this._onResized()}#m(){const{x:t,y:e,width:i,height:a,rotation:l,parentRotation:c,parentDimensions:[h,d]}=this;switch((l*4+c)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(h/d),a*(d/h),i*(h/d)];case 5:return[1-e,t,i*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),i*(h/d)];case 7:return[e-i*(h/d),1-t-a*(d/h),i*(h/d),a*(d/h)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/h),e,a*(d/h),i*(h/d)];case 13:return[1-e-i*(h/d),t-a*(d/h),i*(h/d),a*(d/h)];case 14:return[1-t,1-e-i*(h/d),a*(d/h),i*(h/d)];case 15:return[e,1-t,i*(h/d),a*(d/h)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[l,c]=this.parentDimensions;return this.setDims(this.width*l,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,l){qt("Not implemented")}static startDrawing(t,e,i,a){const{target:l,offsetX:c,offsetY:h,pointerId:d,pointerType:f}=a;if(ht.#r&&ht.#r!==f)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=l.getBoundingClientRect(),v=ht.#i=new AbortController,A=t.combinedSignal(v);if(ht.#s||=d,ht.#r??=f,window.addEventListener("pointerup",S=>{ht.#s===S.pointerId?this._endDraw(S):ht.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointercancel",S=>{ht.#s===S.pointerId?this._currentParent.endDrawingSession():ht.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointerdown",S=>{ht.#r===S.pointerType&&((ht.#o||=new Set).add(S.pointerId),ht.#n.isCancellable()&&(ht.#n.removeLastElement(),ht.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Tn,{signal:A}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),l.addEventListener("touchmove",S=>{S.timeStamp===ht.#l&&pe(S)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),ht.#n){t.drawLayer.updateProperties(this._currentDrawId,ht.#n.startNew(c,h,y,b,g));return}e.updateUIForDefaultProperties(this),ht.#n=this.createDrawerInstance(c,h,y,b,g),ht.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ht.#a.toSVGProperties(),ht.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ht.#l=-1,!ht.#n)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(ht.#s===a){if(ht.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ht.#n.add(e,i)),ht.#l=t.timeStamp,pe(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ht.#n=null,ht.#a=null,ht.#r=null,ht.#l=NaN),ht.#i&&(ht.#i.abort(),ht.#i=null,ht.#s=NaN,ht.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,ht.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=ht.#n,a=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Nt.DRAW_STEP),!ht.#n.isEmpty()){const{pageDimensions:[i,a],scale:l}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ht.#n.getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:ht.#a,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,l,c){qt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}=e.viewport,d=this.deserializeDraw(c,h,a,l,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#c({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,l]=this.pageDimensions;return this.#t.serialize([e,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class iR{#t=new Float64Array(6);#e;#n;#i;#a;#s;#r="";#o=0;#l=new Jr;#c;#d;constructor(t,e,i,a,l,c){this.#c=i,this.#d=a,this.#i=l,this.#a=c,[t,e]=this.#u(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return et._normalizePoint(t,e,this.#c,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#u(t,e);const[i,a,l,c]=this.#t.subarray(2,6),h=t-l,d=e-c;return Math.hypot(this.#c*h,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(i)?(this.#t.set([l,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,l,c,t,e],0),this.#e.push(...et.createBezierPoints(i,a,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,l){this.#c=i,this.#d=a,this.#i=l,[t,e]=this.#u(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const h=this.#n.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#n.push({line:c,points:this.#s}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#l.removeLastElement();this.#n.pop(),this.#r="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:a}=this.#n[t];this.#e=i,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const t=et.svgRound(this.#e[4]),e=et.svgRound(this.#e[5]);if(this.#s.length===2)return this.#r=`${this.#r} M ${t} ${e} Z`,this.#r;if(this.#s.length<=6){const a=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const a=et.svgRound(this.#e[10]),l=et.svgRound(this.#e[11]);return this.#r=`${this.#r} L ${a} ${l}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,l=this.#e.length;a<l;a+=6){const[c,h,d,f,g,y]=this.#e.slice(a,a+6).map(et.svgRound);i.push(`C${c} ${h} ${d} ${f} ${g} ${y}`)}return this.#r+=i.join(" "),this.#o=this.#e.length,this.#r}getOutlines(t,e,i,a){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#l.build(this.#n,t,e,i,this.#i,this.#a,a),this.#t=null,this.#e=null,this.#n=null,this.#r=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Jr extends et{#t;#e=0;#n;#i;#a;#s;#r;#o;#l;build(t,e,i,a,l,c,h){this.#a=e,this.#s=i,this.#r=a,this.#o=l,this.#l=c,this.#n=h??0,this.#i=t,this.#u()}get thickness(){return this.#l}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${et.svgRound(e[4])} ${et.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${et.svgRound(e[10])} ${et.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[l,c,h,d,f,g]=e.subarray(i,i+6).map(et.svgRound);t.push(`C${l} ${c} ${h} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,e,i,a],l){const c=[],h=[],[d,f,g,y]=this.#d();let b,v,A,S,E,T,O,x,D;switch(this.#o){case 0:D=et._rescale,b=t,v=e+a,A=i,S=-a,E=t+d*i,T=e+(1-f-y)*a,O=t+(d+g)*i,x=e+(1-f)*a;break;case 90:D=et._rescaleAndSwap,b=t,v=e,A=i,S=a,E=t+f*i,T=e+d*a,O=t+(f+y)*i,x=e+(d+g)*a;break;case 180:D=et._rescale,b=t+i,v=e,A=-i,S=a,E=t+(1-d-g)*i,T=e+f*a,O=t+(1-d)*i,x=e+(f+y)*a;break;case 270:D=et._rescaleAndSwap,b=t+i,v=e+a,A=-i,S=-a,E=t+(1-f-y)*i,T=e+(1-d-g)*a,O=t+(1-f)*i,x=e+(1-d)*a;break}for(const{line:k,points:B}of this.#i)c.push(D(k,b,v,A,S,l?new Array(k.length):null)),h.push(D(B,b,v,A,S,l?new Array(B.length):null));return{lines:c,points:h,rect:[E,T,O,x]}}static deserialize(t,e,i,a,l,{paths:{lines:c,points:h},rotation:d,thickness:f}){const g=[];let y,b,v,A,S;switch(d){case 0:S=et._rescale,y=-t/i,b=e/a+1,v=1/i,A=-1/a;break;case 90:S=et._rescaleAndSwap,y=-e/a,b=-t/i,v=1/a,A=1/i;break;case 180:S=et._rescale,y=t/i+1,b=-e/a,v=-1/i,A=1/a;break;case 270:S=et._rescaleAndSwap,y=e/a+1,b=t/i+1,v=-1/a,A=-1/i;break}if(!c){c=[];for(const T of h){const O=T.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const x=new Float32Array(3*(O-2));c.push(x);let[D,k,B,F]=T.subarray(0,4);x.set([NaN,NaN,NaN,NaN,D,k],0);for(let X=4;X<O;X+=2){const J=T[X],st=T[X+1];x.set(et.createBezierPoints(D,k,B,F,J,st),(X-2)*3),[D,k,B,F]=[B,F,J,st]}}}for(let T=0,O=c.length;T<O;T++)g.push({line:S(c[T].map(x=>x??NaN),y,b,v,A),points:S(h[T].map(x=>x??NaN),y,b,v,A)});const E=new this.prototype.constructor;return E.build(g,i,a,1,d,f,l),E}#c(t=this.#l){const e=this.#n+t/2*this.#r;return this.#o%180===0?[e/this.#a,e/this.#s]:[e/this.#s,e/this.#a]}#d(){const[t,e,i,a]=this.#t,[l,c]=this.#c(0);return[t+l,e+c,i-2*l,a-2*c]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)it.pointBoundingBox(a[h],a[h+1],t);continue}let l=a[4],c=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,g,y,b,v,A]=a.subarray(h,h+6);it.bezierBoundingBox(l,c,f,g,y,b,v,A,t),l=v,c=A}}const[e,i]=this.#c();t[0]=Fe(t[0]-e,0,1),t[1]=Fe(t[1]-i,0,1),t[2]=Fe(t[2]+e,0,1),t[3]=Fe(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#c();this.#l=t;const[a,l]=this.#c(),[c,h]=[a-e,l-i],d=this.#t;return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateParentDimensions([t,e],i){const[a,l]=this.#c();this.#a=t,this.#s=e,this.#r=i;const[c,h]=this.#c(),d=c-a,f=h-l,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,l=0,c=0,h=0,d=0;switch(this.#e){case 90:a=e/t,l=-t/e,h=t;break;case 180:i=-1,c=-1,h=t,d=e;break;case 270:a=-e/t,l=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${l} ${c} ${et.svgRound(h)} ${et.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[l,c]=this.#c(),[h,d,f,g]=this.#t;if(Math.abs(f-l)<=et.PRECISION||Math.abs(g-c)<=et.PRECISION){const S=t+i/2-(h+f/2),E=e+a/2-(d+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const y=(i-2*l)/(f-2*l),b=(a-2*c)/(g-2*c),v=f/i,A=g/a;return{path:{"transform-origin":`${et.svgRound(h)} ${et.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${A}) translate(${et.svgRound(l)} ${et.svgRound(c)}) scale(${y} ${b}) translate(${et.svgRound(-l)} ${et.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[l,c]=this.#c(),h=this.#t,[d,f,g,y]=h;if(h[0]=t,h[1]=e,h[2]=i,h[3]=a,Math.abs(g-l)<=et.PRECISION||Math.abs(y-c)<=et.PRECISION){const E=t+i/2-(d+g/2),T=e+a/2-(f+y/2);for(const{line:O,points:x}of this.#i)et._translate(O,E,T,O),et._translate(x,E,T,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*l)/(g-2*l),v=(a-2*c)/(y-2*c),A=-b*(d+l)+t+l,S=-v*(f+c)+e+c;if(b!==1||v!==1||A!==0||S!==0)for(const{line:E,points:T}of this.#i)et._rescale(E,A,S,b,v,E),et._rescale(T,A,S,b,v,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,l]=i,c=this.#t,h=t-c[0],d=e-c[1];if(this.#a===a&&this.#s===l)for(const{line:f,points:g}of this.#i)et._translate(f,h,d,f),et._translate(g,h,d,g);else{const f=this.#a/a,g=this.#s/l;this.#a=a,this.#s=l;for(const{line:y,points:b}of this.#i)et._rescale(y,h,d,f,g,y),et._rescale(b,h,d,f,g,b);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class ac extends O0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new ac(this._viewParameters);return t.updateAll(this),t}}class kd extends ht{static _type="ink";static _editorType=yt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ct.initialize(t,e),this._defaultDrawingOptions=new ac(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return xt(this,"typesMap",new Map([[Nt.INK_THICKNESS,"stroke-width"],[Nt.INK_COLOR,"stroke"],[Nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,l){return new iR(t,e,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,l,c){return Jr.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){let a=null;if(t instanceof Dd){const{data:{inkLists:c,rect:h,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:v,contentsObj:A},parent:{page:{pageNumber:S}}}=t;a=t={annotationType:yt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:S-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:v,comment:A?.str||null}}const l=await super.deserialize(t,e,i);return l._initialData=a,t.comment&&l.setCommentData(t.comment),l}get toolbarButtons(){return this._colorPicker||=new Ur(this),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=kd.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":c,"stroke-width":h}}=this,d={annotationType:yt.INK,color:ct._colorManager.convert(l),opacity:c,thickness:h,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,h)=>c!==e[h])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1),a={rect:i,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(a.popup=this.comment),t.updateEdited(a),null}}class od extends Jr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Cl=8,Rr=3;class ga{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const g=(-f+d-h+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(i+y)*e+(a+b)]!==0)return g}return-1}static#a(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const g=(f+d+h+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(i+y)*e+(a+b)]!==0)return g}return-1}static#s(t,e,i,a){const l=t.length,c=new Int32Array(l);for(let g=0;g<l;g++)c[g]=t[g]<=a?1:0;for(let g=1;g<i-1;g++)c[g*e]=c[g*e+e-1]=0;for(let g=0;g<e;g++)c[g]=c[e*i-1-g]=0;let h=1,d;const f=[];for(let g=1;g<i-1;g++){d=1;for(let y=1;y<e-1;y++){const b=g*e+y,v=c[b];if(v===0)continue;let A=g,S=y;if(v===1&&c[b-1]===0)h+=1,S-=1;else if(v>=1&&c[b+1]===0)h+=1,S+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const E=[y,g],T=S===y+1,O={isHole:T,points:E,id:h,parent:0};f.push(O);let x;for(const W of f)if(W.id===d){x=W;break}x?x.isHole?O.parent=T?x.parent:d:O.parent=T?d:x.parent:O.parent=T?d:0;const D=this.#i(c,e,g,y,A,S,0);if(D===-1){c[b]=-h,c[b]!==1&&(d=Math.abs(c[b]));continue}let k=this.#n[2*D],B=this.#n[2*D+1];const F=g+k,X=y+B;A=F,S=X;let J=g,st=y;for(;;){const W=this.#a(c,e,J,st,A,S,1);k=this.#n[2*W],B=this.#n[2*W+1];const dt=J+k,bt=st+B;E.push(bt,dt);const gt=J*e+st;if(c[gt+1]===0?c[gt]=-h:c[gt]===1&&(c[gt]=h),dt===g&&bt===y&&J===F&&st===X){c[b]!==1&&(d=Math.abs(c[b]));break}else A=J,S=st,J=dt,st=bt}}}return f}static#r(t,e,i,a){if(i-e<=4){for(let F=e;F<i-2;F+=2)a.push(t[F],t[F+1]);return}const l=t[e],c=t[e+1],h=t[i-4]-l,d=t[i-3]-c,f=Math.hypot(h,d),g=h/f,y=d/f,b=g*c-y*l,v=d/h,A=1/f,S=Math.atan(v),E=Math.cos(S),T=Math.sin(S),O=A*(Math.abs(E)+Math.abs(T)),x=A*(1-O+O**2),D=Math.max(Math.atan(Math.abs(T+E)*x),Math.atan(Math.abs(T-E)*x));let k=0,B=e;for(let F=e+2;F<i-2;F+=2){const X=Math.abs(b-g*t[F+1]+y*t[F]);X>k&&(B=F,k=X)}k>(f*D)**2?(this.#r(t,e,B+2,a),this.#r(t,B,i,a)):a.push(l,c)}static#o(t){const e=[],i=t.length;return this.#r(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#l(t,e,i,a,l,c){const h=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let S=0;S<c;S++){const E=(S-f)**2;for(let T=0;T<c;T++)h[S*c+T]=Math.exp((E+(T-f)**2)/d)}const g=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,v=new Uint8Array(b),A=new Uint32Array(256);for(let S=0;S<i;S++)for(let E=0;E<e;E++){const T=S*e+E,O=t[T];let x=0,D=0;for(let B=0;B<c;B++){const F=S+B-f;if(!(F<0||F>=i))for(let X=0;X<c;X++){const J=E+X-f;if(J<0||J>=e)continue;const st=t[F*e+J],W=h[B*c+X]*g[Math.abs(st-O)];x+=st*W,D+=W}}const k=v[T]=Math.round(x/D);A[k]++}return[v,A]}static#c(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let h=0,d=i.length;h<d;h++){const f=i[h]=t[h<<2];a=Math.max(a,f),l=Math.min(l,f)}const c=255/(a-l);for(let h=0,d=i.length;h<d;h++)i[h]=(i[h]-l)*c;return i}static#u(t){let e,i=-1/0,a=-1/0;const l=t.findIndex(d=>d!==0);let c=l,h=l;for(e=l;e<256;e++){const d=t[e];d>i&&(e-c>a&&(a=e-c,h=e-1),i=d,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:l}=this.#t;let c=i,h=a;if(i>l||a>l){let b=i,v=a,A=Math.log2(Math.max(i,a)/l);const S=Math.floor(A);A=A===S?S-1:S;for(let T=0;T<A;T++){c=Math.ceil(b/2),h=Math.ceil(v/2);const O=new OffscreenCanvas(c,h);O.getContext("2d").drawImage(t,0,0,b,v,0,0,c,h),b=c,v=h,t!==e&&t.close(),t=O.transferToImageBitmap()}const E=Math.min(l/c,l/h);c=Math.round(c*E),h=Math.round(h*E)}const f=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,h);const g=f.getImageData(0,0,c,h).data;return[this.#d(g),c,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},l,c,h,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:T,fontBoundingBoxDescent:O,width:x}=g.measureText(t),D=1.5,k=Math.ceil(Math.max(Math.abs(v)+Math.abs(A)||0,x)*D),B=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||y,Math.abs(T)+Math.abs(O)||y)*D);f=new OffscreenCanvas(k,B),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,k,B),g.fillStyle="black",g.fillText(t,k*(D-1)/2,B*(3-D)/2);const F=this.#d(g.getImageData(0,0,k,B).data),X=this.#c(F),J=this.#u(X),st=this.#s(F,k,B,J);return this.processDrawnLines({lines:{curves:st,width:k,height:B},pageWidth:l,pageHeight:c,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,l){const[c,h,d]=this.#f(t),[f,g]=this.#l(c,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#u(g),b=this.#s(f,h,d,y);return this.processDrawnLines({lines:{curves:b,width:h,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:c,areContours:h}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,b=[],v=Math.min(e/f,i/g),A=v/e,S=v/i,E=[];for(const{points:O}of d){const x=c?this.#o(O):O;if(!x)continue;E.push(x);const D=x.length,k=new Float32Array(D),B=new Float32Array(3*(D===2?2:D-2));if(b.push({line:B,points:k}),D===2){k[0]=x[0]*A,k[1]=x[1]*S,B.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[F,X,J,st]=x;F*=A,X*=S,J*=A,st*=S,k.set([F,X,J,st],0),B.set([NaN,NaN,NaN,NaN,F,X],0);for(let W=4;W<D;W+=2){const dt=k[W]=x[W]*A,bt=k[W+1]=x[W+1]*S;B.set(et.createBezierPoints(F,X,J,st,dt,bt),(W-2)*3),[F,X,J,st]=[J,st,dt,bt]}}if(b.length===0)return null;const T=h?new od:new Jr;return T.build(b,e,i,1,a,h?0:y,l),{outline:T,newCurves:E,areContours:h,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:l}){let c=1/0,h=-1/0,d=0;for(const x of t){d+=x.length;for(let D=2,k=x.length;D<k;D++){const B=x[D]-x[D-2];c=Math.min(c,B),h=Math.max(h,B)}}let f;c>=-128&&h<=127?f=Int8Array:c>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=Cl+Rr*g,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=a,b[v++]=l,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(i??0)),b[v++]=g,b[v++]=f.BYTES_PER_ELEMENT;for(const x of t)b[v++]=x.length-2,b[v++]=x[0],b[v++]=x[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(b);const E=f.prototype.constructor;for(const x of t){const D=new E(x.length-2);for(let k=2,B=x.length;k<B;k++)D[k-2]=x[k]-x[k-2];S.write(D)}S.close();const T=await new Response(A.readable).arrayBuffer(),O=new Uint8Array(T);return e0(O)}static async decompressSignature(t){try{const e=xx(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,h=0;for await(const x of i)c||=new Uint8Array(new Uint32Array(x.buffer,0,4)[0]),c.set(x,h),h+=x.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],b=d[4]===0,v=d[5],A=d[6],S=d[7],E=[],T=(Cl+Rr*A)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(S){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(c.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(c.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(c.buffer,T);break}h=0;for(let x=0;x<A;x++){const D=d[Rr*x+Cl],k=new Float32Array(D+2);E.push(k);for(let B=0;B<Rr-1;B++)k[B]=d[Rr*x+Cl+B+1];for(let B=0;B<D;B++)k[B+2]=k[B]+O[h++]}return{areContours:b,thickness:v,outlines:E,width:g,height:y}}catch(e){return _t(`decompressSignature: ${e}`),null}}}class Ld extends O0{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const t=new Ld;return t.updateAll(this),t}}class zd extends ac{constructor(t){super(t),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const t=new zd(this._viewParameters);return t.updateAll(this),t}}class Un extends ht{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=yt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ct.initialize(t,e),this._defaultDrawingOptions=new Ld,this._defaultDrawnSignatureOptions=new zd(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return xt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:l,areContours:c,description:h,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,v=ga.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Un._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(v,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:l}=this.#n,c=Math.max(a,l),h=ga.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:l,y:c}=this,{outline:h}=this.#n=t;this.#t=h instanceof od,this.description=i;let d;this.#t?d=Un.getDefaultDrawingOptions():(d=Un._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[f,g]=this.parentDimensions,[,y]=this.pageDimensions;let b=e/y;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(f*this.width,g*this.height),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return ga.process(t,e,i,a,Un._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:l}=this.parent.viewport;return ga.extractContoursFromText(t,e,i,a,l,Un._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return ga.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:Un._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Un.getDefaultDrawingOptions():(this._drawingOptions=Un._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":l}}=this,c={annotationType:yt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:l,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(c),t?(c.paths={lines:e,points:i},c.uuid=this.#i,c.isCopy=!0):c.lines=e,this.#e&&(c.accessibilityData={type:"Figure",alt:this.#e}),c}static deserializeDraw(t,e,i,a,l,c){return c.areContours?od.deserialize(t,e,i,a,l,c):Jr.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class sR extends ct{#t=null;#e=null;#n=null;#i=null;#a=null;#s="";#r=null;#o=!1;#l=null;#c=!1;#d=!1;static _type="stamp";static _editorType=yt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ct.initialize(t,e)}static isHandlingMimeForPasting(t){return td.includes(t)}static paste(t,e){e.pasteEditor({mode:yt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#u(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#u(a)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(a=>this.#u(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=td.join(",");const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#r===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);const t=200;this.#l=setTimeout(()=>{this.#l=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,l]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,i=this.height*l;else if(e>c*a||i>c*l){const g=Math.min(c*a/e,c*l/i);e*=g,i*=g}const[h,d]=this.parentDimensions;this.setDims(e*h/a,i*d/l),this._uiManager.enableWaiting(!1);const f=this.#r=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=e/a,this.height=i/l,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:l}=this.#t,c=new Gn;let h=this.#t,d=a,f=l,g=null;if(e){if(a>e||l>e){const B=Math.min(e/a,e/l);d=Math.floor(a*B),f=Math.floor(l*B)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*c.sx),v=g.height=Math.ceil(f*c.sy);this.#c||(h=this.#h(b,v));const A=g.getContext("2d");A.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",E="#42414d");const T=15,O=T*c.sx,x=T*c.sy,D=new OffscreenCanvas(O*2,x*2),k=D.getContext("2d");k.fillStyle=S,k.fillRect(0,0,O*2,x*2),k.fillStyle=E,k.fillRect(0,0,O,x),k.fillRect(O,x,O,x),A.fillStyle=A.createPattern(D,"repeat"),A.fillRect(0,0,b,v),A.drawImage(h,0,0,h.width,h.height,0,0,b,v)}let y=null;if(i){let b,v;if(c.symmetric&&h.width<t&&h.height<t)b=h.width,v=h.height;else if(h=this.#t,a>t||l>t){const E=Math.min(t/a,t/l);b=Math.floor(a*E),v=Math.floor(l*E),this.#c||(h=this.#h(b,v))}const S=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});S.drawImage(h,0,0,h.width,h.height,0,0,b,v),y={width:b,height:v,data:S.getImageData(0,0,b,v).data}}return{canvas:g,width:d,height:f,imageData:y}}#h(t,e){const{width:i,height:a}=this.#t;let l=i,c=a,h=this.#t;for(;l>2*t||c>2*e;){const d=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(l,c);g.getContext("2d").drawImage(h,0,0,d,f,0,0,l,c),h=g.transferToImageBitmap()}return h}#m(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,l=new Gn,c=Math.ceil(i*t*l.sx),h=Math.ceil(a*e*l.sy),d=this.#r;if(!d||d.width===c&&d.height===h)return;d.width=c,d.height=h;const f=this.#c?this.#t:this.#h(c,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,h)}#v(t){if(t){if(this.#c){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*Ta.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*Ta.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,l=!1;if(t instanceof C0){const{data:{rect:S,rotation:E,id:T,structParent:O,popupRef:x,contentsObj:D},container:k,parent:{page:{pageNumber:B}},canvas:F}=t;let X,J;F?(delete t.canvas,{id:X,bitmap:J}=i.imageManager.getFromCanvas(k.id,F),F.remove()):(l=!0,t._hasNoCanvas=!0);const st=(await e._structTree.getAriaAttributes(`${_d}${T}`))?.get("aria-label")||"";a=t={annotationType:yt.STAMP,bitmapId:X,bitmap:J,pageIndex:B-1,rect:S.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:st},isSvg:!1,structParent:O,popupRef:x,comment:D?.str||null}}const c=await super.deserialize(t,e,i),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;l?(i.addMissingCanvas(t.id,c),c.#o=!0):g&&i.imageManager.isValidId(g)?(c.#e=g,d&&(c.#t=d)):c.#i=f,c.#c=y;const[v,A]=c.pageDimensions;return c.width=(h[2]-h[0])/v,c.height=(h[3]-h[1])/A,b&&(c.altTextData=b),c._initialData=a,t.comment&&c.setCommentData(t.comment),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:yt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(i),t)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=this.#y(i);if(h.isSame)return null;h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const c=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#v(!1);else if(this.#c){const h=e.stamps.get(this.#e);c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=this.#v(!1))}return i}#y(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class di{#t;#e=!1;#n=null;#i=null;#a=null;#s=new Map;#r=!1;#o=!1;#l=!1;#c=null;#d=null;#u=null;#f=null;#g=null;#p=-1;#h;static _initialized=!1;static#m=new Map([Se,kd,sR,ae,Un].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:l,annotationLayer:c,drawLayer:h,textLayer:d,viewport:f,l10n:g}){const y=[...di.#m.values()];if(!di._initialized){di._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#h=t,this.pageIndex=e,this.div=i,this.#t=l,this.#n=c,this.viewport=f,this.#u=d,this.drawLayer=h,this._structTree=a,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===yt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#b(),t){case yt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of di.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#s.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#h.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#n){this.#l=!1;return}const e=this.#n.getEditableAnnotations();for(const i of e){if(i.hide(),this.#h.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#l=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#g){this.#g=new AbortController;const a=this.#h.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:d,timeStamp:f}=l,g=this.#p;if(f-g>500){this.#p=f;return}this.#p=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(h,d);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let v;const A=new RegExp(`^${Kb}[0-9]+$`);for(const E of b)if(A.test(E.id)){v=E.id;break}if(!v)return;const S=this.#s.get(v);S?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),S.dblclick())},{signal:a,capture:!0})}const t=new Map,e=new Map;for(const a of this.#s.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#n){const a=this.#n.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#h.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let h=e.get(c);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=t.get(c),h&&(this.#h.addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}this.#b(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of di.#m.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#h.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#v(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:i}=De.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#h.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ae.startHighlighting(this,this.#h.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#h.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),ct.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#l),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#h.getId()}get#y(){return di.#m.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#A(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#S(),l=this.getNextId(),c=this.#A({parent:this,id:l,x:i,y:a,uiManager:this.#h,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await di.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),l=this.#A({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...i});return l&&this.add(l),l}#S(){const{x:t,y:e,width:i,height:a}=this.div.getBoundingClientRect(),l=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(l+h)/2-t,g=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#r||(this.#r=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#h.getMode();if(i===yt.STAMP||i===yt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#r=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const i=this.#h.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#y.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#h.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#b(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ws(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#b();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ws(this.div,{rotation:i}),e!==i)for(const a of this.#s.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class Oe{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return xt(this,"_svgFactory",new Il)}static#a(t,[e,i,a,l]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*l}%`}#s(){const t=Oe._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,e){const i=Oe._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const l=Oe._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Oe.#i++,l=this.#s(),c=Oe._svgFactory.createElement("defs");l.append(c);const h=Oe._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(a,h);const f=i?this.#r(c,d):null,g=Oe._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(a,l),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Oe.#i++,a=this.#s(),l=Oe._svgFactory.createElement("defs");a.append(l);const c=Oe._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Oe._svgFactory.createElement("mask");l.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Oe._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Oe._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${h}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Oe._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:l,path:c}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#o(h,i),a&&Oe.#a(h,a),l){const{classList:d}=h;for(const[f,g]of Object.entries(l))d.toggle(f,g)}if(c){const f=h.firstChild.firstChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ad};globalThis.pdfjsLib={AbortException:Gi,AnnotationEditorLayer:di,AnnotationEditorParamsType:Nt,AnnotationEditorType:yt,AnnotationEditorUIManager:$i,AnnotationLayer:Nd,AnnotationMode:Hi,AnnotationType:fe,build:zC,ColorPicker:En,createValidAbsoluteUrl:Jb,DOMSVGFactory:Il,DrawLayer:Oe,FeatureTest:De,fetchData:Xr,getDocument:y0,getFilenameFromUrl:Cx,getPdfFilenameFromUrl:Rx,getRGB:nc,getUuid:t0,getXfaPageViewport:Mx,GlobalWorkerOptions:Aa,ImageKind:Dl,InvalidPDFException:Qh,isDataScheme:ec,isPdfFile:Sd,isValidExplicitDest:Ux,MathClamp:Fe,noContextMenu:Tn,normalizeUnicode:Ex,OPS:jr,OutputScale:Gn,PasswordResponses:gx,PDFDataRangeTransport:b0,PDFDateString:Wh,PDFWorker:Ir,PermissionFlag:px,PixelsPerInch:Ta,RenderingCancelledException:Ad,ResponseException:jl,setLayerDimensions:ws,shadow:xt,SignatureExtractor:ga,stopEvent:pe,SupportedImageMimeTypes:td,TextLayer:Pe,TouchManager:ic,updateUrlHash:Qb,Util:it,VerbosityLevel:Ql,version:A0,XfaLayer:S0};Aa.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${A0}/pdf.worker.min.mjs`;const aR=async r=>{const t=await r.arrayBuffer(),e=await y0({data:t}).promise;let i="";for(let a=1;a<=e.numPages;a++){const h=(await(await e.getPage(a)).getTextContent()).items.map(d=>d.str);i+=h.join(" ")+`
`}return i},M0=Bt(),rR=gi({role:Bt(),company:Bt(),location:Bt().optional(),duration:Bt(),bullets:pi(M0)}),oR=gi({id:Bt(),type:Vl("experience"),title:Bt(),items:pi(rR)}),lR=gi({degree:Bt(),institution:Bt(),location:Bt().optional(),duration:Bt(),gpa:Bt().optional()}),cR=gi({id:Bt(),type:Vl("education"),title:Bt(),items:pi(lR)}),uR=gi({category:Bt(),items:pi(Bt())}),hR=gi({id:Bt(),type:Vl("skills"),title:Bt(),items:pi(uR)}),dR=gi({label:Bt(),value:Bt().optional(),bullets:pi(M0).optional()}),fR=gi({id:Bt(),type:Vl("custom"),title:Bt(),items:pi(dR)}),pR=lE("type",[oR,cR,hR,fR]),ld=gi({name:Bt(),title:Bt(),phone:Bt(),email:Bt(),location:Bt(),nationality:Bt().optional(),extraField:Bt().optional(),summary:Bt(),sections:pi(pR)}),Jy={name:"",title:"",location:"",nationality:"",extraField:"",email:"",phone:"",summary:"",sections:[]},gR=r=>{let t=`${r.title}
`;switch(r.type){case"experience":r.items.forEach(e=>{t+=[e.role,e.duration,e.company,e.location,...e.bullets,""].filter(Boolean).join(`
`)});break;case"education":r.items.forEach(e=>{t+=[e.degree,e.duration,e.institution,e.location,e.gpa&&`GPA: ${e.gpa}`,""].filter(Boolean).join(`
`)});break;case"skills":r.items.forEach(e=>{t+=`${e.category}: ${e.items.join(", ")}
`});break;case"custom":r.items.forEach(e=>{t+=[e.label,e.value,...e.bullets||[],""].filter(Boolean).join(`
`)});break}return t+`
`},mR=async(r,t,e)=>{try{if(!e.trim())throw new Error("Please provide an API key.");if(!r)throw new Error("Resume data is required");if(!t)throw new Error("Job description is required");const i=bR(r),a=`
You are an expert Applicant Tracking System (ATS) engine. Analyze the JOB DESCRIPTION and RESUME texts below and return ONLY a single JSON object (no extra text, no explanations). Follow the JSON structure exactly and compute numeric scores using the explicit formulas and weights given. Round all final numeric scores to integers.

--- INPUTS ---
Job Description:
${t}

Resume Text:
${i}

--- PARSING RULES (extract from JD & Resume) ---
From the Job Description, identify:
- title_required (string)  primary job title asked for.
- required_years_experience (integer)  if the JD specifies "X years" for required experience; otherwise null.
- must_have_skills (array of strings)  skills the JD marks as "must", "required", or "essential".
- preferred_skills (array of strings)  skills marked "nice to have", "preferred", or "bonus".
- required_education (string)  any explicit education requirement (e.g., "Bachelor's in CS") or null.
- required_certifications (array of strings)  explicit certification requirements or [].
- responsibilities (array of short strings)  key duties listed.
- soft_skills_requested (array of strings)  soft skills requested in the JD.

From the Resume, extract:
- candidate_titles (array of titles found in experience section).
- total_years_experience (number)  sum or best estimate of professional experience in years.
- skills_found (array of strings)  all technical/hard skills and soft skills found; include counts for each occurrence.
- education_found (string) and certifications_found (array).
- bullets_total (integer)  total number of achievement bullets in experience.
- bullets_quantified (integer)  number of bullets containing numeric quantifiers (%, numbers, $).
- action_verb_count (integer)  count of strong action verbs used (e.g., "led", "designed", "decreased").
- contact_fields_present (object)  { email: true/false, phone: true/false, address: true/false, linkedin_or_portfolio: true/false }.
- formatting_checks: ats_parseability (one of "ok","warning","error"), file_format (e.g., "pdf","docx" or "unknown"), file_size_mb (number or null).
- obvious_spelling_grammar_issues (integer)  count of detected issues.

--- SCORING FORMULA (deterministic) ---
Compute component scores (each component yields a 0100 number) then combine with weights to produce "match_rate" (0100 integer).

Weights (sum = 100):
- must_have_skills_weight = 35
- preferred_skills_weight = 10
- experience_weight = 20
- education_and_certs_weight = 10
- title_weight = 5
- ats_formatting_weight = 5
- quantifying_actionverbs_weight = 8
- soft_skills_weight = 7

Component calculations:
1) Must-Have Skills Score:
- If JD has no must_have_skills, component = 100.
- Else component = (matched_must_count / total_must_count) * 100.
- matched_must_count counts exact or close matches (synonyms allowed).

2) Preferred Skills Score:
- If JD has no preferred_skills, component = 100.
- Else component = (matched_preferred_count / total_preferred_count) * 100.

3) Experience Score:
- If required_years_experience is null, component = 100.
- Else ratio = min(total_years_experience / required_years_experience, 1).
  component = ratio * 100.
- Additionally, if total_years_experience < required_years_experience, subtract an experience shortfall penalty = min( (required_years_experience - total_years_experience) * 5, 30 ) from the component (floor 0).

4) Education & Certifications Score:
- Start at 0.
- If required_education is present in JD:
  - If education_found matches or exceeds requirement => add 100.
  - Else add 0.
- For required_certifications:
  - If JD lists N required certs and M are matched, cert_score = (M / N) * 100. If N==0 cert_score = 100.
- Final component = average of education score and cert_score (if only one exists, that is the component).

5) Title Score:
- 100 if JD title_required appears exactly in candidate_titles (or as headline/title).
- 70 if a close variant (e.g., "Senior X" vs "X Engineer") appears.
- 40 if related/adjacent titles appear.
- 0 otherwise.

6) ATS Formatting Score:
- Map ats_parseability: "ok" -> 100, "warning" -> 60, "error" -> 20.
- If file_format is not a standard text format (pdf/docx/txt) mark a small penalty: subtract 10 points (but do not go below 0).
- Component = mapped value (after penalties).

7) Quantifying & Action-Verbs Score:
- quantified_ratio = bullets_quantified / max(bullets_total,1).
- quantified_score = quantified_ratio * 100.
- action_verb_ratio = min(action_verb_count / 12, 1).
- action_verb_score = action_verb_ratio * 100.
- component = round( 0.7 * quantified_score + 0.3 * action_verb_score ).

8) Soft Skills Score:
- If JD lists soft_skills_requested:
  component = (matched_soft_count / total_soft_requested) * 100.
- Else component = 100.

Combine:
match_rate_raw = (
  must_have_component * 0.35 +
  preferred_component * 0.10 +
  experience_component * 0.20 +
  education_component * 0.10 +
  title_component * 0.05 +
  ats_component * 0.05 +
  quant_action_component * 0.08 +
  soft_component * 0.07
)

Final adjustments (hard rules):
- If total_must_count > 0 and (matched_must_count / total_must_count) < 0.5, then cap match_rate_raw to a maximum of 55.
- If total_must_count > 0 and matched_must_count == 0, then set match_rate_raw = min(match_rate_raw, 40).
- If candidate clearly fails a stated minimum (e.g., required_years_experience > total_years_experience by more than 50%, or a required certification/education explicitly missing), reduce match_rate_raw by 10 (floor 0).
- Final match_rate = round(clamp(match_rate_raw, 0, 100)).

--- OUTPUT JSON SCHEMA (return THIS EXACT OBJECT) ---
{
  "match_rate": integer,                      // 0-100, final score
  "breakdown": {                              // component details (each 0-100 int)
    "must_have_skills_component": integer,
    "preferred_skills_component": integer,
    "experience_component": integer,
    "education_component": integer,
    "title_component": integer,
    "ats_formatting_component": integer,
    "quant_action_component": integer,
    "soft_component": integer,
    "adjustments_applied": [                   // list of short strings describing any final caps/penalties applied
      "string", ...
    ]
  },
  "content": {                                // same semantics as before
    "ats_parse_rate": { "status": "ok|warning|error", "message": "string" },
    "quantifying_impact": { "status": "ok|warning|error", "message": "string", "bullets_total": integer, "bullets_quantified": integer },
    "repetition": { "status": "ok|warning|error", "message": "string", "top_repeated_terms": ["string", ...] },
    "spelling_grammar": { "status": "ok|warning|error", "message": "string", "issues_found": integer }
  },
  "sections": {
    "essential_sections": {
      "Experience": { "status": "present|not_present", "message": "string" },
      "Education": { "status": "present|not_present", "message": "string" },
      "Skills": { "status": "present|not_present", "message": "string" }
    },
    "contact_information": {
      "Email": { "status": "present|not_present", "message": "string" },
      "Phone": { "status": "present|not_present", "message": "string" },
      "Address": { "status": "present|not_present", "message": "string" },
      "LinkedIn/Portfolio": { "status": "present|not_present", "message": "string" }
    }
  },
  "ats_essentials": {
    "file_format_size": { "status": "ok|warning|error", "message": "string", "file_format": "string", "file_size_mb": number|null },
    "design": { "status": "ok|warning|error", "message": "string" },
    "email_address": { "status": "ok|not_present|invalid", "message": "string" },
    "header_links": { "status": "ok|warning|not_present", "message": "string" }
  },
  "tailoring": {
    "hard_skills": [ { "skill": "string", "resume_count": integer, "job_description_count": integer, "message": "string" }, ... ],
    "soft_skills": [ { "skill": "string", "resume_count": integer, "job_description_count": integer, "message": "string" }, ... ],
    "action_verbs": { "count": integer, "message": "string" },
    "tailored_title": { "status": "ok|error", "message": "string" }
  },
  "suggestions": [ "string", ... ]            // prioritized (most impactful first)
}

--- ADDITIONAL GUIDELINES ---
- Be conservative and literal: prefer under-estimating fit rather than inflating.
- Use synonyms and fuzzy matching for skills/titles but prefer exact matches when present.
- When counting occurrences, count distinct mentions across experience bullets, skills lists, and summaries.
- In "message" fields include short evidence phrases (e.g., "3/5 must-have skills matched: React(yes), Node(no), SQL(yes)").
- If any field required by the schema cannot be determined, fill with sensible defaults (e.g., counts = 0, status = "not_present").
- Output MUST be valid JSON parsable by standard JSON.parse.

Now perform the analysis and return the JSON object only.
`,l=await D0(a,e);let c;try{const h=l.indexOf("{"),d=l.lastIndexOf("}")+1;if(h===-1||d===0)throw new Error("No JSON found");const f=l.slice(h,d);c=JSON.parse(f)}catch(h){throw console.error("Failed to parse JSON:",h.message),new Error("Invalid response from AI")}return c}catch(i){throw console.error("Error:",i.message),i}},yR=async(r,t)=>{try{if(!t.trim())throw new Error("Please provide an API key.");const e=await aR(r),i=ld.toJSONSchema(),a=`
You are a system that extracts structured resume data.

TASK:
Given the Resume text below, produce a VALID JSON object that STRICTLY matches the ResumeData schema.

CRITICAL RULES (must follow all):
- Output ONLY raw JSON (no markdown, no comments, no explanation).
- The top-level output MUST be a single JSON object.
- ALL required fields MUST exist.
- Use empty strings "" for missing string values.
- Use empty arrays [] for missing array values.
- NEVER use null or undefined.
- Array fields MUST always be arrays, even if only one item exists.
- Object items inside arrays MUST contain ALL their required fields.
- Do NOT infer information that is not supported by the Resume text.
- Keep bullet points concise and factual.
- Preserve original wording when possible.

SCHEMA (for reference, not to be reprinted):
${JSON.stringify(i,null,2)}

RESUME TEXT:
"""
${e}
"""

OUTPUT:
Return ONLY the JSON object that conforms exactly to the schema.
`,l=await D0(a,t);let c;try{const h=l.indexOf("{"),d=l.lastIndexOf("}")+1;if(h===-1||d===0)throw new Error("No JSON found");const f=l.slice(h,d);c=JSON.parse(f);const g=ld.safeParse(c);if(!g.success)throw new Error("AI returned invalid Resume structure");return g.data}catch(h){throw console.error("Failed to parse JSON:",h.message),new Error("Invalid response from AI")}}catch(e){throw console.error("Error:",e.message),e}},D0=async(r,t)=>(await re.post("https://api.deepseek.com/v1/chat/completions",{model:"deepseek-chat",messages:[{role:"user",content:r}],temperature:.3},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.choices[0].message.content,bR=r=>{let e=`${[r.name,r.title,r.phone,r.email,r.location,r.nationality,r.extraField].filter(Boolean).join(`
`)}

`;return e+=`Summary
${r.summary}

`,r.sections.forEach(i=>{e+=gR(i)}),e.trim()};function vR({resumeData:r,apiKey:t,onChange:e,setError:i}){const[a,l]=qn.useState(!1),c=(y,b)=>e({...r,[y]:b}),h=(y,b)=>{const v=[...r.sections];v[y]=b,c("sections",v)},d=y=>c("sections",r.sections.filter((b,v)=>v!==y)),f=y=>{const b={id:jE(),title:y==="experience"?"Experience":y==="education"?"Education":y==="skills"?"Skills":"Custom Section",type:y,items:[]};c("sections",[...r.sections,b])},g=async y=>{if(!t){i("Please configure your API key first.");return}l(!0),i("");try{const b=await yR(y,t);e(b)}catch(b){i(b.message||"Failed to autofill Resume.")}finally{l(!1)}};return L.jsxs("aside",{className:"col-span-12 lg:col-span-3 bg-base-100 rounded-xl shadow p-4 overflow-y-auto",children:[L.jsxs("div",{className:"flex items-center justify-between mb-4",children:[L.jsx("h2",{className:"font-semibold",children:"Edit Resume"}),L.jsxs("label",{className:"btn btn-xs btn-primary",children:[a?"Processing":"Upload PDF",L.jsx("input",{type:"file",accept:".pdf",hidden:!0,disabled:a,onChange:y=>{const b=y.target.files?.[0];b&&g(b)}})]})]}),L.jsxs(Uh,{title:"About",columns:!0,children:[L.jsx(ve,{label:"Name",value:r.name,onChange:y=>c("name",y)}),L.jsx(ve,{label:"Title",value:r.title,onChange:y=>c("title",y)}),L.jsx(ve,{label:"Location",value:r.location,onChange:y=>c("location",y)}),L.jsx(ve,{label:"Nationality",value:r.nationality||"",onChange:y=>c("nationality",y)}),L.jsx(ve,{label:"Email",value:r.email,onChange:y=>c("email",y)}),L.jsx(ve,{label:"Phone",value:r.phone,onChange:y=>c("phone",y)}),L.jsx(ve,{label:"Extra Field",value:r.extraField||"",onChange:y=>c("extraField",y)}),L.jsx(Or,{label:"Summary",value:r.summary,onChange:y=>c("summary",y)})]}),L.jsx(Uh,{title:"Add Section",children:L.jsxs("div",{className:"flex gap-2 flex-wrap",children:[L.jsx("button",{className:"btn btn-sm",onClick:()=>f("experience"),children:"+ Experience"}),L.jsx("button",{className:"btn btn-sm",onClick:()=>f("education"),children:"+ Education"}),L.jsx("button",{className:"btn btn-sm",onClick:()=>f("skills"),children:"+ Skills"}),L.jsx("button",{className:"btn btn-sm",onClick:()=>f("custom"),children:"+ Custom"})]})}),r.sections.map((y,b)=>L.jsxs(Uh,{title:y.title,updateSection:v=>h(b,{...y,title:v}),onAdd:()=>{const v=[...y.items];y.type==="experience"&&v.push({role:"",company:"",duration:"",location:"",bullets:[]}),y.type==="education"&&v.push({degree:"",institution:"",duration:"",location:"",gpa:""}),y.type==="skills"&&v.push({category:"",items:[]}),y.type==="custom"&&v.push({label:"",value:"",bullets:[]}),h(b,{...y,items:v})},children:[y.items.map((v,A)=>{const S=E=>{const T=y.items.map((O,x)=>x===A?{...O,...E}:O);h(b,{...y,items:T})};return L.jsxs(_R,{onRemove:()=>{const E=y.items.filter((T,O)=>O!==A);h(b,{...y,items:E})},children:[y.type==="experience"&&L.jsxs(L.Fragment,{children:[L.jsx(ve,{label:"Role",value:v.role,onChange:E=>S({role:E})}),L.jsx(ve,{label:"Company",value:v.company,onChange:E=>S({company:E})}),L.jsx(ve,{label:"Location",value:v.location,onChange:E=>S({location:E})}),L.jsx(ve,{label:"Duration",value:v.duration,onChange:E=>S({duration:E})}),L.jsx(Or,{label:"Bullets",value:v.bullets.join(`
`),onChange:E=>S({bullets:E.split(`
`)})})]}),y.type==="education"&&L.jsxs(L.Fragment,{children:[L.jsx(ve,{label:"Degree",value:v.degree,onChange:E=>S({degree:E})}),L.jsx(ve,{label:"Institution",value:v.institution,onChange:E=>S({institution:E})}),L.jsx(ve,{label:"Location",value:v.location,onChange:E=>S({location:E})}),L.jsx(ve,{label:"Duration",value:v.duration,onChange:E=>S({duration:E})}),L.jsx(ve,{label:"GPA",value:v.gpa,onChange:E=>S({gpa:E})})]}),y.type==="skills"&&L.jsxs(L.Fragment,{children:[L.jsx(ve,{label:"Category",value:v.category,onChange:E=>S({category:E})}),L.jsx(Or,{label:"Items",value:v.items.join(`
`),onChange:E=>S({items:E.split(`
`)})})]}),y.type==="custom"&&L.jsxs(L.Fragment,{children:[L.jsx(ve,{label:"Label",value:v.label,onChange:E=>S({label:E})}),L.jsx(Or,{label:"Value",value:v.value,onChange:E=>S({value:E})}),L.jsx(Or,{label:"Bullets",value:(v.bullets||[]).join(`
`),onChange:E=>S({bullets:E.split(`
`)})})]})]},A)}),L.jsx("button",{className:"btn btn-xs btn-error",onClick:()=>d(b),children:"Remove section"})]},y.id))]})}const ve=({label:r,value:t,onChange:e,ghost:i=!1})=>L.jsxs("fieldset",{className:"fieldset",children:[r&&L.jsx("legend",{className:"fieldset-legend",children:r}),L.jsx("input",{type:"text",className:`input ${i?"input-ghost font-bold":""}`,value:t,onChange:a=>e(a.target.value)})]}),Or=({label:r,value:t,onChange:e})=>L.jsxs("fieldset",{className:"fieldset md:col-span-2",children:[L.jsx("legend",{className:"fieldset-legend",children:r}),L.jsx("textarea",{className:"textarea h-24 w-full",value:t,onChange:i=>e(i.target.value)})]}),Uh=({title:r,onAdd:t,children:e,columns:i=!1,updateSection:a=null})=>L.jsx("div",{className:"card bg-base-100 shadow-sm w-full mb-2",children:L.jsxs("div",{className:"card-body gap-4",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[a?L.jsx(ve,{value:r,ghost:!0,onChange:a}):L.jsx("h2",{className:"card-title",children:r}),t&&L.jsx("button",{className:"btn btn-sm btn-outline",onClick:t,children:"+ Add"})]}),L.jsx("div",{className:i?"grid grid-cols-1 md:grid-cols-2 gap-4":"flex flex-col gap-4",children:e})]})}),_R=({children:r,onRemove:t})=>L.jsxs("div",{className:"relative rounded-box border border-base-300 bg-base-200 p-4",children:[L.jsx("button",{className:"btn btn-xs btn-circle btn-ghost absolute top-2 right-2",onClick:t,children:""}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r})]}),AR=({resumeData:r,apiKey:t,setError:e})=>{const[i,a]=qn.useState(""),[l,c]=qn.useState(null),[h,d]=qn.useState(!1),f=async v=>{if(v.preventDefault(),!i.trim()){e("Please provide a job description.");return}d(!0),e(""),c(null);try{const A=await mR(r,i,t);c(A)}catch(A){e(A.message||"Analysis failed.")}finally{d(!1)}},g=v=>L.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(v).map(([A,S])=>L.jsxs("div",{className:"flex gap-2",children:[L.jsx(b,{status:S.status}),L.jsxs("span",{children:[L.jsxs("strong",{children:[A.replace(/_/g," "),":"]})," ",S.message]})]},A))}),y=({label:v,value:A})=>L.jsxs("div",{className:"space-y-1",children:[L.jsxs("div",{className:"flex justify-between text-xs opacity-70",children:[L.jsx("span",{children:v}),L.jsxs("span",{children:[A,"%"]})]}),L.jsx("progress",{className:"progress progress-primary w-full",value:A,max:100})]}),b=({status:v})=>v==="ok"?L.jsx("span",{className:"text-success",children:""}):v==="warning"?L.jsx("span",{className:"text-warning",children:""}):v==="error"?L.jsx("span",{className:"text-error",children:""}):null;return L.jsxs("aside",{className:"col-span-12 lg:col-span-3 space-y-4 overflow-y-auto",children:[L.jsxs("div",{className:"bg-base-100 rounded-xl shadow p-4",children:[L.jsx("h2",{className:"font-semibold mb-2",children:"Job Description"}),L.jsxs("form",{onSubmit:f,children:[L.jsx("textarea",{className:"textarea textarea-bordered w-full h-32",value:i,onChange:v=>a(v.target.value),placeholder:"Paste job description..."}),L.jsx("button",{type:"submit",disabled:h,className:"btn btn-primary btn-block mt-3",children:h?"Analyzing":"Analyze Resume"})]})]}),l&&L.jsxs("div",{className:"bg-base-100 rounded-xl shadow p-4 space-y-6",children:[L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-sm opacity-70",children:"ATS Match Score"}),L.jsxs("div",{className:`text-4xl font-bold ${l.match_rate>=80?"text-success":l.match_rate>=60?"text-warning":"text-error"}`,children:[l.match_rate,"%"]}),l.breakdown?.adjustments_applied?.length>0&&L.jsx("div",{className:"text-xs text-warning mt-1",children:"Caps / penalties applied"})]}),l.breakdown&&L.jsxs("div",{className:"space-y-3",children:[L.jsx("h3",{className:"font-semibold text-sm",children:"Score Breakdown"}),L.jsx(y,{label:"Must-have skills",value:l.breakdown.must_have_skills_component}),L.jsx(y,{label:"Preferred skills",value:l.breakdown.preferred_skills_component}),L.jsx(y,{label:"Experience",value:l.breakdown.experience_component}),L.jsx(y,{label:"Education & certs",value:l.breakdown.education_component}),L.jsx(y,{label:"Job title match",value:l.breakdown.title_component}),L.jsx(y,{label:"ATS formatting",value:l.breakdown.ats_formatting_component}),L.jsx(y,{label:"Impact & action verbs",value:l.breakdown.quant_action_component}),L.jsx(y,{label:"Soft skills",value:l.breakdown.soft_component})]}),l.content&&L.jsxs("div",{className:"space-y-2",children:[L.jsx("h3",{className:"font-semibold text-sm",children:"Resume Quality Checks"}),g(l.content)]}),l.ats_essentials&&L.jsxs("div",{className:"space-y-2",children:[L.jsx("h3",{className:"font-semibold text-sm",children:"ATS Compatibility"}),g(l.ats_essentials)]}),l.suggestions?.length>0&&L.jsxs("div",{className:"space-y-2",children:[L.jsx("h3",{className:"font-semibold text-sm",children:"Top Improvement Suggestions"}),L.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:l.suggestions.map((v,A)=>L.jsx("li",{children:v},A))})]})]})]})},Hh="ATS_ANALYZER_API_KEY",qh="ats:v1";function SR(){const r=l=>btoa(`${qh}:${l}`),t=l=>{try{const c=atob(l);return c.startsWith(`${qh}:`)?c.replace(`${qh}:`,""):""}catch{return""}},[e,i]=qn.useState(()=>{const l=sessionStorage.getItem(Hh);return l?t(l):""}),a=qn.useCallback(l=>{if(i(l),!l){sessionStorage.removeItem(Hh);return}sessionStorage.setItem(Hh,r(l))},[sessionStorage]);return{apiKey:e,setApiKey:a}}const Qy="ATS_ANALYZER_RESUME_DATA";function wR(){const{apiKey:r,setApiKey:t}=SR(),e=h=>{t(h.target.value)},[i,a]=qn.useState(""),[l,c]=qn.useState(()=>{const h=localStorage.getItem(Qy);if(h)try{return ld.parse(JSON.parse(h))}catch{return Jy}return Jy});return qn.useEffect(()=>{localStorage.setItem(Qy,JSON.stringify(l))},[l]),L.jsxs("div",{className:"app-root min-h-screen bg-base-200",children:[L.jsxs("div",{className:"navbar bg-base-100 shadow px-6",children:[L.jsx("div",{className:"flex-1",children:L.jsxs("h1",{className:"text-xl font-bold",children:["ATS Resume Analyzer ",L.jsx("span",{className:"text-primary",children:"with AI"})]})}),L.jsx("button",{className:"btn btn-lg btn-circle btn-ghost",onClick:()=>document.getElementById("config-modal").showModal(),children:L.jsx("img",{src:"/options.svg",className:"size-6"})})]}),L.jsxs("div",{className:"grid grid-cols-12 gap-4 p-4 h-[calc(100vh-64px)]",children:[L.jsx(vR,{resumeData:l,apiKey:r,onChange:c,setError:a}),L.jsx(PE,{resumeData:l}),L.jsx(AR,{resumeData:l,apiKey:r,setError:a})]}),i&&L.jsxs("div",{role:"alert",className:"alert alert-error absolute top-4 right-4 z-50",children:[L.jsx("span",{children:i}),L.jsx("button",{className:"btn btn-xs btn-circle btn-ghost",onClick:()=>a(""),children:""})]}),L.jsx("dialog",{id:"config-modal",className:"modal",children:L.jsxs("div",{className:"modal-box",children:[L.jsx("h3",{className:"font-bold text-lg mb-4",children:"Configuration"}),L.jsx("input",{type:"password",className:"input input-bordered w-full",placeholder:"sk-xxxxxxxx",value:r,onChange:e}),L.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Stored locally. Only used for API calls."}),L.jsx("div",{className:"modal-action",children:L.jsx("form",{method:"dialog",children:L.jsx("button",{className:"btn",children:"Close"})})})]})})]})}uA.createRoot(document.getElementById("root")).render(L.jsx(qn.StrictMode,{children:L.jsx(wR,{})}));
